{"version":3,"file":"display-field.mjs","sources":["../../../src/components/form/display-field.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\nimport { DuplicationIcon } from \"@/icons\"\n\n/** 값 표시 타입 */\nexport type DisplayFieldType = \"text\" | \"email\" | \"phone\" | \"money\" | \"date\"\n\n/** 텍스트 오버플로우 처리 방식 */\nexport type TextOverflow = \"wrap\" | \"ellipsis\" | \"truncate\"\n\n/** 너비 크기 */\nexport type DisplayFieldSize = \"sm\" | \"md\" | \"lg\" | \"full\"\n\nconst sizeStyles = {\n  sm: \"w-[160px]\",\n  md: \"w-[260px]\",\n  lg: \"w-[360px]\",\n  full: \"w-full\",\n} as const\n\nexport interface DisplayFieldProps {\n  /** 라벨 텍스트 */\n  label?: string\n  /** 표시할 값 */\n  value?: React.ReactNode\n  /** 값이 비어있을 때 표시할 텍스트 (기본: \"-\") */\n  emptyText?: string\n  /** 너비 크기 */\n  size?: DisplayFieldSize\n  /** 값 타입에 따른 자동 포맷팅 */\n  type?: DisplayFieldType\n  /** 텍스트 오버플로우 처리 (기본: \"wrap\") */\n  textOverflow?: TextOverflow\n  /** 복사 버튼 표시 */\n  copyable?: boolean\n  /** 복사 완료 시 콜백 */\n  onCopy?: (value: string) => void\n  /** 필수 필드 표시 (라벨 앞 점) */\n  required?: boolean\n  /** 도움말 텍스트 */\n  helper?: string\n  /** 추가 className (값 영역) */\n  className?: string\n  /** 라벨 className */\n  labelClassName?: string\n  /** 라벨이 없어도 라벨 공간 유지 */\n  reserveLabelSpace?: boolean\n  /** 커스텀 값 렌더러 (value를 완전히 커스텀) */\n  renderValue?: (value: React.ReactNode) => React.ReactNode\n}\n\n/**\n * 값 포맷팅 함수\n */\nconst formatValue = (value: React.ReactNode, type?: DisplayFieldType): React.ReactNode => {\n  if (value === null || value === undefined || value === \"\") return null\n\n  // ReactNode가 string이 아닌 경우 그대로 반환\n  if (typeof value !== \"string\" && typeof value !== \"number\") return value\n\n  const stringValue = String(value)\n\n  switch (type) {\n    case \"phone\":\n      // 전화번호 포맷: 010-1234-5678\n      return stringValue.replace(/(\\d{3})(\\d{4})(\\d{4})/, \"$1-$2-$3\")\n\n    case \"money\":\n      // 금액 포맷: 1,234,567원\n      const numValue = typeof value === \"number\" ? value : parseFloat(stringValue.replace(/[^0-9.-]/g, \"\"))\n      if (isNaN(numValue)) return stringValue\n      return `${numValue.toLocaleString(\"ko-KR\")}원`\n\n    case \"date\":\n      // 날짜 포맷: YYYY.MM.DD\n      const date = new Date(stringValue)\n      if (isNaN(date.getTime())) return stringValue\n      return `${date.getFullYear()}.${String(date.getMonth() + 1).padStart(2, \"0\")}.${String(date.getDate()).padStart(2, \"0\")}`\n\n    case \"email\":\n    case \"text\":\n    default:\n      return stringValue\n  }\n}\n\n/**\n * DisplayField - 상세 화면(View Mode)에서 라벨과 값을 표시하는 컴포넌트\n *\n * @example\n * // 기본 사용\n * <DisplayField label=\"상품명\" value=\"테스트 상품\" />\n *\n * // 타입별 포맷팅\n * <DisplayField label=\"가격\" value={15000} type=\"money\" />\n * <DisplayField label=\"전화번호\" value=\"01012345678\" type=\"phone\" />\n *\n * // 복사 기능\n * <DisplayField label=\"주문번호\" value=\"ORD-2024-001\" copyable />\n *\n * // 빈 값 처리\n * <DisplayField label=\"메모\" value=\"\" emptyText=\"메모 없음\" />\n */\nexport const DisplayField = React.forwardRef<HTMLDivElement, DisplayFieldProps>(\n  (\n    {\n      label,\n      value,\n      emptyText = \"-\",\n      size = \"full\",\n      type = \"text\",\n      textOverflow = \"wrap\",\n      copyable = false,\n      onCopy,\n      required,\n      helper,\n      className,\n      labelClassName,\n      reserveLabelSpace,\n      renderValue,\n    },\n    ref\n  ) => {\n    const [copied, setCopied] = React.useState(false)\n\n    // 값이 비어있는지 확인\n    const isEmpty = value === null || value === undefined || value === \"\"\n\n    // 포맷된 값\n    const formattedValue = isEmpty ? emptyText : formatValue(value, type)\n\n    // 최종 표시 값 (커스텀 렌더러 적용)\n    const displayValue = renderValue ? renderValue(formattedValue) : formattedValue\n\n    // 복사 처리\n    const handleCopy = async () => {\n      if (isEmpty || typeof value !== \"string\" && typeof value !== \"number\") return\n\n      const textToCopy = String(value)\n      try {\n        await navigator.clipboard.writeText(textToCopy)\n        setCopied(true)\n        onCopy?.(textToCopy)\n        setTimeout(() => setCopied(false), 2000)\n      } catch (err) {\n        console.error(\"Failed to copy:\", err)\n      }\n    }\n\n    // 텍스트 오버플로우 스타일\n    const textOverflowStyles = {\n      wrap: \"whitespace-normal break-words\",\n      ellipsis: \"whitespace-nowrap overflow-hidden text-ellipsis\",\n      truncate: \"truncate\",\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\"flex flex-col gap-1\", sizeStyles[size])}\n      >\n        {/* 라벨 */}\n        {(label || reserveLabelSpace) && (\n          <span\n            className={cn(\n              \"flex items-center gap-1 text-xs text-slate-600 dark:text-slate-50\",\n              !label && \"invisible\",\n              labelClassName\n            )}\n          >\n            {required && (\n              <span className=\"size-2 rounded-full bg-stone-400\" aria-hidden=\"true\" />\n            )}\n            {label || \"\\u00A0\"}\n          </span>\n        )}\n\n        {/* 값 영역 */}\n        <div className=\"relative flex items-center gap-2\">\n          <span\n            className={cn(\n              \"text-sm text-slate-900 dark:text-slate-100\",\n              // 최소 높이 확보 (InputField와 동일한 높이감) + 너비 채우기\n              \"min-h-[36px] flex items-center flex-1\",\n              isEmpty && \"text-slate-400 dark:text-slate-500\",\n              textOverflowStyles[textOverflow],\n              className\n            )}\n          >\n            {displayValue}\n          </span>\n\n          {/* 복사 버튼 */}\n          {copyable && !isEmpty && (\n            <button\n              type=\"button\"\n              onClick={handleCopy}\n              className={cn(\n                \"shrink-0 p-1 rounded transition-colors\",\n                \"text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300\",\n                copied && \"text-green-500 dark:text-green-400\"\n              )}\n              aria-label={copied ? \"복사됨\" : \"복사\"}\n            >\n              <DuplicationIcon size={16} />\n            </button>\n          )}\n        </div>\n\n        {/* 도움말 텍스트 */}\n        {helper && (\n          <span className=\"text-xs text-slate-500 dark:text-slate-400\">\n            {helper}\n          </span>\n        )}\n      </div>\n    )\n  }\n)\n\nDisplayField.displayName = \"DisplayField\"\n"],"names":["sizeStyles","formatValue","value","type","stringValue","numValue","date","DisplayField","React","label","emptyText","size","textOverflow","copyable","onCopy","required","helper","className","labelClassName","reserveLabelSpace","renderValue","ref","copied","setCopied","isEmpty","formattedValue","displayValue","handleCopy","textToCopy","err","textOverflowStyles","jsxs","cn","jsx","DuplicationIcon"],"mappings":";;;;AAeA,MAAMA,IAAa;AAAA,EACjB,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,IAAI;AAAA,EACJ,MAAM;AACR,GAoCMC,IAAc,CAACC,GAAwBC,MAA6C;AACxF,MAAID,KAAU,QAA+BA,MAAU,GAAI,QAAO;AAGlE,MAAI,OAAOA,KAAU,YAAY,OAAOA,KAAU,SAAU,QAAOA;AAEnE,QAAME,IAAc,OAAOF,CAAK;AAEhC,UAAQC,GAAA;AAAA,IACN,KAAK;AAEH,aAAOC,EAAY,QAAQ,yBAAyB,UAAU;AAAA,IAEhE,KAAK;AAEH,YAAMC,IAAW,OAAOH,KAAU,WAAWA,IAAQ,WAAWE,EAAY,QAAQ,aAAa,EAAE,CAAC;AACpG,aAAI,MAAMC,CAAQ,IAAUD,IACrB,GAAGC,EAAS,eAAe,OAAO,CAAC;AAAA,IAE5C,KAAK;AAEH,YAAMC,IAAO,IAAI,KAAKF,CAAW;AACjC,aAAI,MAAME,EAAK,QAAA,CAAS,IAAUF,IAC3B,GAAGE,EAAK,YAAA,CAAa,IAAI,OAAOA,EAAK,SAAA,IAAa,CAAC,EAAE,SAAS,GAAG,GAAG,CAAC,IAAI,OAAOA,EAAK,SAAS,EAAE,SAAS,GAAG,GAAG,CAAC;AAAA,IAEzH,KAAK;AAAA,IACL,KAAK;AAAA,IACL;AACE,aAAOF;AAAA,EAAA;AAEb,GAmBaG,IAAeC,EAAM;AAAA,EAChC,CACE;AAAA,IACE,OAAAC;AAAA,IACA,OAAAP;AAAA,IACA,WAAAQ,IAAY;AAAA,IACZ,MAAAC,IAAO;AAAA,IACP,MAAAR,IAAO;AAAA,IACP,cAAAS,IAAe;AAAA,IACf,UAAAC,IAAW;AAAA,IACX,QAAAC;AAAA,IACA,UAAAC;AAAA,IACA,QAAAC;AAAA,IACA,WAAAC;AAAA,IACA,gBAAAC;AAAA,IACA,mBAAAC;AAAA,IACA,aAAAC;AAAA,EAAA,GAEFC,MACG;AACH,UAAM,CAACC,GAAQC,CAAS,IAAIf,EAAM,SAAS,EAAK,GAG1CgB,IAAUtB,KAAU,QAA+BA,MAAU,IAG7DuB,IAAiBD,IAAUd,IAAYT,EAAYC,GAAOC,CAAI,GAG9DuB,IAAeN,IAAcA,EAAYK,CAAc,IAAIA,GAG3DE,IAAa,YAAY;AAC7B,UAAIH,KAAW,OAAOtB,KAAU,YAAY,OAAOA,KAAU,SAAU;AAEvE,YAAM0B,IAAa,OAAO1B,CAAK;AAC/B,UAAI;AACF,cAAM,UAAU,UAAU,UAAU0B,CAAU,GAC9CL,EAAU,EAAI,GACdT,KAAA,QAAAA,EAASc,IACT,WAAW,MAAML,EAAU,EAAK,GAAG,GAAI;AAAA,MACzC,SAASM,GAAK;AACZ,gBAAQ,MAAM,mBAAmBA,CAAG;AAAA,MACtC;AAAA,IACF,GAGMC,IAAqB;AAAA,MACzB,MAAM;AAAA,MACN,UAAU;AAAA,MACV,UAAU;AAAA,IAAA;AAGZ,WACE,gBAAAC;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,KAAAV;AAAA,QACA,WAAWW,EAAG,uBAAuBhC,EAAWW,CAAI,CAAC;AAAA,QAGnD,UAAA;AAAA,WAAAF,KAASU,MACT,gBAAAY;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,WAAWC;AAAA,gBACT;AAAA,gBACA,CAACvB,KAAS;AAAA,gBACVS;AAAA,cAAA;AAAA,cAGD,UAAA;AAAA,gBAAAH,KACC,gBAAAkB,EAAC,QAAA,EAAK,WAAU,oCAAmC,eAAY,QAAO;AAAA,gBAEvExB,KAAS;AAAA,cAAA;AAAA,YAAA;AAAA,UAAA;AAAA,UAKd,gBAAAsB,EAAC,OAAA,EAAI,WAAU,oCACb,UAAA;AAAA,YAAA,gBAAAE;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,WAAWD;AAAA,kBACT;AAAA;AAAA,kBAEA;AAAA,kBACAR,KAAW;AAAA,kBACXM,EAAmBlB,CAAY;AAAA,kBAC/BK;AAAA,gBAAA;AAAA,gBAGD,UAAAS;AAAA,cAAA;AAAA,YAAA;AAAA,YAIFb,KAAY,CAACW,KACZ,gBAAAS;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,MAAK;AAAA,gBACL,SAASN;AAAA,gBACT,WAAWK;AAAA,kBACT;AAAA,kBACA;AAAA,kBACAV,KAAU;AAAA,gBAAA;AAAA,gBAEZ,cAAYA,IAAS,QAAQ;AAAA,gBAE7B,UAAA,gBAAAW,EAACC,GAAA,EAAgB,MAAM,GAAA,CAAI;AAAA,cAAA;AAAA,YAAA;AAAA,UAC7B,GAEJ;AAAA,UAGClB,KACC,gBAAAiB,EAAC,QAAA,EAAK,WAAU,8CACb,UAAAjB,EAAA,CACH;AAAA,QAAA;AAAA,MAAA;AAAA,IAAA;AAAA,EAIR;AACF;AAEAT,EAAa,cAAc;"}