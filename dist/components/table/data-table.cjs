"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const t=require("react/jsx-runtime"),Wt=require("react"),G=require("@dnd-kit/core"),q=require("@dnd-kit/sortable"),nt=require("@dnd-kit/utilities"),v=require("../../lib/utils.cjs"),d=require("./table.cjs"),ge=require("../ui/checkbox.cjs"),Nt=require("../ui/input.cjs"),Ge=require("../../icons/DownIcon.cjs"),at=require("../../icons/DragHandleIcon.cjs"),et=require("../../icons/RightIcon.cjs"),$t=require("../../icons/STLArrowIcon.cjs"),tt=require("../../icons/WriteIcon.cjs");function Dt(g){const o=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(g){for(const N in g)if(N!=="default"){const E=Object.getOwnPropertyDescriptor(g,N);Object.defineProperty(o,N,E.get?E:{enumerable:!0,get:()=>g[N]})}}return o.default=g,Object.freeze(o)}const h=Dt(Wt);function st({value:g,onChange:o,onComplete:N,onCancel:E,error:k}){const D=h.useRef(null);h.useEffect(()=>{var f,R;(f=D.current)==null||f.focus(),(R=D.current)==null||R.select()},[]);const I=f=>{f.key==="Enter"?(f.preventDefault(),N()):f.key==="Escape"&&(f.preventDefault(),E())};return t.jsxs("div",{className:"flex flex-col gap-0.5",children:[t.jsx(Nt.Input,{ref:D,value:String(g??""),onChange:f=>o(f.target.value),onKeyDown:I,error:!!k,tableMode:!0,className:"w-full px-2 text-xs"}),k&&t.jsx("span",{className:"text-[10px] text-destructive dark:text-red-400",children:k})]})}function Et({id:g,children:o,className:N,style:E,disabled:k}){const{attributes:D,listeners:I,setNodeRef:f,transform:R,transition:x,isDragging:ee}=q.useSortable({id:g,disabled:k}),ne={...E,transform:nt.CSS.Transform.toString(R),transition:x,opacity:ee?.5:1,cursor:k?void 0:"grab"};return t.jsx("th",{ref:f,style:ne,className:v.cn("group/drag h-9 pl-1.5 pr-1.5 py-1.5 text-left align-middle font-medium text-[#798698] dark:text-slate-300","bg-[#eaedf1] dark:bg-slate-800","[&:has([role=checkbox])]:pr-0","hover:bg-slate-200/70 dark:hover:bg-slate-700/70","transition-colors",ee&&"z-50",N),...D,...I,children:t.jsxs("span",{className:"flex items-center gap-0.5",children:[t.jsx(at.DragHandleIcon,{size:16,className:"opacity-30 group-hover/drag:opacity-70 transition-opacity flex-shrink-0"}),o]})})}function it({id:g,children:o,className:N,isSelected:E,onClick:k,onMouseEnter:D,onMouseLeave:I}){const{setNodeRef:f,setActivatorNodeRef:R,listeners:x,attributes:ee,transform:ne,transition:_,isDragging:le}=q.useSortable({id:g}),V={transform:nt.CSS.Transform.toString(ne),transition:_,opacity:le?.5:1};return t.jsx("tr",{ref:f,style:V,"data-state":E?"selected":void 0,className:v.cn("group border-b border-slate-200 dark:border-slate-700 transition-colors","bg-white dark:bg-slate-900 hover:bg-slate-100 dark:hover:bg-slate-800","data-[state=selected]:bg-blue-50 dark:data-[state=selected]:bg-blue-900",le&&"z-50 shadow-lg",N),onClick:k,onMouseEnter:D,onMouseLeave:I,children:typeof o=="function"?o({listeners:x,attributes:ee,setActivatorNodeRef:R}):o})}function rt({isSelected:g,hasLeftStickyColumns:o,dragHandleProps:N}){const{listeners:k,attributes:D,setActivatorNodeRef:I}=N??{};return t.jsx("td",{className:v.cn("p-0 align-middle",o&&(g?"transition-colors bg-blue-50 dark:bg-blue-900":"transition-colors bg-slate-100 dark:bg-slate-800")),style:o?{position:"sticky",left:0,zIndex:10,width:"32px",minWidth:"32px",maxWidth:"32px"}:{width:"32px",minWidth:"32px",maxWidth:"32px"},children:t.jsx("div",{ref:I,className:"flex h-9 w-8 items-center justify-center cursor-grab text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors",onClick:f=>f.stopPropagation(),"aria-label":"행 순서 변경",...k,...D,children:t.jsx(at.DragHandleIcon,{size:16})})})}function Tt({columns:g,data:o,selectable:N=!1,selectedIds:E=[],onSelectionChange:k,sortState:D,onSortChange:I,onRowClick:f,onCellChange:R,expandable:x,emptyMessage:ee="데이터가 없습니다.",className:ne,rowClassName:_,maxHeight:le,resizable:V=!1,columnWidths:ce,onColumnResize:be,columnReorderable:B=!1,columnOrder:ye,onColumnReorder:me,rowReorderable:ve=!1,onRowReorder:oe,loading:lt=!1,loadingContent:ct,headerGroups:A,rowGrouping:K}){const P=K?!1:ve;h.useEffect(()=>{K&&ve&&console.warn("[DataTable] rowGrouping과 rowReorderable은 함께 사용할 수 없습니다. rowSpan 셀이 있는 행을 드래그하면 레이아웃이 깨지므로 rowReorderable이 무시됩니다.")},[K,ve]);const[b,X]=h.useState(null),[we,te]=h.useState(null),J=h.useRef(null),ke=h.useRef(null),[ot,dt]=h.useState((x==null?void 0:x.defaultExpandedRowIds)??[]),[je,ht]=h.useState({}),[Q,Ke]=h.useState(null),Ie=h.useRef(0),He=h.useRef(0),[ft,Ce]=h.useState(()=>g.map(e=>e.accessorKey)),[Se,se]=h.useState(null);h.useEffect(()=>{!B||ye||Ce(e=>{const s=g.map(n=>n.accessorKey),i=e.filter(n=>s.includes(n)),c=s.filter(n=>!i.includes(n)),a=[...i,...c];return a.length===e.length&&a.every((n,S)=>n===e[S])?e:a})},[g,B,ye]);const ie=ye??ft,pt=h.useMemo(()=>B?ie.map(e=>g.find(s=>s.accessorKey===e)).filter(e=>e!==void 0):g,[g,ie,B]),ut=G.useSensors(G.useSensor(G.PointerSensor,{activationConstraint:{distance:5}}),G.useSensor(G.KeyboardSensor,{coordinateGetter:q.sortableKeyboardCoordinates})),ze=h.useCallback(e=>{const{active:s,over:i}=e;if(!i||s.id===i.id)return;const c=ie.findIndex(S=>String(S)===s.id),a=ie.findIndex(S=>String(S)===i.id);if(c===-1||a===-1)return;const n=q.arrayMove(ie,c,a);me?me(n):Ce(n)},[ie,me]),Le=h.useCallback(e=>{const{active:s,over:i}=e;if(!i||s.id===i.id)return;const c=String(s.id).replace(/^row-/,""),a=String(i.id).replace(/^row-/,""),n=o.findIndex(r=>String(r.id)===c),S=o.findIndex(r=>String(r.id)===a);if(n===-1||S===-1)return;const p=q.arrayMove(o,n,S);oe==null||oe(p)},[o,oe]),xt=h.useCallback(e=>{const{active:s}=e;String(s.id).startsWith("row-")?Le(e):ze(e)},[ze,Le]),We=(x==null?void 0:x.expandedRowIds)??ot,Me=(x==null?void 0:x.onExpandedChange)??dt,de=o.length>0&&E.length===o.length,Re=E.length>0&&!de,_e=()=>{de?k==null||k([]):k==null||k(o.map(e=>e.id))},Ae=e=>{E.includes(e)?k==null||k(E.filter(s=>s!==e)):k==null||k([...E,e])},gt=e=>{I&&((D==null?void 0:D.column)===e?D.direction==="asc"?I({column:e,direction:"desc"}):D.direction==="desc"?I({column:null,direction:null}):I({column:e,direction:"asc"}):I({column:e,direction:"asc"}))},bt=e=>(D==null?void 0:D.column)===e?D.direction:null,O=e=>{switch(e){case"center":return"text-center";case"right":return"text-right";default:return"text-left"}},Pe=(e,s,i)=>{X({rowId:e,columnKey:s}),te(i),J.current=i},qe=(e,s)=>{const i=J.current;if(!b||i===null){X(null),te(null),J.current=null;return}if(e.validate){const c=e.validate(i,s);if(c!==!0){X({...b,error:c});return}}R&&R(b.rowId,b.columnKey,i),X(null),te(null),J.current=null},he=h.useCallback(()=>{X(null),te(null),J.current=null},[]);h.useEffect(()=>{if(!b)return;const e=s=>{var a,n;const i=s.target;(a=ke.current)!=null&&a.contains(i)||(n=i.closest)!=null&&n.call(i,"[data-radix-popper-content-wrapper]")||he()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[b,he]);const Oe=(e,s)=>(b==null?void 0:b.rowId)===e&&(b==null?void 0:b.columnKey)===s,Ve=e=>x?x.rowExpandable?x.rowExpandable(e):!0:!1,Ne=e=>We.includes(e),Be=e=>{Ne(e)?Me(We.filter(s=>s!==e)):Me([...We,e])},fe=g.length+(N?1:0)+(x?1:0)+(P?1:0),{rowSpanMap:Fe,middleRowSet:$e}=h.useMemo(()=>{if(!K)return{rowSpanMap:null,middleRowSet:null};const e=Array.isArray(K.groupBy)?K.groupBy:[K.groupBy],s=K.mergeColumns??e,i=new Map,c=new Set;for(const a of s){let n=0;for(;n<o.length;){const S=e.map(l=>o[n][l]),p=o[n][a];let r=1;for(let l=n+1;l<o.length;l++){const L=e.map(W=>o[l][W]),U=o[l][a];if(S.every((W,w)=>W===L[w])&&p===U)r++;else break}i.has(n)||i.set(n,new Map),i.get(n).set(a,r);for(let l=n;l<n+r-1;l++)c.add(l);for(let l=n+1;l<n+r;l++)i.has(l)||i.set(l,new Map),i.get(l).set(a,0);n+=r}}return{rowSpanMap:i,middleRowSet:c}},[o,K]),Xe=(e,s)=>{if(!Fe)return;const i=Fe.get(e);return i?i.get(s):void 0},Je=(e,s)=>Se===null?!1:Se>=e&&Se<e+s,Qe=(e,s)=>{for(let i=e;i<e+s;i++)if(i<o.length&&E.includes(o[i].id))return!0;return!1},j=40,$=40,C=32,pe=h.useMemo(()=>{const e=y=>{const W=y.width??y.minWidth;if(typeof W=="number")return W;const w=parseInt(String(W),10);return Number.isFinite(w)?w:150},s=g.filter(y=>y.sticky==="left"),i=g.filter(y=>y.sticky==="right"),c=P?C:0,a=N?j:0,n=x?$:0,S=c+a+n,p=new Map;let r=S;for(const y of s)p.set(y.accessorKey,r),r+=e(y);const l=new Map;let L=0;for(let y=i.length-1;y>=0;y--){const W=i[y];l.set(W.accessorKey,L),L+=e(W)}const U=s.length>0?s[s.length-1].accessorKey:null,u=i.length>0?i[0].accessorKey:null;return(y,W,w,Y)=>{if(!y.sticky)return{style:{},className:""};const H=y.accessorKey===U,F=y.accessorKey===u,Z=`${e(y)}px`,m={position:"sticky",zIndex:W?20:10,width:Z,minWidth:Z,maxWidth:Z},M=Y??w;if(y.sticky==="left"){const St=p.get(y.accessorKey)??0;return{style:{...m,left:`${St}px`},className:v.cn("transition-colors",W?"bg-[#eaedf1] dark:bg-slate-800":M?"bg-blue-50 dark:bg-blue-900":"bg-slate-100 dark:bg-slate-800",H&&"shadow-[2px_0_4px_rgba(0,0,0,0.08)]")}}const jt=l.get(y.accessorKey)??0;return{style:{...m,right:`${jt}px`},className:v.cn("transition-colors",W?"bg-[#eaedf1] dark:bg-slate-800":M?"bg-blue-50 dark:bg-blue-900":"bg-slate-100 dark:bg-slate-800",F&&"shadow-[-2px_0_4px_rgba(0,0,0,0.08)]")}}},[g,N,x]),T=g.some(e=>e.sticky==="left"),ae=h.useCallback(e=>{const s=String(e.accessorKey);if(ce&&s in ce)return ce[s];if(s in je)return je[s];if(e.width)return typeof e.width=="number"?e.width:parseInt(e.width,10)},[ce,je]),yt=h.useCallback((e,s)=>{e.preventDefault(),e.stopPropagation(),Ke(s.accessorKey),Ie.current=e.clientX;const i=ae(s)??150;He.current=i},[ae]),De=h.useCallback(e=>{if(!Q)return;const s=e.clientX-Ie.current,i=Math.max(50,He.current+s),c=String(Q);be?be(Q,i):ht(a=>({...a,[c]:i}))},[Q,be]),Ee=h.useCallback(()=>{Ke(null)},[]);h.useEffect(()=>{if(Q)return document.addEventListener("mousemove",De),document.addEventListener("mouseup",Ee),document.body.style.userSelect="none",document.body.style.cursor="col-resize",()=>{document.removeEventListener("mousemove",De),document.removeEventListener("mouseup",Ee),document.body.style.userSelect="",document.body.style.cursor=""}},[Q,De,Ee]);const ue=e=>{const s=pe(e,!0),i=p=>typeof p=="number"?`${p}px`:p,c={};if(!e.sticky){const p=V?ae(e):void 0;p!==void 0?(c.width=`${p}px`,c.minWidth=`${p}px`):(e.width&&(c.width=i(e.width)),e.minWidth&&(c.minWidth=i(e.minWidth)))}const a={...c,...s.style},n=V&&t.jsx("div",{className:v.cn("absolute top-0 h-full w-[9px] cursor-col-resize opacity-0 hover:opacity-100 transition-opacity z-30",Q===e.accessorKey&&"opacity-100"),style:{right:"-4px",background:"linear-gradient(to right, transparent, rgba(148,163,184,0.5) 50%, transparent)"},onMouseDown:p=>yt(p,e),onPointerDown:p=>p.stopPropagation(),onClick:p=>p.stopPropagation()});return B&&!e.sticky&&!e.sortable?t.jsxs(Et,{id:String(e.accessorKey),style:a,className:v.cn(O(e.align),s.className,V&&"relative overflow-visible"),children:[e.header,n]},String(e.accessorKey)):e.sortable?t.jsxs(d.TableSortableHead,{sortDirection:bt(e.accessorKey),onSort:()=>gt(e.accessorKey),style:a,className:v.cn(O(e.align),s.className,V&&"relative overflow-visible"),children:[e.header,n]},String(e.accessorKey)):t.jsxs(d.TableHead,{style:a,className:v.cn(O(e.align),s.className,V&&"relative overflow-visible"),children:[e.header,n]},String(e.accessorKey))},z=B?pt:g,Ue=z.filter(e=>!e.sticky).map(e=>String(e.accessorKey)),mt=o.map(e=>`row-${e.id}`),vt=()=>0,Te=()=>P?C:0,xe=()=>{let e=0;return P&&(e+=C),N&&(e+=j),e},kt=h.useCallback(e=>z.filter(s=>e.columns.includes(s.accessorKey)).length,[z]),Ye=h.useMemo(()=>A?new Set(A.flatMap(e=>e.columns)):new Set,[A]),Ze=t.jsxs(d.Table,{className:ne,maxHeight:le,children:[t.jsxs(d.TableHeader,{children:[A&&A.length>0&&t.jsxs(d.TableRow,{children:[P&&t.jsx(d.TableHead,{className:"!p-0 bg-[#eaedf1] dark:bg-slate-800 border-b-0",rowSpan:2,style:{width:`${C}px`,minWidth:`${C}px`,...T&&{position:"sticky",left:0,zIndex:20}}}),N&&t.jsx(d.TableHead,{className:"!p-0 bg-[#eaedf1] dark:bg-slate-800 border-b-0",rowSpan:2,style:{width:`${j}px`,minWidth:`${j}px`,...T&&{position:"sticky",left:P?C:0,zIndex:20}},children:t.jsx("div",{className:"flex items-center justify-center h-9",children:t.jsx(ge.Checkbox,{checked:de,indeterminate:Re,onCheckedChange:_e,"aria-label":"전체 선택"})})}),x&&t.jsx(d.TableHead,{className:"bg-[#eaedf1] dark:bg-slate-800 border-b-0",rowSpan:2,style:{width:`${$}px`,minWidth:`${$}px`,...T&&{position:"sticky",left:xe(),zIndex:20}}}),(()=>{const e=new Set(A.flatMap(c=>c.columns)),s=[];let i=0;for(;i<z.length;){const c=z[i],a=A.find(n=>n.columns.includes(c.accessorKey));if(a){const n=z.find(S=>a.columns.includes(S.accessorKey));if((n==null?void 0:n.accessorKey)===c.accessorKey){const S=kt(a);s.push(t.jsx(d.TableHead,{colSpan:S,className:v.cn("text-center font-medium bg-[#eaedf1] dark:bg-slate-800",a.align==="left"&&"text-left",a.align==="right"&&"text-right"),children:a.header},`group-${String(a.columns[0])}`))}}else if(!e.has(c.accessorKey)){const n=pe(c,!0);s.push(t.jsx(d.TableHead,{rowSpan:2,className:v.cn(O(c.align),"bg-[#eaedf1] dark:bg-slate-800 border-b-0",n.className),style:n.style,children:c.header},`standalone-${String(c.accessorKey)}`))}i++}return s})()]}),t.jsxs(d.TableRow,{children:[!A&&P&&t.jsx(d.TableHead,{className:"!p-0 bg-[#eaedf1] dark:bg-slate-800",style:T?{position:"sticky",left:vt(),zIndex:20,width:`${C}px`,minWidth:`${C}px`,maxWidth:`${C}px`}:{width:`${C}px`,minWidth:`${C}px`,maxWidth:`${C}px`},"aria-label":"순서 변경",children:t.jsx("span",{className:"sr-only",children:"순서 변경"})}),!A&&N&&t.jsx(d.TableHead,{className:"!p-0 bg-[#eaedf1] dark:bg-slate-800",style:T?{position:"sticky",left:Te(),zIndex:20,width:`${j}px`,minWidth:`${j}px`,maxWidth:`${j}px`}:{width:`${j}px`,minWidth:`${j}px`,maxWidth:`${j}px`},children:t.jsx("div",{className:"flex items-center justify-center h-9",children:t.jsx(ge.Checkbox,{checked:de,indeterminate:Re,onCheckedChange:_e,"aria-label":"전체 선택"})})}),!A&&x&&t.jsx(d.TableHead,{className:"bg-[#eaedf1] dark:bg-slate-800",style:T?{position:"sticky",left:xe(),zIndex:20,width:`${$}px`,minWidth:`${$}px`,maxWidth:`${$}px`}:{width:`${$}px`,minWidth:`${$}px`,maxWidth:`${$}px`},"aria-label":"확장",children:t.jsx("span",{className:"sr-only",children:"확장"})}),A?B?t.jsx(q.SortableContext,{items:Ue,strategy:q.horizontalListSortingStrategy,children:z.filter(e=>Ye.has(e.accessorKey)).map(ue)}):z.filter(e=>Ye.has(e.accessorKey)).map(ue):B?t.jsx(q.SortableContext,{items:Ue,strategy:q.horizontalListSortingStrategy,children:z.map(ue)}):z.map(ue)]})]}),t.jsx(d.TableBody,{children:lt?t.jsx(d.TableRow,{className:"hover:bg-white dark:hover:bg-slate-900",children:t.jsx(d.TableCell,{colSpan:fe,className:"h-80 text-center",children:ct??t.jsx("div",{className:"flex items-center justify-center",children:t.jsx($t.STLArrowIcon,{size:200,className:"text-slate-200 dark:text-slate-700"})})})}):o.length===0?t.jsx(d.TableRow,{className:"hover:bg-white dark:hover:bg-slate-900",children:t.jsx(d.TableCell,{colSpan:fe,className:"h-24 text-center text-slate-500",children:ee})}):P?t.jsx(q.SortableContext,{items:mt,strategy:q.verticalListSortingStrategy,children:o.map((e,s)=>{const i=E.includes(e.id),c=Ve(e),a=Ne(e.id),n=`row-${e.id}`,S=p=>t.jsxs(t.Fragment,{children:[t.jsx(rt,{isSelected:i,hasLeftStickyColumns:T,dragHandleProps:p}),N&&t.jsx(d.TableCell,{onClick:r=>r.stopPropagation(),className:v.cn("!p-0",T&&(i?"transition-colors bg-blue-50 dark:bg-blue-900":"transition-colors bg-slate-100 dark:bg-slate-800")),style:T?{position:"sticky",left:Te(),zIndex:10,width:`${j}px`,minWidth:`${j}px`,maxWidth:`${j}px`}:{width:`${j}px`,minWidth:`${j}px`,maxWidth:`${j}px`},children:t.jsx("div",{className:"flex items-center justify-center h-9",children:t.jsx(ge.Checkbox,{checked:i,onCheckedChange:()=>Ae(e.id),"aria-label":`행 ${e.id} 선택`})})}),x&&t.jsx(d.TableCell,{className:v.cn("p-0",T&&(i?"transition-colors bg-blue-50 dark:bg-blue-900":"transition-colors bg-slate-100 dark:bg-slate-800")),style:T?{position:"sticky",left:xe(),zIndex:10,width:`${$}px`,minWidth:`${$}px`,maxWidth:`${$}px`}:{width:`${$}px`,minWidth:`${$}px`,maxWidth:`${$}px`},onClick:r=>r.stopPropagation(),children:c&&t.jsx("button",{type:"button",onClick:()=>Be(e.id),className:"flex h-9 w-10 items-center justify-center text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors","aria-label":a?"행 접기":"행 펼치기","aria-expanded":a,children:a?t.jsx(Ge.DownIcon,{size:24}):t.jsx(et.RightIcon,{size:24})})}),z.map(r=>{const l=Xe(s,r.accessorKey);if(l===0)return null;const L=e[r.accessorKey],U=Oe(e.id,r.accessorKey),u=l!==void 0&&l>1,y=u&&Je(s,l),W=u&&Qe(s,l),w=pe(r,!1,i,u?W:void 0),Y=m=>typeof m=="number"?`${m}px`:m,H={};if(!r.sticky){const m=V?ae(r):void 0;m!==void 0?(H.width=`${m}px`,H.minWidth=`${m}px`):(r.width&&(H.width=Y(r.width)),r.minWidth&&(H.minWidth=Y(r.minWidth)))}const F={...H,...w.style};if(U&&r.editable){const m=r.editComponent||st;return t.jsx(d.TableCell,{ref:ke,className:v.cn(O(r.align),"p-1 overflow-hidden",w.className),style:F,onClick:M=>M.stopPropagation(),rowSpan:u?l:void 0,children:t.jsx(m,{value:we,onChange:M=>{te(M),J.current=M,b!=null&&b.error&&X({...b,error:void 0})},onComplete:()=>qe(r,e),onCancel:he,row:e,error:b==null?void 0:b.error})},String(r.accessorKey))}const re=r.cell?r.cell(L,e):String(L??"");if(r.editable&&R)return t.jsx(d.TableCell,{className:v.cn(O(r.align),"group/edit cursor-text hover:bg-blue-100 dark:hover:bg-blue-800",u&&"align-middle",w.className),style:F,onClick:m=>{m.stopPropagation(),setTimeout(()=>Pe(e.id,r.accessorKey,L),0)},rowSpan:u?l:void 0,children:t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"flex-1",children:re}),t.jsx(tt.WriteIcon,{size:14,className:"flex-shrink-0 opacity-0 group-hover/edit:opacity-100 transition-opacity text-blue-500 dark:text-blue-300"})]})},String(r.accessorKey));const Z=u&&s+l>=o.length;return t.jsx(d.TableCell,{className:v.cn(O(r.align),u&&"align-middle transition-colors",u&&!Z&&"border-b border-slate-200 dark:border-slate-700",u&&W&&"bg-blue-50 dark:bg-blue-900",u&&!W&&y&&"bg-slate-100 dark:bg-slate-800",w.className),style:F,rowSpan:u?l:void 0,children:re},String(r.accessorKey))})]});return t.jsxs(h.Fragment,{children:[t.jsx(it,{id:n,isSelected:i,className:v.cn(f&&"cursor-pointer",_==null?void 0:_(e)),onClick:()=>f==null?void 0:f(e),onMouseEnter:K?()=>se(s):void 0,onMouseLeave:K?()=>se(null):void 0,children:p=>S(p)}),x&&a&&t.jsx(d.TableRow,{className:"bg-white dark:bg-slate-800/50 hover:bg-white dark:hover:bg-slate-800/50",children:t.jsx(d.TableCell,{colSpan:fe,className:"p-0",style:{position:"relative"},children:t.jsx("div",{className:"p-4 overflow-x-auto",style:{position:"sticky",left:0,width:"100%",maxWidth:"100vw"},children:x.expandedRowRender(e)})})})]},e.id)})}):o.map((e,s)=>{const i=E.includes(e.id),c=Ve(e),a=Ne(e.id),n=`row-${e.id}`,S=p=>t.jsxs(t.Fragment,{children:[P&&t.jsx(rt,{isSelected:i,hasLeftStickyColumns:T,dragHandleProps:p}),N&&t.jsx(d.TableCell,{onClick:r=>r.stopPropagation(),className:v.cn("!p-0",T&&(i?"transition-colors bg-blue-50 dark:bg-blue-900":"transition-colors bg-slate-100 dark:bg-slate-800")),style:T?{position:"sticky",left:Te(),zIndex:10,width:`${j}px`,minWidth:`${j}px`,maxWidth:`${j}px`}:{width:`${j}px`,minWidth:`${j}px`,maxWidth:`${j}px`},children:t.jsx("div",{className:"flex items-center justify-center h-9",children:t.jsx(ge.Checkbox,{checked:i,onCheckedChange:()=>Ae(e.id),"aria-label":`행 ${e.id} 선택`})})}),x&&t.jsx(d.TableCell,{className:v.cn("p-0",T&&(i?"transition-colors bg-blue-50 dark:bg-blue-900":"transition-colors bg-slate-100 dark:bg-slate-800")),style:T?{position:"sticky",left:xe(),zIndex:10,width:`${$}px`,minWidth:`${$}px`,maxWidth:`${$}px`}:{width:`${$}px`,minWidth:`${$}px`,maxWidth:`${$}px`},onClick:r=>r.stopPropagation(),children:c&&t.jsx("button",{type:"button",onClick:()=>Be(e.id),className:"flex h-9 w-10 items-center justify-center text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors","aria-label":a?"행 접기":"행 펼치기","aria-expanded":a,children:a?t.jsx(Ge.DownIcon,{size:24}):t.jsx(et.RightIcon,{size:24})})}),z.map(r=>{const l=Xe(s,r.accessorKey);if(l===0)return null;const L=e[r.accessorKey],U=Oe(e.id,r.accessorKey),u=l!==void 0&&l>1,y=u&&Je(s,l),W=u&&Qe(s,l),w=pe(r,!1,i,u?W:void 0),Y=m=>typeof m=="number"?`${m}px`:m,H={};if(!r.sticky){const m=V?ae(r):void 0;m!==void 0?(H.width=`${m}px`,H.minWidth=`${m}px`):(r.width&&(H.width=Y(r.width)),r.minWidth&&(H.minWidth=Y(r.minWidth)))}const F={...H,...w.style};if(U&&r.editable){const m=r.editComponent||st;return t.jsx(d.TableCell,{ref:ke,className:v.cn(O(r.align),"p-1 overflow-hidden",w.className),style:F,onClick:M=>M.stopPropagation(),rowSpan:u?l:void 0,children:t.jsx(m,{value:we,onChange:M=>{te(M),J.current=M,b!=null&&b.error&&X({...b,error:void 0})},onComplete:()=>qe(r,e),onCancel:he,row:e,error:b==null?void 0:b.error})},String(r.accessorKey))}const re=r.cell?r.cell(L,e):String(L??"");if(r.editable&&R)return t.jsx(d.TableCell,{className:v.cn(O(r.align),"group/edit cursor-text hover:bg-blue-100 dark:hover:bg-blue-800",u&&"align-middle",w.className),style:F,onClick:m=>{m.stopPropagation(),setTimeout(()=>{Pe(e.id,r.accessorKey,L)},0)},rowSpan:u?l:void 0,children:t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"flex-1",children:re}),t.jsx(tt.WriteIcon,{size:20,className:"flex-shrink-0 opacity-0 group-hover/edit:opacity-100 transition-opacity text-blue-500 dark:text-blue-300"})]})},String(r.accessorKey));const Z=u&&s+l>=o.length;return t.jsx(d.TableCell,{className:v.cn(O(r.align),u&&"align-middle transition-colors",u&&!Z&&"border-b border-slate-200 dark:border-slate-700",u&&W&&"bg-blue-50 dark:bg-blue-900",u&&!W&&y&&"bg-slate-100 dark:bg-slate-800",w.className),style:F,rowSpan:u?l:void 0,children:re},String(r.accessorKey))})]});return t.jsxs(h.Fragment,{children:[P?t.jsx(it,{id:n,isSelected:i,className:v.cn(f&&"cursor-pointer",_==null?void 0:_(e)),onClick:()=>f==null?void 0:f(e),onMouseEnter:K?()=>se(s):void 0,onMouseLeave:K?()=>se(null):void 0,children:p=>S(p)}):t.jsx(d.TableRow,{"data-state":i?"selected":void 0,className:v.cn(f&&"cursor-pointer",($e==null?void 0:$e.has(s))&&"border-b-0",_==null?void 0:_(e)),onClick:()=>f==null?void 0:f(e),onMouseEnter:K?()=>se(s):void 0,onMouseLeave:K?()=>se(null):void 0,children:S()}),x&&a&&t.jsx(d.TableRow,{className:"bg-white dark:bg-slate-800/50 hover:bg-white dark:hover:bg-slate-800/50",children:t.jsx(d.TableCell,{colSpan:fe,className:"p-0",style:{position:"relative"},children:t.jsx("div",{className:"p-4 overflow-x-auto",style:{position:"sticky",left:0,width:"100%",maxWidth:"100vw"},children:x.expandedRowRender(e)})})})]},e.id)})})]});return B||P?t.jsx(G.DndContext,{sensors:ut,collisionDetection:G.closestCenter,onDragEnd:xt,children:Ze}):Ze}exports.DataTable=Tt;
//# sourceMappingURL=data-table.cjs.map
