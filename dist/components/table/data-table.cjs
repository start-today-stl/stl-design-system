"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const t=require("react/jsx-runtime"),$t=require("react"),ee=require("@dnd-kit/core"),O=require("@dnd-kit/sortable"),ct=require("@dnd-kit/utilities"),v=require("../../lib/utils.cjs"),d=require("./table.cjs"),ye=require("../ui/checkbox.cjs"),wt=require("../ui/input.cjs"),me=require("../ui/skeleton.cjs"),Dt=require("../ui/splash-screen.cjs"),st=require("../../icons/DownIcon.cjs"),ot=require("../../icons/DragHandleIcon.cjs"),rt=require("../../icons/RightIcon.cjs"),nt=require("../../icons/WriteIcon.cjs");function Et(g){const o=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(g){for(const S in g)if(S!=="default"){const D=Object.getOwnPropertyDescriptor(g,S);Object.defineProperty(o,S,D.get?D:{enumerable:!0,get:()=>g[S]})}}return o.default=g,Object.freeze(o)}const h=Et($t);function it({value:g,onChange:o,onComplete:S,onCancel:D,error:j}){const w=h.useRef(null);h.useEffect(()=>{var p,L;(p=w.current)==null||p.focus(),(L=w.current)==null||L.select()},[]);const I=p=>{p.key==="Enter"?(p.preventDefault(),S()):p.key==="Escape"&&(p.preventDefault(),D())};return t.jsxs("div",{className:"flex flex-col gap-0.5",children:[t.jsx(wt.Input,{ref:w,value:String(g??""),onChange:p=>o(p.target.value),onKeyDown:I,error:!!j,tableMode:!0,className:"w-full px-2 text-xs"}),j&&t.jsx("span",{className:"text-[10px] text-destructive dark:text-red-400",children:j})]})}function Tt({id:g,children:o,className:S,style:D,disabled:j}){const{attributes:w,listeners:I,setNodeRef:p,transform:L,transition:u,isDragging:te}=O.useSortable({id:g,disabled:j}),ae={...D,transform:ct.CSS.Transform.toString(L),transition:u,opacity:te?.5:1,cursor:j?void 0:"grab"};return t.jsx("th",{ref:p,style:ae,className:v.cn("group/drag h-9 pl-1.5 pr-1.5 py-1.5 text-left align-middle font-medium text-[#798698] dark:text-slate-300","bg-[#eaedf1] dark:bg-slate-800","[&:has([role=checkbox])]:pr-0","hover:bg-slate-200/70 dark:hover:bg-slate-700/70","transition-colors",te&&"z-50",S),...w,...I,children:t.jsxs("span",{className:"flex items-center gap-0.5",children:[t.jsx(ot.DragHandleIcon,{size:16,className:"opacity-30 group-hover/drag:opacity-70 transition-opacity flex-shrink-0"}),o]})})}function at({id:g,children:o,className:S,isSelected:D,onClick:j,onMouseEnter:w,onMouseLeave:I}){const{setNodeRef:p,setActivatorNodeRef:L,listeners:u,attributes:te,transform:ae,transition:P,isDragging:X}=O.useSortable({id:g}),V={transform:ct.CSS.Transform.toString(ae),transition:P,opacity:X?.5:1};return t.jsx("tr",{ref:p,style:V,"data-state":D?"selected":void 0,className:v.cn("group border-b border-slate-200 dark:border-slate-700 transition-colors","bg-white dark:bg-slate-900 hover:bg-slate-100 dark:hover:bg-slate-800","data-[state=selected]:bg-blue-50 dark:data-[state=selected]:bg-blue-900",X&&"z-50 shadow-lg",S),onClick:j,onMouseEnter:w,onMouseLeave:I,children:typeof o=="function"?o({listeners:u,attributes:te,setActivatorNodeRef:L}):o})}function lt({isSelected:g,hasLeftStickyColumns:o,dragHandleProps:S}){const{listeners:j,attributes:w,setActivatorNodeRef:I}=S??{};return t.jsx("td",{className:v.cn("p-0 align-middle",o&&(g?"transition-colors bg-blue-50 dark:bg-blue-900":"transition-colors bg-slate-100 dark:bg-slate-800")),style:o?{position:"sticky",left:0,zIndex:10,width:"32px",minWidth:"32px",maxWidth:"32px"}:{width:"32px",minWidth:"32px",maxWidth:"32px"},children:t.jsx("div",{ref:I,className:"flex h-9 w-8 items-center justify-center cursor-grab text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors",onClick:p=>p.stopPropagation(),"aria-label":"행 순서 변경",...j,...w,children:t.jsx(ot.DragHandleIcon,{size:16})})})}function Kt({columns:g,data:o,selectable:S=!1,selectedIds:D=[],onSelectionChange:j,sortState:w,onSortChange:I,onRowClick:p,onCellChange:L,expandable:u,emptyMessage:te="데이터가 없습니다.",className:ae,rowClassName:P,maxHeight:X,resizable:V=!1,columnWidths:ce,onColumnResize:ke,columnReorderable:B=!1,columnOrder:ve,onColumnReorder:je,rowReorderable:Se=!1,onRowReorder:oe,loading:dt=!1,loadingMode:de="splash",loadingContent:he,headerGroups:A,rowGrouping:K}){const z=K?!1:Se;h.useEffect(()=>{K&&Se&&console.warn("[DataTable] rowGrouping과 rowReorderable은 함께 사용할 수 없습니다. rowSpan 셀이 있는 행을 드래그하면 레이아웃이 깨지므로 rowReorderable이 무시됩니다.")},[K,Se]),h.useEffect(()=>{he&&de!=="splash"&&console.warn("[DataTable] loadingContent와 loadingMode가 함께 전달되었습니다. loadingContent가 우선 적용됩니다.")},[he,de]);const[b,J]=h.useState(null),[He,se]=h.useState(null),Q=h.useRef(null),We=h.useRef(null),[ht,ft]=h.useState((u==null?void 0:u.defaultExpandedRowIds)??[]),[Ne,pt]=h.useState({}),[U,Ce]=h.useState(null),ze=h.useRef(0),Me=h.useRef(0),[ut,Re]=h.useState(()=>g.map(e=>e.accessorKey)),[$e,re]=h.useState(null);h.useEffect(()=>{!B||ve||Re(e=>{const s=g.map(i=>i.accessorKey),r=e.filter(i=>s.includes(i)),l=s.filter(i=>!r.includes(i)),a=[...r,...l];return a.length===e.length&&a.every((i,k)=>i===e[k])?e:a})},[g,B,ve]);const ne=ve??ut,xt=h.useMemo(()=>B?ne.map(e=>g.find(s=>s.accessorKey===e)).filter(e=>e!==void 0):g,[g,ne,B]),gt=ee.useSensors(ee.useSensor(ee.PointerSensor,{activationConstraint:{distance:5}}),ee.useSensor(ee.KeyboardSensor,{coordinateGetter:O.sortableKeyboardCoordinates})),_e=h.useCallback(e=>{const{active:s,over:r}=e;if(!r||s.id===r.id)return;const l=ne.findIndex(k=>String(k)===s.id),a=ne.findIndex(k=>String(k)===r.id);if(l===-1||a===-1)return;const i=O.arrayMove(ne,l,a);je?je(i):Re(i)},[ne,je]),Le=h.useCallback(e=>{const{active:s,over:r}=e;if(!r||s.id===r.id)return;const l=String(s.id).replace(/^row-/,""),a=String(r.id).replace(/^row-/,""),i=o.findIndex(n=>String(n.id)===l),k=o.findIndex(n=>String(n.id)===a);if(i===-1||k===-1)return;const f=O.arrayMove(o,i,k);oe==null||oe(f)},[o,oe]),bt=h.useCallback(e=>{const{active:s}=e;String(s.id).startsWith("row-")?Le(e):_e(e)},[_e,Le]),we=(u==null?void 0:u.expandedRowIds)??ht,Pe=(u==null?void 0:u.onExpandedChange)??ft,fe=o.length>0&&D.length===o.length,Ae=D.length>0&&!fe,Oe=()=>{fe?j==null||j([]):j==null||j(o.map(e=>e.id))},qe=e=>{D.includes(e)?j==null||j(D.filter(s=>s!==e)):j==null||j([...D,e])},yt=e=>{I&&((w==null?void 0:w.column)===e?w.direction==="asc"?I({column:e,direction:"desc"}):w.direction==="desc"?I({column:null,direction:null}):I({column:e,direction:"asc"}):I({column:e,direction:"asc"}))},mt=e=>(w==null?void 0:w.column)===e?w.direction:null,q=e=>{switch(e){case"center":return"text-center";case"right":return"text-right";default:return"text-left"}},Ve=(e,s,r)=>{J({rowId:e,columnKey:s}),se(r),Q.current=r},Be=(e,s)=>{const r=Q.current;if(!b||r===null){J(null),se(null),Q.current=null;return}if(e.validate){const l=e.validate(r,s);if(l!==!0){J({...b,error:l});return}}L&&L(b.rowId,b.columnKey,r),J(null),se(null),Q.current=null},pe=h.useCallback(()=>{J(null),se(null),Q.current=null},[]);h.useEffect(()=>{if(!b)return;const e=s=>{var a,i;const r=s.target;(a=We.current)!=null&&a.contains(r)||(i=r.closest)!=null&&i.call(r,"[data-radix-popper-content-wrapper]")||pe()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[b,pe]);const Fe=(e,s)=>(b==null?void 0:b.rowId)===e&&(b==null?void 0:b.columnKey)===s,Xe=e=>u?u.rowExpandable?u.rowExpandable(e):!0:!1,De=e=>we.includes(e),Je=e=>{De(e)?Pe(we.filter(s=>s!==e)):Pe([...we,e])},ue=g.length+(S?1:0)+(u?1:0)+(z?1:0),{rowSpanMap:Qe,middleRowSet:Ee}=h.useMemo(()=>{if(!K)return{rowSpanMap:null,middleRowSet:null};const e=Array.isArray(K.groupBy)?K.groupBy:[K.groupBy],s=K.mergeColumns??e,r=new Map,l=new Set;for(const a of s){let i=0;for(;i<o.length;){const k=e.map(c=>o[i][c]),f=o[i][a];let n=1;for(let c=i+1;c<o.length;c++){const R=e.map(N=>o[c][N]),Y=o[c][a];if(k.every((N,T)=>N===R[T])&&f===Y)n++;else break}r.has(i)||r.set(i,new Map),r.get(i).set(a,n);for(let c=i;c<i+n-1;c++)l.add(c);for(let c=i+1;c<i+n;c++)r.has(c)||r.set(c,new Map),r.get(c).set(a,0);i+=n}}return{rowSpanMap:r,middleRowSet:l}},[o,K]),Ue=(e,s)=>{if(!Qe)return;const r=Qe.get(e);return r?r.get(s):void 0},Ye=(e,s)=>$e===null?!1:$e>=e&&$e<e+s,Ze=(e,s)=>{for(let r=e;r<e+s;r++)if(r<o.length&&D.includes(o[r].id))return!0;return!1},W=40,$=40,M=32,xe=h.useMemo(()=>{const e=y=>{const N=y.width??y.minWidth;if(typeof N=="number")return N;const T=parseInt(String(N),10);return Number.isFinite(T)?T:150},s=g.filter(y=>y.sticky==="left"),r=g.filter(y=>y.sticky==="right"),l=z?M:0,a=S?W:0,i=u?$:0,k=l+a+i,f=new Map;let n=k;for(const y of s)f.set(y.accessorKey,n),n+=e(y);const c=new Map;let R=0;for(let y=r.length-1;y>=0;y--){const N=r[y];c.set(N.accessorKey,R),R+=e(N)}const Y=s.length>0?s[s.length-1].accessorKey:null,x=r.length>0?r[0].accessorKey:null;return(y,N,T,Z)=>{if(!y.sticky)return{style:{},className:""};const C=y.accessorKey===Y,F=y.accessorKey===x,G=`${e(y)}px`,m={position:"sticky",zIndex:N?20:10,width:G,minWidth:G,maxWidth:G},_=Z??T;if(y.sticky==="left"){const Nt=f.get(y.accessorKey)??0;return{style:{...m,left:`${Nt}px`},className:v.cn("transition-colors",N?"bg-[#eaedf1] dark:bg-slate-800":_?"bg-blue-50 dark:bg-blue-900":"bg-slate-100 dark:bg-slate-800",C&&"shadow-[2px_0_4px_rgba(0,0,0,0.08)]")}}const Wt=c.get(y.accessorKey)??0;return{style:{...m,right:`${Wt}px`},className:v.cn("transition-colors",N?"bg-[#eaedf1] dark:bg-slate-800":_?"bg-blue-50 dark:bg-blue-900":"bg-slate-100 dark:bg-slate-800",F&&"shadow-[-2px_0_4px_rgba(0,0,0,0.08)]")}}},[g,S,u]),E=g.some(e=>e.sticky==="left"),le=h.useCallback(e=>{const s=String(e.accessorKey);if(ce&&s in ce)return ce[s];if(s in Ne)return Ne[s];if(e.width)return typeof e.width=="number"?e.width:parseInt(e.width,10)},[ce,Ne]),kt=h.useCallback((e,s)=>{e.preventDefault(),e.stopPropagation(),Ce(s.accessorKey),ze.current=e.clientX;const r=le(s)??150;Me.current=r},[le]),Te=h.useCallback(e=>{if(!U)return;const s=e.clientX-ze.current,r=Math.max(50,Me.current+s),l=String(U);ke?ke(U,r):pt(a=>({...a,[l]:r}))},[U,ke]),Ke=h.useCallback(()=>{Ce(null)},[]);h.useEffect(()=>{if(U)return document.addEventListener("mousemove",Te),document.addEventListener("mouseup",Ke),document.body.style.userSelect="none",document.body.style.cursor="col-resize",()=>{document.removeEventListener("mousemove",Te),document.removeEventListener("mouseup",Ke),document.body.style.userSelect="",document.body.style.cursor=""}},[U,Te,Ke]);const ge=e=>{const s=xe(e,!0),r=f=>typeof f=="number"?`${f}px`:f,l={};if(!e.sticky){const f=V?le(e):void 0;f!==void 0?(l.width=`${f}px`,l.minWidth=`${f}px`):(e.width&&(l.width=r(e.width)),e.minWidth&&(l.minWidth=r(e.minWidth)))}const a={...l,...s.style},i=V&&t.jsx("div",{className:v.cn("absolute top-0 h-full w-[9px] cursor-col-resize opacity-0 hover:opacity-100 transition-opacity z-30",U===e.accessorKey&&"opacity-100"),style:{right:"-4px",background:"linear-gradient(to right, transparent, rgba(148,163,184,0.5) 50%, transparent)"},onMouseDown:f=>kt(f,e),onPointerDown:f=>f.stopPropagation(),onClick:f=>f.stopPropagation()});return B&&!e.sticky&&!e.sortable?t.jsxs(Tt,{id:String(e.accessorKey),style:a,className:v.cn(q(e.align),s.className,V&&"relative overflow-visible"),children:[e.header,i]},String(e.accessorKey)):e.sortable?t.jsxs(d.TableSortableHead,{sortDirection:mt(e.accessorKey),onSort:()=>yt(e.accessorKey),style:a,className:v.cn(q(e.align),s.className,V&&"relative overflow-visible"),children:[e.header,i]},String(e.accessorKey)):t.jsxs(d.TableHead,{style:a,className:v.cn(q(e.align),s.className,V&&"relative overflow-visible"),children:[e.header,i]},String(e.accessorKey))},H=B?xt:g,Ge=H.filter(e=>!e.sticky).map(e=>String(e.accessorKey)),vt=o.map(e=>`row-${e.id}`),jt=()=>0,Ie=()=>z?M:0,be=()=>{let e=0;return z&&(e+=M),S&&(e+=W),e},St=h.useCallback(e=>H.filter(s=>e.columns.includes(s.accessorKey)).length,[H]),et=h.useMemo(()=>A?new Set(A.flatMap(e=>e.columns)):new Set,[A]),tt=t.jsxs(d.Table,{className:ae,maxHeight:X,children:[t.jsxs(d.TableHeader,{children:[A&&A.length>0&&t.jsxs(d.TableRow,{children:[z&&t.jsx(d.TableHead,{className:"!p-0 bg-[#eaedf1] dark:bg-slate-800 border-b-0",rowSpan:2,style:{width:`${M}px`,minWidth:`${M}px`,...E&&{position:"sticky",left:0,zIndex:20}}}),S&&t.jsx(d.TableHead,{className:"!p-0 bg-[#eaedf1] dark:bg-slate-800 border-b-0",rowSpan:2,style:{width:`${W}px`,minWidth:`${W}px`,...E&&{position:"sticky",left:z?M:0,zIndex:20}},children:t.jsx("div",{className:"flex items-center justify-center h-9",children:t.jsx(ye.Checkbox,{checked:fe,indeterminate:Ae,onCheckedChange:Oe,"aria-label":"전체 선택"})})}),u&&t.jsx(d.TableHead,{className:"bg-[#eaedf1] dark:bg-slate-800 border-b-0",rowSpan:2,style:{width:`${$}px`,minWidth:`${$}px`,...E&&{position:"sticky",left:be(),zIndex:20}}}),(()=>{const e=new Set(A.flatMap(l=>l.columns)),s=[];let r=0;for(;r<H.length;){const l=H[r],a=A.find(i=>i.columns.includes(l.accessorKey));if(a){const i=H.find(k=>a.columns.includes(k.accessorKey));if((i==null?void 0:i.accessorKey)===l.accessorKey){const k=St(a);s.push(t.jsx(d.TableHead,{colSpan:k,className:v.cn("text-center font-medium bg-[#eaedf1] dark:bg-slate-800",a.align==="left"&&"text-left",a.align==="right"&&"text-right"),children:a.header},`group-${String(a.columns[0])}`))}}else if(!e.has(l.accessorKey)){const i=xe(l,!0);s.push(t.jsx(d.TableHead,{rowSpan:2,className:v.cn(q(l.align),"bg-[#eaedf1] dark:bg-slate-800 border-b-0",i.className),style:i.style,children:l.header},`standalone-${String(l.accessorKey)}`))}r++}return s})()]}),t.jsxs(d.TableRow,{children:[!A&&z&&t.jsx(d.TableHead,{className:"!p-0 bg-[#eaedf1] dark:bg-slate-800",style:E?{position:"sticky",left:jt(),zIndex:20,width:`${M}px`,minWidth:`${M}px`,maxWidth:`${M}px`}:{width:`${M}px`,minWidth:`${M}px`,maxWidth:`${M}px`},"aria-label":"순서 변경",children:t.jsx("span",{className:"sr-only",children:"순서 변경"})}),!A&&S&&t.jsx(d.TableHead,{className:"!p-0 bg-[#eaedf1] dark:bg-slate-800",style:E?{position:"sticky",left:Ie(),zIndex:20,width:`${W}px`,minWidth:`${W}px`,maxWidth:`${W}px`}:{width:`${W}px`,minWidth:`${W}px`,maxWidth:`${W}px`},children:t.jsx("div",{className:"flex items-center justify-center h-9",children:t.jsx(ye.Checkbox,{checked:fe,indeterminate:Ae,onCheckedChange:Oe,"aria-label":"전체 선택"})})}),!A&&u&&t.jsx(d.TableHead,{className:"bg-[#eaedf1] dark:bg-slate-800",style:E?{position:"sticky",left:be(),zIndex:20,width:`${$}px`,minWidth:`${$}px`,maxWidth:`${$}px`}:{width:`${$}px`,minWidth:`${$}px`,maxWidth:`${$}px`},"aria-label":"확장",children:t.jsx("span",{className:"sr-only",children:"확장"})}),A?B?t.jsx(O.SortableContext,{items:Ge,strategy:O.horizontalListSortingStrategy,children:H.filter(e=>et.has(e.accessorKey)).map(ge)}):H.filter(e=>et.has(e.accessorKey)).map(ge):B?t.jsx(O.SortableContext,{items:Ge,strategy:O.horizontalListSortingStrategy,children:H.map(ge)}):H.map(ge)]})]}),t.jsx(d.TableBody,{children:dt?t.jsx(d.TableRow,{className:"hover:bg-white dark:hover:bg-slate-900",children:t.jsx(d.TableCell,{colSpan:ue,className:v.cn("text-center",he||de!=="skeleton"?"h-80":"p-0 align-top"),children:he??(de==="skeleton"?(()=>{const s=typeof X=="number"?X:typeof X=="string"&&parseInt(X,10)||320,r=Math.max(1,Math.floor(s/41));return t.jsx("table",{className:"w-full",children:t.jsx("tbody",{children:Array.from({length:r}).map((l,a)=>t.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700 last:border-b-0",children:[z&&t.jsx("td",{className:"w-8 p-2",children:t.jsx(me.Skeleton,{width:16,height:16})}),S&&t.jsx("td",{className:"w-10 p-2",children:t.jsx(me.Skeleton,{width:18,height:18})}),u&&t.jsx("td",{className:"w-10 p-2",children:t.jsx(me.Skeleton,{width:18,height:18})}),H.map(i=>{const k=i.width??i.minWidth,f=typeof k=="number"?Math.min(k*.6,150):100;return t.jsx("td",{className:"p-2",children:t.jsx(me.Skeleton,{height:16,width:f})},String(i.accessorKey))})]},a))})})})():t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsx(Dt.SplashScreen,{size:"lg"})}))})}):o.length===0?t.jsx(d.TableRow,{className:"hover:bg-white dark:hover:bg-slate-900",children:t.jsx(d.TableCell,{colSpan:ue,className:"h-24 text-center text-slate-500",children:te})}):z?t.jsx(O.SortableContext,{items:vt,strategy:O.verticalListSortingStrategy,children:o.map((e,s)=>{const r=D.includes(e.id),l=Xe(e),a=De(e.id),i=`row-${e.id}`,k=f=>t.jsxs(t.Fragment,{children:[t.jsx(lt,{isSelected:r,hasLeftStickyColumns:E,dragHandleProps:f}),S&&t.jsx(d.TableCell,{onClick:n=>n.stopPropagation(),className:v.cn("!p-0",E&&(r?"transition-colors bg-blue-50 dark:bg-blue-900":"transition-colors bg-slate-100 dark:bg-slate-800")),style:E?{position:"sticky",left:Ie(),zIndex:10,width:`${W}px`,minWidth:`${W}px`,maxWidth:`${W}px`}:{width:`${W}px`,minWidth:`${W}px`,maxWidth:`${W}px`},children:t.jsx("div",{className:"flex items-center justify-center h-9",children:t.jsx(ye.Checkbox,{checked:r,onCheckedChange:()=>qe(e.id),"aria-label":`행 ${e.id} 선택`})})}),u&&t.jsx(d.TableCell,{className:v.cn("p-0",E&&(r?"transition-colors bg-blue-50 dark:bg-blue-900":"transition-colors bg-slate-100 dark:bg-slate-800")),style:E?{position:"sticky",left:be(),zIndex:10,width:`${$}px`,minWidth:`${$}px`,maxWidth:`${$}px`}:{width:`${$}px`,minWidth:`${$}px`,maxWidth:`${$}px`},onClick:n=>n.stopPropagation(),children:l&&t.jsx("button",{type:"button",onClick:()=>Je(e.id),className:"flex h-9 w-10 items-center justify-center text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors","aria-label":a?"행 접기":"행 펼치기","aria-expanded":a,children:a?t.jsx(st.DownIcon,{size:24}):t.jsx(rt.RightIcon,{size:24})})}),H.map(n=>{const c=Ue(s,n.accessorKey);if(c===0)return null;const R=e[n.accessorKey],Y=Fe(e.id,n.accessorKey),x=c!==void 0&&c>1,y=x&&Ye(s,c),N=x&&Ze(s,c),T=xe(n,!1,r,x?N:void 0),Z=m=>typeof m=="number"?`${m}px`:m,C={};if(!n.sticky){const m=V?le(n):void 0;m!==void 0?(C.width=`${m}px`,C.minWidth=`${m}px`):(n.width&&(C.width=Z(n.width)),n.minWidth&&(C.minWidth=Z(n.minWidth)))}const F={...C,...T.style};if(Y&&n.editable){const m=n.editComponent||it;return t.jsx(d.TableCell,{ref:We,className:v.cn(q(n.align),"p-1 overflow-hidden",T.className),style:F,onClick:_=>_.stopPropagation(),rowSpan:x?c:void 0,children:t.jsx(m,{value:He,onChange:_=>{se(_),Q.current=_,b!=null&&b.error&&J({...b,error:void 0})},onComplete:()=>Be(n,e),onCancel:pe,row:e,error:b==null?void 0:b.error})},String(n.accessorKey))}const ie=n.cell?n.cell(R,e):String(R??"");if(n.editable&&L)return t.jsx(d.TableCell,{className:v.cn(q(n.align),"group/edit cursor-text hover:bg-blue-100 dark:hover:bg-blue-800",x&&"align-middle",T.className),style:F,onClick:m=>{m.stopPropagation(),setTimeout(()=>Ve(e.id,n.accessorKey,R),0)},rowSpan:x?c:void 0,children:t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"flex-1",children:ie}),t.jsx(nt.WriteIcon,{size:14,className:"flex-shrink-0 opacity-0 group-hover/edit:opacity-100 transition-opacity text-blue-500 dark:text-blue-300"})]})},String(n.accessorKey));const G=x&&s+c>=o.length;return t.jsx(d.TableCell,{className:v.cn(q(n.align),x&&"align-middle transition-colors",x&&!G&&"border-b border-slate-200 dark:border-slate-700",x&&N&&"bg-blue-50 dark:bg-blue-900",x&&!N&&y&&"bg-slate-100 dark:bg-slate-800",T.className),style:F,rowSpan:x?c:void 0,children:ie},String(n.accessorKey))})]});return t.jsxs(h.Fragment,{children:[t.jsx(at,{id:i,isSelected:r,className:v.cn(p&&"cursor-pointer",P==null?void 0:P(e)),onClick:()=>p==null?void 0:p(e),onMouseEnter:K?()=>re(s):void 0,onMouseLeave:K?()=>re(null):void 0,children:f=>k(f)}),u&&a&&t.jsx(d.TableRow,{className:"bg-white dark:bg-slate-800/50 hover:bg-white dark:hover:bg-slate-800/50",children:t.jsx(d.TableCell,{colSpan:ue,className:"p-0",style:{position:"relative"},children:t.jsx("div",{className:"p-4 overflow-x-auto",style:{position:"sticky",left:0,width:"100%",maxWidth:"100vw"},children:u.expandedRowRender(e)})})})]},e.id)})}):o.map((e,s)=>{const r=D.includes(e.id),l=Xe(e),a=De(e.id),i=`row-${e.id}`,k=f=>t.jsxs(t.Fragment,{children:[z&&t.jsx(lt,{isSelected:r,hasLeftStickyColumns:E,dragHandleProps:f}),S&&t.jsx(d.TableCell,{onClick:n=>n.stopPropagation(),className:v.cn("!p-0",E&&(r?"transition-colors bg-blue-50 dark:bg-blue-900":"transition-colors bg-slate-100 dark:bg-slate-800")),style:E?{position:"sticky",left:Ie(),zIndex:10,width:`${W}px`,minWidth:`${W}px`,maxWidth:`${W}px`}:{width:`${W}px`,minWidth:`${W}px`,maxWidth:`${W}px`},children:t.jsx("div",{className:"flex items-center justify-center h-9",children:t.jsx(ye.Checkbox,{checked:r,onCheckedChange:()=>qe(e.id),"aria-label":`행 ${e.id} 선택`})})}),u&&t.jsx(d.TableCell,{className:v.cn("p-0",E&&(r?"transition-colors bg-blue-50 dark:bg-blue-900":"transition-colors bg-slate-100 dark:bg-slate-800")),style:E?{position:"sticky",left:be(),zIndex:10,width:`${$}px`,minWidth:`${$}px`,maxWidth:`${$}px`}:{width:`${$}px`,minWidth:`${$}px`,maxWidth:`${$}px`},onClick:n=>n.stopPropagation(),children:l&&t.jsx("button",{type:"button",onClick:()=>Je(e.id),className:"flex h-9 w-10 items-center justify-center text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors","aria-label":a?"행 접기":"행 펼치기","aria-expanded":a,children:a?t.jsx(st.DownIcon,{size:24}):t.jsx(rt.RightIcon,{size:24})})}),H.map(n=>{const c=Ue(s,n.accessorKey);if(c===0)return null;const R=e[n.accessorKey],Y=Fe(e.id,n.accessorKey),x=c!==void 0&&c>1,y=x&&Ye(s,c),N=x&&Ze(s,c),T=xe(n,!1,r,x?N:void 0),Z=m=>typeof m=="number"?`${m}px`:m,C={};if(!n.sticky){const m=V?le(n):void 0;m!==void 0?(C.width=`${m}px`,C.minWidth=`${m}px`):(n.width&&(C.width=Z(n.width)),n.minWidth&&(C.minWidth=Z(n.minWidth)))}const F={...C,...T.style};if(Y&&n.editable){const m=n.editComponent||it;return t.jsx(d.TableCell,{ref:We,className:v.cn(q(n.align),"p-1 overflow-hidden",T.className),style:F,onClick:_=>_.stopPropagation(),rowSpan:x?c:void 0,children:t.jsx(m,{value:He,onChange:_=>{se(_),Q.current=_,b!=null&&b.error&&J({...b,error:void 0})},onComplete:()=>Be(n,e),onCancel:pe,row:e,error:b==null?void 0:b.error})},String(n.accessorKey))}const ie=n.cell?n.cell(R,e):String(R??"");if(n.editable&&L)return t.jsx(d.TableCell,{className:v.cn(q(n.align),"group/edit cursor-text hover:bg-blue-100 dark:hover:bg-blue-800",x&&"align-middle",T.className),style:F,onClick:m=>{m.stopPropagation(),setTimeout(()=>{Ve(e.id,n.accessorKey,R)},0)},rowSpan:x?c:void 0,children:t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"flex-1",children:ie}),t.jsx(nt.WriteIcon,{size:20,className:"flex-shrink-0 opacity-0 group-hover/edit:opacity-100 transition-opacity text-blue-500 dark:text-blue-300"})]})},String(n.accessorKey));const G=x&&s+c>=o.length;return t.jsx(d.TableCell,{className:v.cn(q(n.align),x&&"align-middle transition-colors",x&&!G&&"border-b border-slate-200 dark:border-slate-700",x&&N&&"bg-blue-50 dark:bg-blue-900",x&&!N&&y&&"bg-slate-100 dark:bg-slate-800",T.className),style:F,rowSpan:x?c:void 0,children:ie},String(n.accessorKey))})]});return t.jsxs(h.Fragment,{children:[z?t.jsx(at,{id:i,isSelected:r,className:v.cn(p&&"cursor-pointer",P==null?void 0:P(e)),onClick:()=>p==null?void 0:p(e),onMouseEnter:K?()=>re(s):void 0,onMouseLeave:K?()=>re(null):void 0,children:f=>k(f)}):t.jsx(d.TableRow,{"data-state":r?"selected":void 0,className:v.cn(p&&"cursor-pointer",(Ee==null?void 0:Ee.has(s))&&"border-b-0",P==null?void 0:P(e)),onClick:()=>p==null?void 0:p(e),onMouseEnter:K?()=>re(s):void 0,onMouseLeave:K?()=>re(null):void 0,children:k()}),u&&a&&t.jsx(d.TableRow,{className:"bg-white dark:bg-slate-800/50 hover:bg-white dark:hover:bg-slate-800/50",children:t.jsx(d.TableCell,{colSpan:ue,className:"p-0",style:{position:"relative"},children:t.jsx("div",{className:"p-4 overflow-x-auto",style:{position:"sticky",left:0,width:"100%",maxWidth:"100vw"},children:u.expandedRowRender(e)})})})]},e.id)})})]});return B||z?t.jsx(ee.DndContext,{sensors:gt,collisionDetection:ee.closestCenter,onDragEnd:bt,children:tt}):tt}exports.DataTable=Kt;
//# sourceMappingURL=data-table.cjs.map
