{"version":3,"file":"data-table.cjs","sources":["../../../src/components/table/data-table.tsx"],"sourcesContent":["import * as React from \"react\"\nimport {\n  DndContext,\n  closestCenter,\n  KeyboardSensor,\n  PointerSensor,\n  useSensor,\n  useSensors,\n  type DragEndEvent,\n  type DraggableAttributes,\n} from \"@dnd-kit/core\"\nimport {\n  arrayMove,\n  SortableContext,\n  sortableKeyboardCoordinates,\n  horizontalListSortingStrategy,\n  verticalListSortingStrategy,\n  useSortable,\n} from \"@dnd-kit/sortable\"\nimport { CSS } from \"@dnd-kit/utilities\"\n\nimport { cn } from \"@/lib/utils\"\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n  TableSortableHead,\n  type SortDirection,\n} from \"@/components/table/table\"\nimport { Checkbox } from \"@/components/ui/checkbox\"\nimport { Input } from \"@/components/ui/input\"\nimport { RightIcon, DownIcon, DragHandleIcon, WriteIcon, STLArrowIcon } from \"@/icons\"\nimport { Button } from \"@/components/ui/button\"\n\n/** 편집 컴포넌트 Props */\nexport interface EditComponentProps<T, K extends keyof T = keyof T> {\n  /** 현재 값 */\n  value: T[K]\n  /** 값 변경 핸들러 */\n  onChange: (value: T[K]) => void\n  /** 편집 완료 핸들러 (Enter 시 호출 - 검증 후 저장) */\n  onComplete: () => void\n  /** 편집 취소 핸들러 (Escape 또는 blur 시 호출 - 원래 값으로 복원) */\n  onCancel: () => void\n  /** 해당 행 데이터 */\n  row: T\n  /** 검증 에러 메시지 */\n  error?: string\n}\n\n/** 검증 결과 타입 */\nexport type ValidationResult = true | string\n\n/** 컬럼 정의 */\nexport interface DataTableColumn<T> {\n  /** 데이터 접근 키 */\n  accessorKey: keyof T\n  /** 헤더 텍스트 */\n  header: React.ReactNode\n  /** 정렬 가능 여부 */\n  sortable?: boolean\n  /** 컬럼 고정 너비 (sticky 컬럼에 권장) */\n  width?: string | number\n  /** 컬럼 최소 너비 (width 미설정 시 남은 공간을 채움) */\n  minWidth?: string | number\n  /** 셀 정렬 */\n  align?: \"left\" | \"center\" | \"right\"\n  /** 커스텀 셀 렌더러 */\n  cell?: (value: T[keyof T], row: T) => React.ReactNode\n  /** 편집 가능 여부 */\n  editable?: boolean\n  /** 커스텀 편집 컴포넌트 (기본: Input) */\n  editComponent?: (props: EditComponentProps<T>) => React.ReactNode\n  /** 값 검증 함수 (true: 통과, string: 에러 메시지) */\n  validate?: (value: T[keyof T], row: T) => ValidationResult\n  /** 고정 컬럼 (left: 왼쪽 고정, right: 오른쪽 고정) */\n  sticky?: \"left\" | \"right\"\n}\n\n/** 정렬 상태 */\nexport interface SortState<T> {\n  column: keyof T | null\n  direction: SortDirection\n}\n\n/** 확장 가능 행 설정 */\nexport interface ExpandableConfig<T> {\n  /** 확장 영역 렌더링 함수 */\n  expandedRowRender: (row: T) => React.ReactNode\n  /** 행이 확장 가능한지 여부를 결정하는 함수 (기본: 모든 행 확장 가능) */\n  rowExpandable?: (row: T) => boolean\n  /** 기본 확장된 행 ID 배열 */\n  defaultExpandedRowIds?: (string | number)[]\n  /** 확장된 행 ID 배열 (제어 컴포넌트) */\n  expandedRowIds?: (string | number)[]\n  /** 확장 상태 변경 핸들러 */\n  onExpandedChange?: (expandedRowIds: (string | number)[]) => void\n}\n\n/** 편집 중인 셀 상태 */\ninterface EditingCell<T> {\n  rowId: string | number\n  columnKey: keyof T\n  error?: string\n}\n\nexport interface DataTableProps<T extends { id: string | number }> {\n  /** 컬럼 정의 */\n  columns: DataTableColumn<T>[]\n  /** 데이터 배열 */\n  data: T[]\n  /** 선택 기능 활성화 */\n  selectable?: boolean\n  /** 선택된 행 ID 배열 */\n  selectedIds?: (string | number)[]\n  /** 선택 변경 핸들러 */\n  onSelectionChange?: (selectedIds: (string | number)[]) => void\n  /** 정렬 상태 */\n  sortState?: SortState<T>\n  /** 정렬 변경 핸들러 */\n  onSortChange?: (sortState: SortState<T>) => void\n  /** 행 클릭 핸들러 */\n  onRowClick?: (row: T) => void\n  /** 셀 값 변경 핸들러 */\n  onCellChange?: (rowId: string | number, columnKey: keyof T, value: T[keyof T]) => void\n  /** 확장 가능 행 설정 */\n  expandable?: ExpandableConfig<T>\n  /** 빈 데이터 메시지 */\n  emptyMessage?: React.ReactNode\n  /** 추가 className */\n  className?: string\n  /** 행 className 커스터마이즈 */\n  rowClassName?: (row: T) => string\n  /** 테이블 본문 최대 높이 (초과 시 내부 스크롤) */\n  maxHeight?: number | string\n  /** 컬럼 리사이징 활성화 */\n  resizable?: boolean\n  /** 컬럼 너비 상태 (제어 컴포넌트) */\n  columnWidths?: Record<string, number>\n  /** 컬럼 너비 변경 핸들러 */\n  onColumnResize?: (columnKey: keyof T, width: number) => void\n  /** 컬럼 순서 변경 활성화 */\n  columnReorderable?: boolean\n  /** 컬럼 순서 (accessorKey 배열) */\n  columnOrder?: (keyof T)[]\n  /** 컬럼 순서 변경 핸들러 */\n  onColumnReorder?: (newOrder: (keyof T)[]) => void\n  /** 로우 순서 변경 활성화 */\n  rowReorderable?: boolean\n  /** 로우 순서 변경 핸들러 */\n  onRowReorder?: (newData: T[]) => void\n  /** 로딩 상태 */\n  loading?: boolean\n  /** 커스텀 로딩 콘텐츠 (미설정 시 STL 화살표 로고 표시) */\n  loadingContent?: React.ReactNode\n  /** 행 추가 기능 활성화 */\n  addable?: boolean\n  /** 행 추가 버튼 클릭 핸들러 */\n  onAddRow?: () => void\n  /** 행 추가 버튼 레이블 (기본값: \"행 추가\") */\n  addRowLabel?: string\n}\n\n/** 기본 편집 컴포넌트 (Input) */\nfunction DefaultEditComponent<T>({\n  value,\n  onChange,\n  onComplete,\n  onCancel,\n  error,\n}: EditComponentProps<T>) {\n  const inputRef = React.useRef<HTMLInputElement>(null)\n\n  React.useEffect(() => {\n    inputRef.current?.focus()\n    inputRef.current?.select()\n  }, [])\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\") {\n      e.preventDefault()\n      onComplete()\n    } else if (e.key === \"Escape\") {\n      e.preventDefault()\n      onCancel()\n    }\n  }\n\n  return (\n    <div className=\"flex flex-col gap-0.5\">\n      <Input\n        ref={inputRef}\n        value={String(value ?? \"\")}\n        onChange={(e) => onChange(e.target.value as T[keyof T])}\n        onKeyDown={handleKeyDown}\n        error={!!error}\n        tableMode\n        className=\"w-full min-w-[60px] px-2 text-xs\"\n      />\n      {error && (\n        <span className=\"text-[10px] text-destructive dark:text-red-400\">\n          {error}\n        </span>\n      )}\n    </div>\n  )\n}\n\n/** 드래그 가능한 헤더 셀 */\ninterface SortableHeaderCellProps {\n  id: string\n  children: React.ReactNode\n  className?: string\n  style?: React.CSSProperties\n  disabled?: boolean\n}\n\nfunction SortableHeaderCell({\n  id,\n  children,\n  className,\n  style,\n  disabled,\n}: SortableHeaderCellProps) {\n  const {\n    attributes,\n    listeners,\n    setNodeRef,\n    transform,\n    transition,\n    isDragging,\n  } = useSortable({ id, disabled })\n\n  const dragStyle: React.CSSProperties = {\n    ...style,\n    transform: CSS.Transform.toString(transform),\n    transition,\n    opacity: isDragging ? 0.5 : 1,\n    cursor: disabled ? undefined : \"grab\",\n  }\n\n  return (\n    <th\n      ref={setNodeRef}\n      style={dragStyle}\n      className={cn(\n        \"group/drag h-9 pl-1.5 pr-1.5 py-1.5 text-left align-middle font-medium text-[#798698] dark:text-slate-300\",\n        \"bg-[#eaedf1] dark:bg-slate-800\",\n        \"[&:has([role=checkbox])]:pr-0\",\n        \"hover:bg-slate-200/70 dark:hover:bg-slate-700/70\",\n        \"transition-colors\",\n        isDragging && \"z-50\",\n        className\n      )}\n      {...attributes}\n      {...listeners}\n    >\n      <span className=\"flex items-center gap-0.5\">\n        <DragHandleIcon\n          size={16}\n          className=\"opacity-30 group-hover/drag:opacity-70 transition-opacity flex-shrink-0\"\n        />\n        {children}\n      </span>\n    </th>\n  )\n}\n\n/** 드래그 가능한 로우 */\ninterface SortableRowProps {\n  id: string\n  children: React.ReactNode | ((dragHandleProps: DragHandleProps) => React.ReactNode)\n  className?: string\n  isSelected?: boolean\n  onClick?: () => void\n}\n\ninterface DragHandleProps {\n  listeners?: Record<string, unknown>\n  attributes?: DraggableAttributes\n  setActivatorNodeRef?: (element: HTMLElement | null) => void\n}\n\nfunction SortableRow({\n  id,\n  children,\n  className,\n  isSelected,\n  onClick,\n}: SortableRowProps) {\n  const {\n    setNodeRef,\n    setActivatorNodeRef,\n    listeners,\n    attributes,\n    transform,\n    transition,\n    isDragging,\n  } = useSortable({ id })\n\n  const style: React.CSSProperties = {\n    transform: CSS.Transform.toString(transform),\n    transition,\n    opacity: isDragging ? 0.5 : 1,\n  }\n\n  return (\n    <tr\n      ref={setNodeRef}\n      style={style}\n      data-state={isSelected ? \"selected\" : undefined}\n      className={cn(\n        \"group border-b border-slate-200 dark:border-slate-700 transition-colors\",\n        \"bg-white dark:bg-slate-900 hover:bg-slate-100 dark:hover:bg-slate-800\",\n        \"data-[state=selected]:bg-blue-50 dark:data-[state=selected]:bg-blue-950/30\",\n        isDragging && \"z-50 shadow-lg\",\n        className\n      )}\n      onClick={onClick}\n    >\n      {typeof children === \"function\"\n        ? children({ listeners, attributes, setActivatorNodeRef })\n        : children}\n    </tr>\n  )\n}\n\n/** 드래그 핸들 셀 */\ninterface DragHandleCellProps {\n  isSelected?: boolean\n  hasLeftStickyColumns?: boolean\n  dragHandleProps?: DragHandleProps\n}\n\nfunction DragHandleCell({ isSelected, hasLeftStickyColumns, dragHandleProps }: DragHandleCellProps) {\n  const DRAG_HANDLE_WIDTH = 32\n  const { listeners, attributes, setActivatorNodeRef } = dragHandleProps ?? {}\n\n  return (\n    <td\n      className={cn(\n        \"p-0 align-middle\",\n        hasLeftStickyColumns && (isSelected\n          ? \"transition-colors bg-blue-50 dark:bg-blue-950/30\"\n          : \"transition-colors bg-slate-50 dark:bg-slate-800 group-hover:bg-slate-100 dark:group-hover:bg-slate-700\"\n        )\n      )}\n      style={hasLeftStickyColumns ? {\n        position: \"sticky\",\n        left: 0,\n        zIndex: 10,\n        width: `${DRAG_HANDLE_WIDTH}px`,\n        minWidth: `${DRAG_HANDLE_WIDTH}px`,\n        maxWidth: `${DRAG_HANDLE_WIDTH}px`,\n      } : {\n        width: `${DRAG_HANDLE_WIDTH}px`,\n        minWidth: `${DRAG_HANDLE_WIDTH}px`,\n        maxWidth: `${DRAG_HANDLE_WIDTH}px`,\n      }}\n    >\n      <div\n        ref={setActivatorNodeRef}\n        className=\"flex h-9 w-8 items-center justify-center cursor-grab text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors\"\n        onClick={(e) => e.stopPropagation()}\n        {...listeners}\n        {...attributes}\n      >\n        <DragHandleIcon size={16} />\n      </div>\n    </td>\n  )\n}\n\nfunction DataTable<T extends { id: string | number }>({\n  columns,\n  data,\n  selectable = false,\n  selectedIds = [],\n  onSelectionChange,\n  sortState,\n  onSortChange,\n  onRowClick,\n  onCellChange,\n  expandable,\n  emptyMessage = \"데이터가 없습니다.\",\n  className,\n  rowClassName,\n  maxHeight,\n  resizable = false,\n  columnWidths,\n  onColumnResize,\n  columnReorderable = false,\n  columnOrder,\n  onColumnReorder,\n  rowReorderable = false,\n  onRowReorder,\n  loading = false,\n  loadingContent,\n  addable = false,\n  onAddRow,\n  addRowLabel = \"행 추가\",\n}: DataTableProps<T>) {\n  const [editingCell, setEditingCell] = React.useState<EditingCell<T> | null>(null)\n  const [editValue, setEditValue] = React.useState<T[keyof T] | null>(null)\n  // stale closure 방지용 ref\n  const editValueRef = React.useRef<T[keyof T] | null>(null)\n  // 바깥 클릭 감지용 ref\n  const editingCellRef = React.useRef<HTMLTableCellElement>(null)\n  const [internalExpandedIds, setInternalExpandedIds] = React.useState<(string | number)[]>(\n    expandable?.defaultExpandedRowIds ?? []\n  )\n  // 내부 컬럼 너비 상태 (비제어 컴포넌트용)\n  const [internalColumnWidths, setInternalColumnWidths] = React.useState<Record<string, number>>({})\n  // 리사이징 상태\n  const [resizingColumn, setResizingColumn] = React.useState<keyof T | null>(null)\n  const resizeStartX = React.useRef<number>(0)\n  const resizeStartWidth = React.useRef<number>(0)\n  // 내부 컬럼 순서 상태 (비제어 컴포넌트용)\n  const [internalColumnOrder, setInternalColumnOrder] = React.useState<(keyof T)[]>(() =>\n    columns.map((col) => col.accessorKey)\n  )\n\n  React.useEffect(() => {\n    if (!columnReorderable || columnOrder) return\n\n    setInternalColumnOrder((prev) => {\n      const columnKeys = columns.map((col) => col.accessorKey)\n      const next = prev.filter((key) => columnKeys.includes(key))\n      const missing = columnKeys.filter((key) => !next.includes(key))\n      const updated = [...next, ...missing]\n\n      if (\n        updated.length === prev.length &&\n        updated.every((key, index) => key === prev[index])\n      ) {\n        return prev\n      }\n\n      return updated\n    })\n  }, [columns, columnReorderable, columnOrder])\n\n  // 컬럼 순서 (제어/비제어)\n  const currentColumnOrder = columnOrder ?? internalColumnOrder\n  const orderedColumns = React.useMemo(() => {\n    if (!columnReorderable) return columns\n    return currentColumnOrder\n      .map((key) => columns.find((col) => col.accessorKey === key))\n      .filter((col): col is DataTableColumn<T> => col !== undefined)\n  }, [columns, currentColumnOrder, columnReorderable])\n\n  // dnd-kit 센서 설정\n  const sensors = useSensors(\n    useSensor(PointerSensor, {\n      activationConstraint: {\n        distance: 5, // 5px 이상 드래그해야 활성화\n      },\n    }),\n    useSensor(KeyboardSensor, {\n      coordinateGetter: sortableKeyboardCoordinates,\n    })\n  )\n\n  // 컬럼 드래그 완료 핸들러\n  const handleColumnDragEnd = React.useCallback(\n    (event: DragEndEvent) => {\n      const { active, over } = event\n      if (!over || active.id === over.id) return\n\n      const oldIndex = currentColumnOrder.findIndex((key) => String(key) === active.id)\n      const newIndex = currentColumnOrder.findIndex((key) => String(key) === over.id)\n\n      if (oldIndex === -1 || newIndex === -1) return\n\n      const newOrder = arrayMove(currentColumnOrder, oldIndex, newIndex)\n\n      if (onColumnReorder) {\n        onColumnReorder(newOrder)\n      } else {\n        setInternalColumnOrder(newOrder)\n      }\n    },\n    [currentColumnOrder, onColumnReorder]\n  )\n\n  // 로우 드래그 완료 핸들러\n  const handleRowDragEnd = React.useCallback(\n    (event: DragEndEvent) => {\n      const { active, over } = event\n      if (!over || active.id === over.id) return\n\n      // row- 접두사 제거 후 비교\n      const activeId = String(active.id).replace(/^row-/, \"\")\n      const overId = String(over.id).replace(/^row-/, \"\")\n\n      const oldIndex = data.findIndex((row) => String(row.id) === activeId)\n      const newIndex = data.findIndex((row) => String(row.id) === overId)\n\n      if (oldIndex === -1 || newIndex === -1) return\n\n      const newData = arrayMove(data, oldIndex, newIndex)\n      onRowReorder?.(newData)\n    },\n    [data, onRowReorder]\n  )\n\n  // 통합 드래그 완료 핸들러\n  const handleDragEnd = React.useCallback(\n    (event: DragEndEvent) => {\n      const { active } = event\n      // row-로 시작하면 로우 드래그, 아니면 컬럼 드래그\n      if (String(active.id).startsWith(\"row-\")) {\n        handleRowDragEnd(event)\n      } else {\n        handleColumnDragEnd(event)\n      }\n    },\n    [handleColumnDragEnd, handleRowDragEnd]\n  )\n\n  const expandedRowIds = expandable?.expandedRowIds ?? internalExpandedIds\n  const setExpandedRowIds = expandable?.onExpandedChange ?? setInternalExpandedIds\n\n  const isAllSelected = data.length > 0 && selectedIds.length === data.length\n  const isIndeterminate = selectedIds.length > 0 && !isAllSelected\n\n  const handleSelectAll = () => {\n    if (isAllSelected) {\n      onSelectionChange?.([])\n    } else {\n      onSelectionChange?.(data.map((row) => row.id))\n    }\n  }\n\n  const handleSelectRow = (id: string | number) => {\n    if (selectedIds.includes(id)) {\n      onSelectionChange?.(selectedIds.filter((i) => i !== id))\n    } else {\n      onSelectionChange?.([...selectedIds, id])\n    }\n  }\n\n  const handleSort = (column: keyof T) => {\n    if (!onSortChange) return\n\n    if (sortState?.column === column) {\n      if (sortState.direction === \"asc\") {\n        onSortChange({ column, direction: \"desc\" })\n      } else if (sortState.direction === \"desc\") {\n        onSortChange({ column: null, direction: null })\n      } else {\n        onSortChange({ column, direction: \"asc\" })\n      }\n    } else {\n      onSortChange({ column, direction: \"asc\" })\n    }\n  }\n\n  const getSortDirection = (column: keyof T): SortDirection => {\n    return sortState?.column === column ? sortState.direction : null\n  }\n\n  const getAlignClass = (align?: \"left\" | \"center\" | \"right\") => {\n    switch (align) {\n      case \"center\":\n        return \"text-center\"\n      case \"right\":\n        return \"text-right\"\n      default:\n        return \"text-left\"\n    }\n  }\n\n  const startEditing = (rowId: string | number, columnKey: keyof T, currentValue: T[keyof T]) => {\n    setEditingCell({ rowId, columnKey })\n    setEditValue(currentValue)\n    editValueRef.current = currentValue\n  }\n\n  const completeEditing = (column: DataTableColumn<T>, row: T) => {\n    // stale closure 방지를 위해 ref에서 읽음\n    const currentValue = editValueRef.current\n    if (!editingCell || currentValue === null) {\n      setEditingCell(null)\n      setEditValue(null)\n      editValueRef.current = null\n      return\n    }\n\n    if (column.validate) {\n      const result = column.validate(currentValue, row)\n      if (result !== true) {\n        setEditingCell({ ...editingCell, error: result })\n        return\n      }\n    }\n\n    if (onCellChange) {\n      onCellChange(editingCell.rowId, editingCell.columnKey, currentValue)\n    }\n    setEditingCell(null)\n    setEditValue(null)\n    editValueRef.current = null\n  }\n\n  const cancelEditing = React.useCallback(() => {\n    setEditingCell(null)\n    setEditValue(null)\n    editValueRef.current = null\n  }, [])\n\n  React.useEffect(() => {\n    if (!editingCell) return\n\n    const handleClickOutside = (e: MouseEvent) => {\n      const target = e.target as Node\n      if (editingCellRef.current?.contains(target)) return\n      // Radix 포털 (Select 드롭다운) 내부 클릭은 무시해야 함\n      const radixPortal = (target as Element).closest?.(\"[data-radix-popper-content-wrapper]\")\n      if (radixPortal) return\n      cancelEditing()\n    }\n\n    document.addEventListener(\"mousedown\", handleClickOutside)\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside)\n  }, [editingCell, cancelEditing])\n\n  const isEditing = (rowId: string | number, columnKey: keyof T) => {\n    return editingCell?.rowId === rowId && editingCell?.columnKey === columnKey\n  }\n\n  const isRowExpandable = (row: T) => {\n    if (!expandable) return false\n    if (expandable.rowExpandable) return expandable.rowExpandable(row)\n    return true\n  }\n\n  const isRowExpanded = (rowId: string | number) => {\n    return expandedRowIds.includes(rowId)\n  }\n\n  const toggleRowExpanded = (rowId: string | number) => {\n    if (isRowExpanded(rowId)) {\n      setExpandedRowIds(expandedRowIds.filter((id) => id !== rowId))\n    } else {\n      setExpandedRowIds([...expandedRowIds, rowId])\n    }\n  }\n\n  const totalColumns = columns.length + (selectable ? 1 : 0) + (expandable ? 1 : 0) + (rowReorderable ? 1 : 0)\n\n  // 체크박스/확장/드래그 핸들 컬럼 너비 상수\n  const CHECKBOX_WIDTH = 40 // w-10 = 40px\n  const EXPAND_WIDTH = 40 // w-10 = 40px\n  const DRAG_HANDLE_WIDTH = 32 // w-8 = 32px\n\n  // Sticky 컬럼 위치 계산\n  const getStickyStyles = React.useMemo(() => {\n    // 컬럼 너비 추출 헬퍼 (width 우선, 없으면 minWidth)\n    const getColWidth = (col: DataTableColumn<T>): number => {\n      const w = col.width ?? col.minWidth\n      if (typeof w === \"number\") return w\n      const parsed = parseInt(String(w), 10)\n      return Number.isFinite(parsed) ? parsed : 150\n    }\n\n    const leftColumns = columns.filter((col) => col.sticky === \"left\")\n    const rightColumns = columns.filter((col) => col.sticky === \"right\")\n\n    // 왼쪽 고정 컬럼 위치 계산 (드래그 핸들, 체크박스, 확장 아이콘 컬럼 고려)\n    const dragHandleWidth = rowReorderable ? DRAG_HANDLE_WIDTH : 0\n    const checkboxWidth = selectable ? CHECKBOX_WIDTH : 0\n    const expandWidth = expandable ? EXPAND_WIDTH : 0\n    const baseLeftOffset = dragHandleWidth + checkboxWidth + expandWidth\n\n    const leftPositions = new Map<keyof T, number>()\n    let currentLeft = baseLeftOffset\n    for (const col of leftColumns) {\n      leftPositions.set(col.accessorKey, currentLeft)\n      currentLeft += getColWidth(col)\n    }\n\n    // 오른쪽 고정 컬럼 위치 계산 (역순)\n    const rightPositions = new Map<keyof T, number>()\n    let currentRight = 0\n    for (let i = rightColumns.length - 1; i >= 0; i--) {\n      const col = rightColumns[i]\n      rightPositions.set(col.accessorKey, currentRight)\n      currentRight += getColWidth(col)\n    }\n\n    // 마지막 왼쪽/첫 번째 오른쪽 고정 컬럼 (그림자용)\n    const lastLeftSticky = leftColumns.length > 0 ? leftColumns[leftColumns.length - 1].accessorKey : null\n    const firstRightSticky = rightColumns.length > 0 ? rightColumns[0].accessorKey : null\n\n    return (column: DataTableColumn<T>, isHeader: boolean, isSelected?: boolean) => {\n      if (!column.sticky) return { style: {}, className: \"\" }\n\n      const isLastLeft = column.accessorKey === lastLeftSticky\n      const isFirstRight = column.accessorKey === firstRightSticky\n\n      // 컬럼 너비 (px 단위 문자열로 변환) - sticky는 고정 너비 필요\n      const colWidth = getColWidth(column)\n      const widthPx = `${colWidth}px`\n\n      const baseStyles: React.CSSProperties = {\n        position: \"sticky\",\n        zIndex: isHeader ? 20 : 10,\n        width: widthPx,\n        minWidth: widthPx,\n        maxWidth: widthPx,\n      }\n\n      if (column.sticky === \"left\") {\n        const leftPos = leftPositions.get(column.accessorKey) ?? 0\n        return {\n          style: {\n            ...baseStyles,\n            left: `${leftPos}px`,\n          },\n          // 헤더: hover 없음, 바디: 행 단위 hover (group-hover), 스티키는 다른 배경색\n          className: cn(\n            \"transition-colors\",\n            isHeader\n              ? \"bg-[#eaedf1] dark:bg-slate-800\"\n              : isSelected\n                ? \"bg-blue-50 dark:bg-blue-950/30\"\n                : \"bg-slate-50 dark:bg-slate-800 group-hover:bg-slate-100 dark:group-hover:bg-slate-700\",\n            isLastLeft && \"shadow-[2px_0_4px_rgba(0,0,0,0.08)]\"\n          ),\n        }\n      }\n\n      const rightPos = rightPositions.get(column.accessorKey) ?? 0\n      return {\n        style: {\n          ...baseStyles,\n          right: `${rightPos}px`,\n        },\n        className: cn(\n          \"transition-colors\",\n          isHeader\n            ? \"bg-[#eaedf1] dark:bg-slate-800\"\n            : isSelected\n              ? \"bg-blue-50 dark:bg-blue-950/30\"\n              : \"bg-slate-50 dark:bg-slate-800 group-hover:bg-slate-100 dark:group-hover:bg-slate-700\",\n          isFirstRight && \"shadow-[-2px_0_4px_rgba(0,0,0,0.08)]\"\n        ),\n      }\n    }\n  }, [columns, selectable, expandable])\n\n  // 체크박스/확장 컬럼도 sticky로 만들기 (왼쪽 고정 컬럼이 있을 때)\n  const hasLeftStickyColumns = columns.some((col) => col.sticky === \"left\")\n\n  // 컬럼 너비 가져오기 (제어/비제어 컴포넌트 통합)\n  const getColumnWidth = React.useCallback(\n    (column: DataTableColumn<T>): number | undefined => {\n      const key = String(column.accessorKey)\n      // 제어 컴포넌트\n      if (columnWidths && key in columnWidths) {\n        return columnWidths[key]\n      }\n      // 비제어 컴포넌트\n      if (key in internalColumnWidths) {\n        return internalColumnWidths[key]\n      }\n      // 초기값: column.width 또는 undefined\n      if (column.width) {\n        return typeof column.width === \"number\" ? column.width : parseInt(column.width, 10)\n      }\n      return undefined\n    },\n    [columnWidths, internalColumnWidths]\n  )\n\n  // 리사이즈 핸들러\n  const handleResizeStart = React.useCallback(\n    (e: React.MouseEvent, column: DataTableColumn<T>) => {\n      e.preventDefault()\n      e.stopPropagation()\n      setResizingColumn(column.accessorKey)\n      resizeStartX.current = e.clientX\n      const currentWidth = getColumnWidth(column) ?? 150\n      resizeStartWidth.current = currentWidth\n    },\n    [getColumnWidth]\n  )\n\n  const handleResizeMove = React.useCallback(\n    (e: MouseEvent) => {\n      if (!resizingColumn) return\n      const delta = e.clientX - resizeStartX.current\n      const newWidth = Math.max(50, resizeStartWidth.current + delta) // 최소 50px\n      const key = String(resizingColumn)\n\n      if (onColumnResize) {\n        onColumnResize(resizingColumn, newWidth)\n      } else {\n        setInternalColumnWidths((prev) => ({ ...prev, [key]: newWidth }))\n      }\n    },\n    [resizingColumn, onColumnResize]\n  )\n\n  const handleResizeEnd = React.useCallback(() => {\n    setResizingColumn(null)\n  }, [])\n\n  // 전역 마우스 이벤트 등록 (리사이징 중)\n  React.useEffect(() => {\n    if (!resizingColumn) return\n\n    document.addEventListener(\"mousemove\", handleResizeMove)\n    document.addEventListener(\"mouseup\", handleResizeEnd)\n    // 드래그 중 텍스트 선택 방지\n    document.body.style.userSelect = \"none\"\n    document.body.style.cursor = \"col-resize\"\n\n    return () => {\n      document.removeEventListener(\"mousemove\", handleResizeMove)\n      document.removeEventListener(\"mouseup\", handleResizeEnd)\n      document.body.style.userSelect = \"\"\n      document.body.style.cursor = \"\"\n    }\n  }, [resizingColumn, handleResizeMove, handleResizeEnd])\n\n  // 컬럼 헤더 렌더링 함수\n  const renderColumnHeader = (column: DataTableColumn<T>) => {\n    const stickyData = getStickyStyles(column, true)\n    const toPx = (v: string | number) => typeof v === \"number\" ? `${v}px` : v\n    const baseStyle: React.CSSProperties = {}\n    if (!column.sticky) {\n      const resizedWidth = resizable ? getColumnWidth(column) : undefined\n      if (resizedWidth !== undefined) {\n        baseStyle.width = `${resizedWidth}px`\n        baseStyle.minWidth = `${resizedWidth}px`\n      } else {\n        if (column.width) baseStyle.width = toPx(column.width)\n        if (column.minWidth) baseStyle.minWidth = toPx(column.minWidth)\n      }\n    }\n    const style = { ...baseStyle, ...stickyData.style }\n\n    // 리사이즈 핸들 컴포넌트\n    const resizeHandle = resizable && (\n      <div\n        className={cn(\n          \"absolute top-0 h-full w-[9px] cursor-col-resize opacity-0 hover:opacity-100 transition-opacity z-30\",\n          resizingColumn === column.accessorKey && \"opacity-100\"\n        )}\n        style={{\n          right: \"-4px\",\n          background: \"linear-gradient(to right, transparent, rgba(148,163,184,0.5) 50%, transparent)\"\n        }}\n        onMouseDown={(e) => handleResizeStart(e, column)}\n        onPointerDown={(e) => e.stopPropagation()}\n        onClick={(e) => e.stopPropagation()}\n      />\n    )\n\n    // 드래그 가능 여부 (sticky 컬럼은 드래그 불가)\n    const isDraggable = columnReorderable && !column.sticky && !column.sortable\n\n    if (isDraggable) {\n      return (\n        <SortableHeaderCell\n          key={String(column.accessorKey)}\n          id={String(column.accessorKey)}\n          style={style}\n          className={cn(getAlignClass(column.align), stickyData.className, resizable && \"relative overflow-visible\")}\n        >\n          {column.header}\n          {resizeHandle}\n        </SortableHeaderCell>\n      )\n    }\n\n    if (column.sortable) {\n      return (\n        <TableSortableHead\n          key={String(column.accessorKey)}\n          sortDirection={getSortDirection(column.accessorKey)}\n          onSort={() => handleSort(column.accessorKey)}\n          style={style}\n          className={cn(getAlignClass(column.align), stickyData.className, resizable && \"relative overflow-visible\")}\n        >\n          {column.header}\n          {resizeHandle}\n        </TableSortableHead>\n      )\n    }\n\n    return (\n      <TableHead\n        key={String(column.accessorKey)}\n        style={style}\n        className={cn(getAlignClass(column.align), stickyData.className, resizable && \"relative overflow-visible\")}\n      >\n        {column.header}\n        {resizeHandle}\n      </TableHead>\n    )\n  }\n\n  const columnsToRender = columnReorderable ? orderedColumns : columns\n  const columnIds = columnsToRender.filter(col => !col.sticky).map(col => String(col.accessorKey))\n  const rowIds = data.map(row => `row-${row.id}`)\n\n  // 드래그 핸들 헤더 sticky left 위치 계산\n  const getDragHandleHeaderLeftOffset = () => 0\n  // 체크박스 헤더 sticky left 위치 계산\n  const getCheckboxHeaderLeftOffset = () => rowReorderable ? DRAG_HANDLE_WIDTH : 0\n  // 확장 버튼 헤더 sticky left 위치 계산\n  const getExpandHeaderLeftOffset = () => {\n    let offset = 0\n    if (rowReorderable) offset += DRAG_HANDLE_WIDTH\n    if (selectable) offset += CHECKBOX_WIDTH\n    return offset\n  }\n\n  const tableContent = (\n    <Table className={className} maxHeight={maxHeight} tableLayout=\"fixed\">\n      <TableHeader>\n        <TableRow>\n          {rowReorderable && (\n            <TableHead\n              className=\"!p-0 bg-[#eaedf1] dark:bg-slate-800\"\n              style={hasLeftStickyColumns ? {\n                position: \"sticky\",\n                left: getDragHandleHeaderLeftOffset(),\n                zIndex: 20,\n                width: `${DRAG_HANDLE_WIDTH}px`,\n                minWidth: `${DRAG_HANDLE_WIDTH}px`,\n                maxWidth: `${DRAG_HANDLE_WIDTH}px`,\n              } : {\n                width: `${DRAG_HANDLE_WIDTH}px`,\n                minWidth: `${DRAG_HANDLE_WIDTH}px`,\n                maxWidth: `${DRAG_HANDLE_WIDTH}px`,\n              }}\n              aria-label=\"순서 변경\"\n            >\n              <span className=\"sr-only\">순서 변경</span>\n            </TableHead>\n          )}\n\n          {selectable && (\n            <TableHead\n              className=\"!p-0 bg-[#eaedf1] dark:bg-slate-800\"\n              style={hasLeftStickyColumns ? {\n                position: \"sticky\",\n                left: getCheckboxHeaderLeftOffset(),\n                zIndex: 20,\n                width: `${CHECKBOX_WIDTH}px`,\n                minWidth: `${CHECKBOX_WIDTH}px`,\n                maxWidth: `${CHECKBOX_WIDTH}px`,\n              } : {\n                width: `${CHECKBOX_WIDTH}px`,\n                minWidth: `${CHECKBOX_WIDTH}px`,\n                maxWidth: `${CHECKBOX_WIDTH}px`,\n              }}\n            >\n              <div className=\"flex items-center justify-center h-9\">\n                <Checkbox\n                  checked={isAllSelected}\n                  indeterminate={isIndeterminate}\n                  onCheckedChange={handleSelectAll}\n                  aria-label=\"전체 선택\"\n                />\n              </div>\n            </TableHead>\n          )}\n\n          {expandable && (\n            <TableHead\n              className=\"bg-[#eaedf1] dark:bg-slate-800\"\n              style={hasLeftStickyColumns ? {\n                position: \"sticky\",\n                left: getExpandHeaderLeftOffset(),\n                zIndex: 20,\n                width: `${EXPAND_WIDTH}px`,\n                minWidth: `${EXPAND_WIDTH}px`,\n                maxWidth: `${EXPAND_WIDTH}px`,\n              } : {\n                width: `${EXPAND_WIDTH}px`,\n                minWidth: `${EXPAND_WIDTH}px`,\n                maxWidth: `${EXPAND_WIDTH}px`,\n              }}\n              aria-label=\"확장\"\n            >\n              <span className=\"sr-only\">확장</span>\n            </TableHead>\n          )}\n\n          {columnReorderable ? (\n            <SortableContext items={columnIds} strategy={horizontalListSortingStrategy}>\n              {columnsToRender.map(renderColumnHeader)}\n            </SortableContext>\n          ) : (\n            columnsToRender.map(renderColumnHeader)\n          )}\n        </TableRow>\n      </TableHeader>\n\n      <TableBody>\n        {loading ? (\n          <TableRow className=\"hover:bg-white dark:hover:bg-slate-900\">\n            <TableCell\n              colSpan={totalColumns}\n              className=\"h-80 text-center\"\n            >\n              {loadingContent ?? (\n                <div className=\"flex items-center justify-center\">\n                  <STLArrowIcon size={200} className=\"text-slate-200 dark:text-slate-700\" />\n                </div>\n              )}\n            </TableCell>\n          </TableRow>\n        ) : data.length === 0 ? (\n          <TableRow className=\"hover:bg-white dark:hover:bg-slate-900\">\n            <TableCell\n              colSpan={totalColumns}\n              className=\"h-24 text-center text-slate-500\"\n            >\n              {emptyMessage}\n            </TableCell>\n          </TableRow>\n        ) : rowReorderable ? (\n          <SortableContext items={rowIds} strategy={verticalListSortingStrategy}>\n            {data.map((row) => {\n              const isSelected = selectedIds.includes(row.id)\n              const canExpand = isRowExpandable(row)\n              const isExpanded = isRowExpanded(row.id)\n              const rowSortableId = `row-${row.id}`\n\n              // 로우 내부 셀들 렌더링 함수\n              const renderRowCells = (dragHandleProps?: DragHandleProps) => (\n                <>\n                  <DragHandleCell\n                    isSelected={isSelected}\n                    hasLeftStickyColumns={hasLeftStickyColumns}\n                    dragHandleProps={dragHandleProps}\n                  />\n\n                  {selectable && (\n                    <TableCell\n                      onClick={(e) => e.stopPropagation()}\n                      className={cn(\n                        \"!p-0\",\n                        hasLeftStickyColumns && (isSelected ? \"transition-colors bg-blue-50 dark:bg-blue-950/30\" : \"transition-colors bg-slate-50 dark:bg-slate-800 group-hover:bg-slate-100 dark:group-hover:bg-slate-700\")\n                      )}\n                      style={hasLeftStickyColumns ? {\n                        position: \"sticky\",\n                        left: getCheckboxHeaderLeftOffset(),\n                        zIndex: 10,\n                        width: `${CHECKBOX_WIDTH}px`,\n                        minWidth: `${CHECKBOX_WIDTH}px`,\n                        maxWidth: `${CHECKBOX_WIDTH}px`,\n                      } : {\n                        width: `${CHECKBOX_WIDTH}px`,\n                        minWidth: `${CHECKBOX_WIDTH}px`,\n                        maxWidth: `${CHECKBOX_WIDTH}px`,\n                      }}\n                    >\n                      <div className=\"flex items-center justify-center h-9\">\n                        <Checkbox\n                          checked={isSelected}\n                          onCheckedChange={() => handleSelectRow(row.id)}\n                          aria-label={`행 ${row.id} 선택`}\n                        />\n                      </div>\n                    </TableCell>\n                  )}\n\n                  {expandable && (\n                    <TableCell\n                      className={cn(\n                        \"p-0\",\n                        hasLeftStickyColumns && (isSelected ? \"transition-colors bg-blue-50 dark:bg-blue-950/30\" : \"transition-colors bg-slate-50 dark:bg-slate-800 group-hover:bg-slate-100 dark:group-hover:bg-slate-700\")\n                      )}\n                      style={hasLeftStickyColumns ? {\n                        position: \"sticky\",\n                        left: getExpandHeaderLeftOffset(),\n                        zIndex: 10,\n                        width: `${EXPAND_WIDTH}px`,\n                        minWidth: `${EXPAND_WIDTH}px`,\n                        maxWidth: `${EXPAND_WIDTH}px`,\n                      } : {\n                        width: `${EXPAND_WIDTH}px`,\n                        minWidth: `${EXPAND_WIDTH}px`,\n                        maxWidth: `${EXPAND_WIDTH}px`,\n                      }}\n                      onClick={(e) => e.stopPropagation()}\n                    >\n                      {canExpand && (\n                        <button\n                          type=\"button\"\n                          onClick={() => toggleRowExpanded(row.id)}\n                          className=\"flex h-9 w-10 items-center justify-center text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors\"\n                          aria-label={isExpanded ? \"행 접기\" : \"행 펼치기\"}\n                          aria-expanded={isExpanded}\n                        >\n                          {isExpanded ? (\n                            <DownIcon size={24} />\n                          ) : (\n                            <RightIcon size={24} />\n                          )}\n                        </button>\n                      )}\n                    </TableCell>\n                  )}\n\n                  {columnsToRender.map((column) => {\n                    const value = row[column.accessorKey]\n                    const cellIsEditing = isEditing(row.id, column.accessorKey)\n                    const stickyData = getStickyStyles(column, false, isSelected)\n\n                    const toPx = (v: string | number) => typeof v === \"number\" ? `${v}px` : v\n                    const bodyCellStyle: React.CSSProperties = {}\n                    if (!column.sticky) {\n                      const resizedWidth = resizable ? getColumnWidth(column) : undefined\n                      if (resizedWidth !== undefined) {\n                        bodyCellStyle.width = `${resizedWidth}px`\n                        bodyCellStyle.minWidth = `${resizedWidth}px`\n                      } else {\n                        if (column.width) bodyCellStyle.width = toPx(column.width)\n                        if (column.minWidth) bodyCellStyle.minWidth = toPx(column.minWidth)\n                      }\n                    }\n                    const cellStyle = { ...bodyCellStyle, ...stickyData.style }\n\n                    if (cellIsEditing && column.editable) {\n                      const EditComponent = column.editComponent || DefaultEditComponent\n                      return (\n                        <TableCell\n                          ref={editingCellRef}\n                          key={String(column.accessorKey)}\n                          className={cn(getAlignClass(column.align), \"p-1\", stickyData.className)}\n                          style={cellStyle}\n                          onClick={(e) => e.stopPropagation()}\n                        >\n                          <EditComponent\n                            value={editValue as T[keyof T]}\n                            onChange={(newValue) => {\n                              setEditValue(newValue)\n                              editValueRef.current = newValue\n                              if (editingCell?.error) {\n                                setEditingCell({ ...editingCell, error: undefined })\n                              }\n                            }}\n                            onComplete={() => completeEditing(column, row)}\n                            onCancel={cancelEditing}\n                            row={row}\n                            error={editingCell?.error}\n                          />\n                        </TableCell>\n                      )\n                    }\n\n                    const content = column.cell ? column.cell(value, row) : String(value ?? \"\")\n\n                    if (column.editable && onCellChange) {\n                      return (\n                        <TableCell\n                          key={String(column.accessorKey)}\n                          className={cn(getAlignClass(column.align), \"group/edit cursor-text hover:bg-blue-100 dark:hover:bg-blue-800\", stickyData.className)}\n                          style={cellStyle}\n                          onClick={(e) => {\n                            e.stopPropagation()\n                            setTimeout(() => startEditing(row.id, column.accessorKey, value), 0)\n                          }}\n                        >\n                          <span className=\"flex items-center gap-1\">\n                            <span className=\"flex-1\">{content}</span>\n                            <WriteIcon\n                              size={14}\n                              className=\"flex-shrink-0 opacity-0 group-hover/edit:opacity-100 transition-opacity text-blue-500 dark:text-blue-300\"\n                            />\n                          </span>\n                        </TableCell>\n                      )\n                    }\n\n                    return (\n                      <TableCell\n                        key={String(column.accessorKey)}\n                        className={cn(getAlignClass(column.align), stickyData.className)}\n                        style={cellStyle}\n                      >\n                        {content}\n                      </TableCell>\n                    )\n                  })}\n                </>\n              )\n\n              return (\n                <React.Fragment key={row.id}>\n                  <SortableRow\n                    id={rowSortableId}\n                    isSelected={isSelected}\n                    className={cn(onRowClick && \"cursor-pointer\", rowClassName?.(row))}\n                    onClick={() => onRowClick?.(row)}\n                  >\n                    {(dragHandleProps) => renderRowCells(dragHandleProps)}\n                  </SortableRow>\n\n                  {expandable && isExpanded && (\n                    <TableRow className=\"bg-white dark:bg-slate-800/50 hover:bg-white dark:hover:bg-slate-800/50\">\n                      <TableCell\n                        colSpan={totalColumns}\n                        className=\"p-0\"\n                        style={{ position: \"relative\" }}\n                      >\n                        <div\n                          className=\"p-4 overflow-x-auto\"\n                          style={{\n                            position: \"sticky\",\n                            left: 0,\n                            width: \"100%\",\n                            maxWidth: \"100vw\",\n                          }}\n                        >\n                          {expandable.expandedRowRender(row)}\n                        </div>\n                      </TableCell>\n                    </TableRow>\n                  )}\n                </React.Fragment>\n              )\n            })}\n          </SortableContext>\n        ) : (\n          data.map((row) => {\n            const isSelected = selectedIds.includes(row.id)\n            const canExpand = isRowExpandable(row)\n            const isExpanded = isRowExpanded(row.id)\n            const rowSortableId = `row-${row.id}`\n\n            // 로우 내부 셀들 렌더링 함수\n            const renderRowCells = (dragHandleProps?: DragHandleProps) => (\n              <>\n                {rowReorderable && (\n                  <DragHandleCell\n                    isSelected={isSelected}\n                    hasLeftStickyColumns={hasLeftStickyColumns}\n                    dragHandleProps={dragHandleProps}\n                  />\n                )}\n\n                {selectable && (\n                  <TableCell\n                    onClick={(e) => e.stopPropagation()}\n                    className={cn(\n                      \"!p-0\",\n                      hasLeftStickyColumns && (isSelected ? \"transition-colors bg-blue-50 dark:bg-blue-950/30\" : \"transition-colors bg-slate-50 dark:bg-slate-800 group-hover:bg-slate-100 dark:group-hover:bg-slate-700\")\n                    )}\n                    style={hasLeftStickyColumns ? {\n                      position: \"sticky\",\n                      left: getCheckboxHeaderLeftOffset(),\n                      zIndex: 10,\n                      width: `${CHECKBOX_WIDTH}px`,\n                      minWidth: `${CHECKBOX_WIDTH}px`,\n                      maxWidth: `${CHECKBOX_WIDTH}px`,\n                    } : {\n                      width: `${CHECKBOX_WIDTH}px`,\n                      minWidth: `${CHECKBOX_WIDTH}px`,\n                      maxWidth: `${CHECKBOX_WIDTH}px`,\n                    }}\n                  >\n                    <div className=\"flex items-center justify-center h-9\">\n                      <Checkbox\n                        checked={isSelected}\n                        onCheckedChange={() => handleSelectRow(row.id)}\n                        aria-label={`행 ${row.id} 선택`}\n                      />\n                    </div>\n                  </TableCell>\n                )}\n\n                {expandable && (\n                  <TableCell\n                    className={cn(\n                      \"p-0\",\n                      hasLeftStickyColumns && (isSelected ? \"transition-colors bg-blue-50 dark:bg-blue-950/30\" : \"transition-colors bg-slate-50 dark:bg-slate-800 group-hover:bg-slate-100 dark:group-hover:bg-slate-700\")\n                    )}\n                    style={hasLeftStickyColumns ? {\n                      position: \"sticky\",\n                      left: getExpandHeaderLeftOffset(),\n                      zIndex: 10,\n                      width: `${EXPAND_WIDTH}px`,\n                      minWidth: `${EXPAND_WIDTH}px`,\n                      maxWidth: `${EXPAND_WIDTH}px`,\n                    } : {\n                      width: `${EXPAND_WIDTH}px`,\n                      minWidth: `${EXPAND_WIDTH}px`,\n                      maxWidth: `${EXPAND_WIDTH}px`,\n                    }}\n                    onClick={(e) => e.stopPropagation()}\n                  >\n                    {canExpand && (\n                      <button\n                        type=\"button\"\n                        onClick={() => toggleRowExpanded(row.id)}\n                        className=\"flex h-9 w-10 items-center justify-center text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors\"\n                        aria-label={isExpanded ? \"행 접기\" : \"행 펼치기\"}\n                        aria-expanded={isExpanded}\n                      >\n                        {isExpanded ? (\n                          <DownIcon size={24} />\n                        ) : (\n                          <RightIcon size={24} />\n                        )}\n                      </button>\n                    )}\n                  </TableCell>\n                )}\n\n                {columnsToRender.map((column) => {\n                  const value = row[column.accessorKey]\n                  const cellIsEditing = isEditing(row.id, column.accessorKey)\n                  const stickyData = getStickyStyles(column, false, isSelected)\n\n                  // 바디 셀 너비 계산 (헤더와 동일한 로직)\n                  const toPx = (v: string | number) => typeof v === \"number\" ? `${v}px` : v\n                  const bodyCellStyle: React.CSSProperties = {}\n                  if (!column.sticky) {\n                    const resizedWidth = resizable ? getColumnWidth(column) : undefined\n                    if (resizedWidth !== undefined) {\n                      bodyCellStyle.width = `${resizedWidth}px`\n                      bodyCellStyle.minWidth = `${resizedWidth}px`\n                    } else {\n                      if (column.width) bodyCellStyle.width = toPx(column.width)\n                      if (column.minWidth) bodyCellStyle.minWidth = toPx(column.minWidth)\n                    }\n                  }\n                  const cellStyle = { ...bodyCellStyle, ...stickyData.style }\n\n                  if (cellIsEditing && column.editable) {\n                    const EditComponent = column.editComponent || DefaultEditComponent\n\n                    return (\n                      <TableCell\n                        ref={editingCellRef}\n                        key={String(column.accessorKey)}\n                        className={cn(getAlignClass(column.align), \"p-1\", stickyData.className)}\n                        style={cellStyle}\n                        onClick={(e) => e.stopPropagation()}\n                      >\n                        <EditComponent\n                          value={editValue as T[keyof T]}\n                          onChange={(newValue) => {\n                            setEditValue(newValue)\n                            // stale closure 방지\n                            editValueRef.current = newValue\n                            if (editingCell?.error) {\n                              setEditingCell({ ...editingCell, error: undefined })\n                            }\n                          }}\n                          onComplete={() => completeEditing(column, row)}\n                          onCancel={cancelEditing}\n                          row={row}\n                          error={editingCell?.error}\n                        />\n                      </TableCell>\n                    )\n                  }\n\n                  const content = column.cell\n                    ? column.cell(value, row)\n                    : String(value ?? \"\")\n\n                  if (column.editable && onCellChange) {\n                    return (\n                      <TableCell\n                        key={String(column.accessorKey)}\n                        className={cn(\n                          getAlignClass(column.align),\n                          \"group/edit cursor-text hover:bg-blue-100 dark:hover:bg-blue-800\",\n                          stickyData.className\n                        )}\n                        style={cellStyle}\n                        onClick={(e) => {\n                          e.stopPropagation()\n                          // 이전 셀의 blur 처리가 먼저 완료되어야 함\n                          setTimeout(() => {\n                            startEditing(row.id, column.accessorKey, value)\n                          }, 0)\n                        }}\n                      >\n                        <span className=\"flex items-center gap-1\">\n                          <span className=\"flex-1\">{content}</span>\n                          <WriteIcon\n                            size={20}\n                            className=\"flex-shrink-0 opacity-0 group-hover/edit:opacity-100 transition-opacity text-blue-500 dark:text-blue-300\"\n                          />\n                        </span>\n                      </TableCell>\n                    )\n                  }\n\n                  return (\n                    <TableCell\n                      key={String(column.accessorKey)}\n                      className={cn(getAlignClass(column.align), stickyData.className)}\n                      style={cellStyle}\n                    >\n                      {content}\n                    </TableCell>\n                  )\n                })}\n              </>\n            )\n\n            return (\n              <React.Fragment key={row.id}>\n                {rowReorderable ? (\n                  <SortableRow\n                    id={rowSortableId}\n                    isSelected={isSelected}\n                    className={cn(onRowClick && \"cursor-pointer\", rowClassName?.(row))}\n                    onClick={() => onRowClick?.(row)}\n                  >\n                    {(dragHandleProps) => renderRowCells(dragHandleProps)}\n                  </SortableRow>\n                ) : (\n                  <TableRow\n                    data-state={isSelected ? \"selected\" : undefined}\n                    className={cn(onRowClick && \"cursor-pointer\", rowClassName?.(row))}\n                    onClick={() => onRowClick?.(row)}\n                  >\n                    {renderRowCells()}\n                  </TableRow>\n                )}\n\n                {expandable && isExpanded && (\n                  <TableRow className=\"bg-white dark:bg-slate-800/50 hover:bg-white dark:hover:bg-slate-800/50\">\n                    <TableCell\n                      colSpan={totalColumns}\n                      className=\"p-0\"\n                      style={{ position: \"relative\" }}\n                    >\n                      <div\n                        className=\"p-4 overflow-x-auto\"\n                        style={{\n                          position: \"sticky\",\n                          left: 0,\n                          width: \"100%\",\n                          maxWidth: \"100vw\",\n                        }}\n                      >\n                        {expandable.expandedRowRender(row)}\n                      </div>\n                    </TableCell>\n                  </TableRow>\n                )}\n              </React.Fragment>\n            )\n          })\n        )}\n      </TableBody>\n    </Table>\n  )\n\n  // 행 추가 버튼\n  const addRowButton = addable && (\n    <Button\n      type=\"button\"\n      variant=\"ghost\"\n      className=\"w-full justify-center mt-2 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200\"\n      onClick={onAddRow}\n    >\n      <span className=\"mr-1 text-lg leading-none\">+</span>\n      {addRowLabel}\n    </Button>\n  )\n\n  if (columnReorderable || rowReorderable) {\n    return (\n      <div>\n        <DndContext\n          sensors={sensors}\n          collisionDetection={closestCenter}\n          onDragEnd={handleDragEnd}\n        >\n          {tableContent}\n        </DndContext>\n        {addRowButton}\n      </div>\n    )\n  }\n\n  return (\n    <div>\n      {tableContent}\n      {addRowButton}\n    </div>\n  )\n}\n\nexport { DataTable }\n"],"names":["DefaultEditComponent","value","onChange","onComplete","onCancel","error","inputRef","React","_a","_b","handleKeyDown","e","jsxs","jsx","Input","SortableHeaderCell","id","children","className","style","disabled","attributes","listeners","setNodeRef","transform","transition","isDragging","useSortable","dragStyle","CSS","cn","DragHandleIcon","SortableRow","isSelected","onClick","setActivatorNodeRef","DragHandleCell","hasLeftStickyColumns","dragHandleProps","DataTable","columns","data","selectable","selectedIds","onSelectionChange","sortState","onSortChange","onRowClick","onCellChange","expandable","emptyMessage","rowClassName","maxHeight","resizable","columnWidths","onColumnResize","columnReorderable","columnOrder","onColumnReorder","rowReorderable","onRowReorder","loading","loadingContent","addable","onAddRow","addRowLabel","editingCell","setEditingCell","editValue","setEditValue","editValueRef","editingCellRef","internalExpandedIds","setInternalExpandedIds","internalColumnWidths","setInternalColumnWidths","resizingColumn","setResizingColumn","resizeStartX","resizeStartWidth","internalColumnOrder","setInternalColumnOrder","col","prev","columnKeys","next","key","missing","updated","index","currentColumnOrder","orderedColumns","sensors","useSensors","useSensor","PointerSensor","KeyboardSensor","sortableKeyboardCoordinates","handleColumnDragEnd","event","active","over","oldIndex","newIndex","newOrder","arrayMove","handleRowDragEnd","activeId","overId","row","newData","handleDragEnd","expandedRowIds","setExpandedRowIds","isAllSelected","isIndeterminate","handleSelectAll","handleSelectRow","handleSort","column","getSortDirection","getAlignClass","align","startEditing","rowId","columnKey","currentValue","completeEditing","result","cancelEditing","handleClickOutside","target","isEditing","isRowExpandable","isRowExpanded","toggleRowExpanded","totalColumns","CHECKBOX_WIDTH","EXPAND_WIDTH","DRAG_HANDLE_WIDTH","getStickyStyles","getColWidth","w","parsed","leftColumns","rightColumns","dragHandleWidth","checkboxWidth","expandWidth","baseLeftOffset","leftPositions","currentLeft","rightPositions","currentRight","i","lastLeftSticky","firstRightSticky","isHeader","isLastLeft","isFirstRight","widthPx","baseStyles","leftPos","rightPos","getColumnWidth","handleResizeStart","currentWidth","handleResizeMove","delta","newWidth","handleResizeEnd","renderColumnHeader","stickyData","toPx","v","baseStyle","resizedWidth","resizeHandle","TableSortableHead","TableHead","columnsToRender","columnIds","rowIds","getDragHandleHeaderLeftOffset","getCheckboxHeaderLeftOffset","getExpandHeaderLeftOffset","offset","tableContent","Table","TableHeader","TableRow","Checkbox","SortableContext","horizontalListSortingStrategy","TableBody","TableCell","STLArrowIcon","verticalListSortingStrategy","canExpand","isExpanded","rowSortableId","renderRowCells","Fragment","DownIcon","RightIcon","cellIsEditing","bodyCellStyle","cellStyle","EditComponent","newValue","content","WriteIcon","addRowButton","Button","DndContext","closestCenter"],"mappings":"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"}