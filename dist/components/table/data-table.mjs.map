{"version":3,"file":"data-table.mjs","sources":["../../../src/components/table/data-table.tsx"],"sourcesContent":["import * as React from \"react\"\nimport {\n  DndContext,\n  closestCenter,\n  KeyboardSensor,\n  PointerSensor,\n  useSensor,\n  useSensors,\n  type DragEndEvent,\n} from \"@dnd-kit/core\"\nimport {\n  arrayMove,\n  SortableContext,\n  sortableKeyboardCoordinates,\n  horizontalListSortingStrategy,\n  useSortable,\n} from \"@dnd-kit/sortable\"\nimport { CSS } from \"@dnd-kit/utilities\"\n\nimport { cn } from \"@/lib/utils\"\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n  TableSortableHead,\n  type SortDirection,\n} from \"@/components/table/table\"\nimport { Checkbox } from \"@/components/ui/checkbox\"\nimport { Input } from \"@/components/ui/input\"\nimport { RightIcon, DownIcon, DragHandleIcon } from \"@/icons\"\n\n/** 편집 컴포넌트 Props */\nexport interface EditComponentProps<T, K extends keyof T = keyof T> {\n  /** 현재 값 */\n  value: T[K]\n  /** 값 변경 핸들러 */\n  onChange: (value: T[K]) => void\n  /** 편집 완료 핸들러 (Enter 시 호출 - 검증 후 저장) */\n  onComplete: () => void\n  /** 편집 취소 핸들러 (Escape 또는 blur 시 호출 - 원래 값으로 복원) */\n  onCancel: () => void\n  /** 해당 행 데이터 */\n  row: T\n  /** 검증 에러 메시지 */\n  error?: string\n}\n\n/** 검증 결과 타입 */\nexport type ValidationResult = true | string\n\n/** 컬럼 정의 */\nexport interface DataTableColumn<T> {\n  /** 데이터 접근 키 */\n  accessorKey: keyof T\n  /** 헤더 텍스트 */\n  header: string\n  /** 정렬 가능 여부 */\n  sortable?: boolean\n  /** 컬럼 고정 너비 (sticky 컬럼에 권장) */\n  width?: string | number\n  /** 컬럼 최소 너비 (유동적 너비에 권장) */\n  minWidth?: string | number\n  /** 셀 정렬 */\n  align?: \"left\" | \"center\" | \"right\"\n  /** 커스텀 셀 렌더러 */\n  cell?: (value: T[keyof T], row: T) => React.ReactNode\n  /** 편집 가능 여부 */\n  editable?: boolean\n  /** 커스텀 편집 컴포넌트 (기본: Input) */\n  editComponent?: (props: EditComponentProps<T>) => React.ReactNode\n  /** 값 검증 함수 (true: 통과, string: 에러 메시지) */\n  validate?: (value: T[keyof T], row: T) => ValidationResult\n  /** 고정 컬럼 (left: 왼쪽 고정, right: 오른쪽 고정) */\n  sticky?: \"left\" | \"right\"\n}\n\n/** 정렬 상태 */\nexport interface SortState<T> {\n  column: keyof T | null\n  direction: SortDirection\n}\n\n/** 확장 가능 행 설정 */\nexport interface ExpandableConfig<T> {\n  /** 확장 영역 렌더링 함수 */\n  expandedRowRender: (row: T) => React.ReactNode\n  /** 행이 확장 가능한지 여부를 결정하는 함수 (기본: 모든 행 확장 가능) */\n  rowExpandable?: (row: T) => boolean\n  /** 기본 확장된 행 ID 배열 */\n  defaultExpandedRowIds?: (string | number)[]\n  /** 확장된 행 ID 배열 (제어 컴포넌트) */\n  expandedRowIds?: (string | number)[]\n  /** 확장 상태 변경 핸들러 */\n  onExpandedChange?: (expandedRowIds: (string | number)[]) => void\n}\n\n/** 편집 중인 셀 상태 */\ninterface EditingCell<T> {\n  rowId: string | number\n  columnKey: keyof T\n  error?: string\n}\n\nexport interface DataTableProps<T extends { id: string | number }> {\n  /** 컬럼 정의 */\n  columns: DataTableColumn<T>[]\n  /** 데이터 배열 */\n  data: T[]\n  /** 선택 기능 활성화 */\n  selectable?: boolean\n  /** 선택된 행 ID 배열 */\n  selectedIds?: (string | number)[]\n  /** 선택 변경 핸들러 */\n  onSelectionChange?: (selectedIds: (string | number)[]) => void\n  /** 정렬 상태 */\n  sortState?: SortState<T>\n  /** 정렬 변경 핸들러 */\n  onSortChange?: (sortState: SortState<T>) => void\n  /** 행 클릭 핸들러 */\n  onRowClick?: (row: T) => void\n  /** 셀 값 변경 핸들러 */\n  onCellChange?: (rowId: string | number, columnKey: keyof T, value: T[keyof T]) => void\n  /** 확장 가능 행 설정 */\n  expandable?: ExpandableConfig<T>\n  /** 빈 데이터 메시지 */\n  emptyMessage?: string\n  /** 추가 className */\n  className?: string\n  /** 행 className 커스터마이즈 */\n  rowClassName?: (row: T) => string\n  /** 테이블 본문 최대 높이 (초과 시 내부 스크롤) */\n  maxHeight?: number | string\n  /** 컬럼 리사이징 활성화 */\n  resizable?: boolean\n  /** 컬럼 너비 상태 (제어 컴포넌트) */\n  columnWidths?: Record<string, number>\n  /** 컬럼 너비 변경 핸들러 */\n  onColumnResize?: (columnKey: keyof T, width: number) => void\n  /** 컬럼 순서 변경 활성화 */\n  columnReorderable?: boolean\n  /** 컬럼 순서 (accessorKey 배열) */\n  columnOrder?: (keyof T)[]\n  /** 컬럼 순서 변경 핸들러 */\n  onColumnReorder?: (newOrder: (keyof T)[]) => void\n}\n\n/** 기본 편집 컴포넌트 (Input) */\nfunction DefaultEditComponent<T>({\n  value,\n  onChange,\n  onComplete,\n  onCancel,\n  error,\n}: EditComponentProps<T>) {\n  const inputRef = React.useRef<HTMLInputElement>(null)\n\n  React.useEffect(() => {\n    inputRef.current?.focus()\n    inputRef.current?.select()\n  }, [])\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\") {\n      e.preventDefault()\n      onComplete()\n    } else if (e.key === \"Escape\") {\n      e.preventDefault()\n      onCancel()\n    }\n  }\n\n  return (\n    <div className=\"flex flex-col gap-0.5\">\n      <Input\n        ref={inputRef}\n        value={String(value ?? \"\")}\n        onChange={(e) => onChange(e.target.value as T[keyof T])}\n        onKeyDown={handleKeyDown}\n        error={!!error}\n        className=\"w-full min-w-[60px] px-2 text-xs\"\n      />\n      {error && (\n        <span className=\"text-[10px] text-destructive dark:text-red-400\">\n          {error}\n        </span>\n      )}\n    </div>\n  )\n}\n\n/** 드래그 가능한 헤더 셀 */\ninterface SortableHeaderCellProps {\n  id: string\n  children: React.ReactNode\n  className?: string\n  style?: React.CSSProperties\n  disabled?: boolean\n}\n\nfunction SortableHeaderCell({\n  id,\n  children,\n  className,\n  style,\n  disabled,\n}: SortableHeaderCellProps) {\n  const {\n    attributes,\n    listeners,\n    setNodeRef,\n    transform,\n    transition,\n    isDragging,\n  } = useSortable({ id, disabled })\n\n  const dragStyle: React.CSSProperties = {\n    ...style,\n    transform: CSS.Transform.toString(transform),\n    transition,\n    opacity: isDragging ? 0.5 : 1,\n    cursor: disabled ? undefined : \"grab\",\n  }\n\n  return (\n    <th\n      ref={setNodeRef}\n      style={dragStyle}\n      className={cn(\n        \"group/drag h-9 pl-1.5 pr-1.5 py-1.5 text-left align-middle font-medium text-[#798698] dark:text-slate-300\",\n        \"bg-[#eaedf1] dark:bg-slate-800\",\n        \"[&:has([role=checkbox])]:pr-0\",\n        \"hover:bg-slate-200/70 dark:hover:bg-slate-700/70\",\n        \"transition-colors\",\n        isDragging && \"z-50\",\n        className\n      )}\n      {...attributes}\n      {...listeners}\n    >\n      <span className=\"flex items-center gap-0.5\">\n        <DragHandleIcon\n          size={16}\n          className=\"opacity-30 group-hover/drag:opacity-70 transition-opacity flex-shrink-0\"\n        />\n        {children}\n      </span>\n    </th>\n  )\n}\n\nfunction DataTable<T extends { id: string | number }>({\n  columns,\n  data,\n  selectable = false,\n  selectedIds = [],\n  onSelectionChange,\n  sortState,\n  onSortChange,\n  onRowClick,\n  onCellChange,\n  expandable,\n  emptyMessage = \"데이터가 없습니다.\",\n  className,\n  rowClassName,\n  maxHeight,\n  resizable = false,\n  columnWidths,\n  onColumnResize,\n  columnReorderable = false,\n  columnOrder,\n  onColumnReorder,\n}: DataTableProps<T>) {\n  const [editingCell, setEditingCell] = React.useState<EditingCell<T> | null>(null)\n  const [editValue, setEditValue] = React.useState<T[keyof T] | null>(null)\n  // stale closure 방지용 ref\n  const editValueRef = React.useRef<T[keyof T] | null>(null)\n  // 바깥 클릭 감지용 ref\n  const editingCellRef = React.useRef<HTMLTableCellElement>(null)\n  const [internalExpandedIds, setInternalExpandedIds] = React.useState<(string | number)[]>(\n    expandable?.defaultExpandedRowIds ?? []\n  )\n  // 내부 컬럼 너비 상태 (비제어 컴포넌트용)\n  const [internalColumnWidths, setInternalColumnWidths] = React.useState<Record<string, number>>({})\n  // 리사이징 상태\n  const [resizingColumn, setResizingColumn] = React.useState<keyof T | null>(null)\n  const resizeStartX = React.useRef<number>(0)\n  const resizeStartWidth = React.useRef<number>(0)\n  // 내부 컬럼 순서 상태 (비제어 컴포넌트용)\n  const [internalColumnOrder, setInternalColumnOrder] = React.useState<(keyof T)[]>(() =>\n    columns.map((col) => col.accessorKey)\n  )\n\n  // 컬럼 순서 (제어/비제어)\n  const currentColumnOrder = columnOrder ?? internalColumnOrder\n  const orderedColumns = React.useMemo(() => {\n    if (!columnReorderable) return columns\n    return currentColumnOrder\n      .map((key) => columns.find((col) => col.accessorKey === key))\n      .filter((col): col is DataTableColumn<T> => col !== undefined)\n  }, [columns, currentColumnOrder, columnReorderable])\n\n  // dnd-kit 센서 설정\n  const sensors = useSensors(\n    useSensor(PointerSensor, {\n      activationConstraint: {\n        distance: 5, // 5px 이상 드래그해야 활성화\n      },\n    }),\n    useSensor(KeyboardSensor, {\n      coordinateGetter: sortableKeyboardCoordinates,\n    })\n  )\n\n  // 드래그 완료 핸들러\n  const handleDragEnd = React.useCallback(\n    (event: DragEndEvent) => {\n      const { active, over } = event\n      if (!over || active.id === over.id) return\n\n      const oldIndex = currentColumnOrder.findIndex((key) => String(key) === active.id)\n      const newIndex = currentColumnOrder.findIndex((key) => String(key) === over.id)\n\n      if (oldIndex === -1 || newIndex === -1) return\n\n      const newOrder = arrayMove(currentColumnOrder, oldIndex, newIndex)\n\n      if (onColumnReorder) {\n        onColumnReorder(newOrder)\n      } else {\n        setInternalColumnOrder(newOrder)\n      }\n    },\n    [currentColumnOrder, onColumnReorder]\n  )\n\n  const expandedRowIds = expandable?.expandedRowIds ?? internalExpandedIds\n  const setExpandedRowIds = expandable?.onExpandedChange ?? setInternalExpandedIds\n\n  const isAllSelected = data.length > 0 && selectedIds.length === data.length\n  const isIndeterminate = selectedIds.length > 0 && !isAllSelected\n\n  const handleSelectAll = () => {\n    if (isAllSelected) {\n      onSelectionChange?.([])\n    } else {\n      onSelectionChange?.(data.map((row) => row.id))\n    }\n  }\n\n  const handleSelectRow = (id: string | number) => {\n    if (selectedIds.includes(id)) {\n      onSelectionChange?.(selectedIds.filter((i) => i !== id))\n    } else {\n      onSelectionChange?.([...selectedIds, id])\n    }\n  }\n\n  const handleSort = (column: keyof T) => {\n    if (!onSortChange) return\n\n    if (sortState?.column === column) {\n      if (sortState.direction === \"asc\") {\n        onSortChange({ column, direction: \"desc\" })\n      } else if (sortState.direction === \"desc\") {\n        onSortChange({ column: null, direction: null })\n      } else {\n        onSortChange({ column, direction: \"asc\" })\n      }\n    } else {\n      onSortChange({ column, direction: \"asc\" })\n    }\n  }\n\n  const getSortDirection = (column: keyof T): SortDirection => {\n    return sortState?.column === column ? sortState.direction : null\n  }\n\n  const getAlignClass = (align?: \"left\" | \"center\" | \"right\") => {\n    switch (align) {\n      case \"center\":\n        return \"text-center\"\n      case \"right\":\n        return \"text-right\"\n      default:\n        return \"text-left\"\n    }\n  }\n\n  const startEditing = (rowId: string | number, columnKey: keyof T, currentValue: T[keyof T]) => {\n    setEditingCell({ rowId, columnKey })\n    setEditValue(currentValue)\n    editValueRef.current = currentValue\n  }\n\n  const completeEditing = (column: DataTableColumn<T>, row: T) => {\n    // stale closure 방지를 위해 ref에서 읽음\n    const currentValue = editValueRef.current\n    if (!editingCell || currentValue === null) {\n      setEditingCell(null)\n      setEditValue(null)\n      editValueRef.current = null\n      return\n    }\n\n    if (column.validate) {\n      const result = column.validate(currentValue, row)\n      if (result !== true) {\n        setEditingCell({ ...editingCell, error: result })\n        return\n      }\n    }\n\n    if (onCellChange) {\n      onCellChange(editingCell.rowId, editingCell.columnKey, currentValue)\n    }\n    setEditingCell(null)\n    setEditValue(null)\n    editValueRef.current = null\n  }\n\n  const cancelEditing = React.useCallback(() => {\n    setEditingCell(null)\n    setEditValue(null)\n    editValueRef.current = null\n  }, [])\n\n  React.useEffect(() => {\n    if (!editingCell) return\n\n    const handleClickOutside = (e: MouseEvent) => {\n      const target = e.target as Node\n      if (editingCellRef.current?.contains(target)) return\n      // Radix 포털 (Select 드롭다운) 내부 클릭은 무시해야 함\n      const radixPortal = (target as Element).closest?.(\"[data-radix-popper-content-wrapper]\")\n      if (radixPortal) return\n      cancelEditing()\n    }\n\n    document.addEventListener(\"mousedown\", handleClickOutside)\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside)\n  }, [editingCell, cancelEditing])\n\n  const isEditing = (rowId: string | number, columnKey: keyof T) => {\n    return editingCell?.rowId === rowId && editingCell?.columnKey === columnKey\n  }\n\n  const isRowExpandable = (row: T) => {\n    if (!expandable) return false\n    if (expandable.rowExpandable) return expandable.rowExpandable(row)\n    return true\n  }\n\n  const isRowExpanded = (rowId: string | number) => {\n    return expandedRowIds.includes(rowId)\n  }\n\n  const toggleRowExpanded = (rowId: string | number) => {\n    if (isRowExpanded(rowId)) {\n      setExpandedRowIds(expandedRowIds.filter((id) => id !== rowId))\n    } else {\n      setExpandedRowIds([...expandedRowIds, rowId])\n    }\n  }\n\n  const totalColumns = columns.length + (selectable ? 1 : 0) + (expandable ? 1 : 0)\n\n  // 체크박스/확장 컬럼 너비 상수\n  const CHECKBOX_WIDTH = 40 // w-10 = 40px\n  const EXPAND_WIDTH = 40 // w-10 = 40px\n\n  // Sticky 컬럼 위치 계산\n  const getStickyStyles = React.useMemo(() => {\n    // 컬럼 너비 추출 헬퍼 (width 우선, 없으면 minWidth)\n    const getColWidth = (col: DataTableColumn<T>): number => {\n      const w = col.width ?? col.minWidth\n      return typeof w === \"number\" ? w : parseInt(String(w) || \"150\", 10)\n    }\n\n    const leftColumns = columns.filter((col) => col.sticky === \"left\")\n    const rightColumns = columns.filter((col) => col.sticky === \"right\")\n\n    // 왼쪽 고정 컬럼 위치 계산 (체크박스, 확장 아이콘 컬럼 고려)\n    const checkboxWidth = selectable ? CHECKBOX_WIDTH : 0\n    const expandWidth = expandable ? EXPAND_WIDTH : 0\n    const baseLeftOffset = checkboxWidth + expandWidth\n\n    const leftPositions = new Map<keyof T, number>()\n    let currentLeft = baseLeftOffset\n    for (const col of leftColumns) {\n      leftPositions.set(col.accessorKey, currentLeft)\n      currentLeft += getColWidth(col)\n    }\n\n    // 오른쪽 고정 컬럼 위치 계산 (역순)\n    const rightPositions = new Map<keyof T, number>()\n    let currentRight = 0\n    for (let i = rightColumns.length - 1; i >= 0; i--) {\n      const col = rightColumns[i]\n      rightPositions.set(col.accessorKey, currentRight)\n      currentRight += getColWidth(col)\n    }\n\n    // 마지막 왼쪽/첫 번째 오른쪽 고정 컬럼 (그림자용)\n    const lastLeftSticky = leftColumns.length > 0 ? leftColumns[leftColumns.length - 1].accessorKey : null\n    const firstRightSticky = rightColumns.length > 0 ? rightColumns[0].accessorKey : null\n\n    return (column: DataTableColumn<T>, isHeader: boolean, isSelected?: boolean) => {\n      if (!column.sticky) return { style: {}, className: \"\" }\n\n      const isLastLeft = column.accessorKey === lastLeftSticky\n      const isFirstRight = column.accessorKey === firstRightSticky\n\n      // 컬럼 너비 (px 단위 문자열로 변환) - sticky는 고정 너비 필요\n      const colWidth = getColWidth(column)\n      const widthPx = `${colWidth}px`\n\n      const baseStyles: React.CSSProperties = {\n        position: \"sticky\",\n        zIndex: isHeader ? 20 : 10,\n        width: widthPx,\n        minWidth: widthPx,\n        maxWidth: widthPx,\n      }\n\n      if (column.sticky === \"left\") {\n        const leftPos = leftPositions.get(column.accessorKey) ?? 0\n        return {\n          style: {\n            ...baseStyles,\n            left: `${leftPos}px`,\n          },\n          // 헤더: hover 없음, 바디: 행 단위 hover (group-hover), 스티키는 다른 배경색\n          className: cn(\n            \"transition-colors\",\n            isHeader\n              ? \"bg-[#eaedf1] dark:bg-slate-800\"\n              : isSelected\n                ? \"bg-blue-50 dark:bg-blue-950/30\"\n                : \"bg-slate-50 dark:bg-slate-800 group-hover:bg-slate-100 dark:group-hover:bg-slate-700\",\n            isLastLeft && \"shadow-[2px_0_4px_rgba(0,0,0,0.08)]\"\n          ),\n        }\n      }\n\n      const rightPos = rightPositions.get(column.accessorKey) ?? 0\n      return {\n        style: {\n          ...baseStyles,\n          right: `${rightPos}px`,\n        },\n        className: cn(\n          \"transition-colors\",\n          isHeader\n            ? \"bg-[#eaedf1] dark:bg-slate-800\"\n            : isSelected\n              ? \"bg-blue-50 dark:bg-blue-950/30\"\n              : \"bg-slate-50 dark:bg-slate-800 group-hover:bg-slate-100 dark:group-hover:bg-slate-700\",\n          isFirstRight && \"shadow-[-2px_0_4px_rgba(0,0,0,0.08)]\"\n        ),\n      }\n    }\n  }, [columns, selectable, expandable])\n\n  // 체크박스/확장 컬럼도 sticky로 만들기 (왼쪽 고정 컬럼이 있을 때)\n  const hasLeftStickyColumns = columns.some((col) => col.sticky === \"left\")\n\n  // 컬럼 너비 가져오기 (제어/비제어 컴포넌트 통합)\n  const getColumnWidth = React.useCallback(\n    (column: DataTableColumn<T>): number | undefined => {\n      const key = String(column.accessorKey)\n      // 제어 컴포넌트\n      if (columnWidths && key in columnWidths) {\n        return columnWidths[key]\n      }\n      // 비제어 컴포넌트\n      if (key in internalColumnWidths) {\n        return internalColumnWidths[key]\n      }\n      // 초기값: column.width 또는 undefined\n      if (column.width) {\n        return typeof column.width === \"number\" ? column.width : parseInt(column.width, 10)\n      }\n      return undefined\n    },\n    [columnWidths, internalColumnWidths]\n  )\n\n  // 리사이즈 핸들러\n  const handleResizeStart = React.useCallback(\n    (e: React.MouseEvent, column: DataTableColumn<T>) => {\n      e.preventDefault()\n      e.stopPropagation()\n      setResizingColumn(column.accessorKey)\n      resizeStartX.current = e.clientX\n      const currentWidth = getColumnWidth(column) ?? 150\n      resizeStartWidth.current = currentWidth\n    },\n    [getColumnWidth]\n  )\n\n  const handleResizeMove = React.useCallback(\n    (e: MouseEvent) => {\n      if (!resizingColumn) return\n      const delta = e.clientX - resizeStartX.current\n      const newWidth = Math.max(50, resizeStartWidth.current + delta) // 최소 50px\n      const key = String(resizingColumn)\n\n      if (onColumnResize) {\n        onColumnResize(resizingColumn, newWidth)\n      } else {\n        setInternalColumnWidths((prev) => ({ ...prev, [key]: newWidth }))\n      }\n    },\n    [resizingColumn, onColumnResize]\n  )\n\n  const handleResizeEnd = React.useCallback(() => {\n    setResizingColumn(null)\n  }, [])\n\n  // 전역 마우스 이벤트 등록 (리사이징 중)\n  React.useEffect(() => {\n    if (!resizingColumn) return\n\n    document.addEventListener(\"mousemove\", handleResizeMove)\n    document.addEventListener(\"mouseup\", handleResizeEnd)\n    // 드래그 중 텍스트 선택 방지\n    document.body.style.userSelect = \"none\"\n    document.body.style.cursor = \"col-resize\"\n\n    return () => {\n      document.removeEventListener(\"mousemove\", handleResizeMove)\n      document.removeEventListener(\"mouseup\", handleResizeEnd)\n      document.body.style.userSelect = \"\"\n      document.body.style.cursor = \"\"\n    }\n  }, [resizingColumn, handleResizeMove, handleResizeEnd])\n\n  // 컬럼 헤더 렌더링 함수\n  const renderColumnHeader = (column: DataTableColumn<T>) => {\n    const stickyData = getStickyStyles(column, true)\n    const toPx = (v: string | number) => typeof v === \"number\" ? `${v}px` : v\n    const baseStyle: React.CSSProperties = {}\n    if (!column.sticky) {\n      const resizedWidth = resizable ? getColumnWidth(column) : undefined\n      if (resizedWidth !== undefined) {\n        baseStyle.width = `${resizedWidth}px`\n        baseStyle.minWidth = `${resizedWidth}px`\n      } else {\n        if (column.width) baseStyle.width = toPx(column.width)\n        if (column.minWidth) baseStyle.minWidth = toPx(column.minWidth)\n      }\n    }\n    const style = { ...baseStyle, ...stickyData.style }\n\n    // 리사이즈 핸들 컴포넌트\n    const resizeHandle = resizable && (\n      <div\n        className={cn(\n          \"absolute top-0 h-full w-[9px] cursor-col-resize opacity-0 hover:opacity-100 transition-opacity z-30\",\n          resizingColumn === column.accessorKey && \"opacity-100\"\n        )}\n        style={{\n          right: \"-4px\",\n          background: \"linear-gradient(to right, transparent, rgba(148,163,184,0.5) 50%, transparent)\"\n        }}\n        onMouseDown={(e) => handleResizeStart(e, column)}\n        onPointerDown={(e) => e.stopPropagation()}\n        onClick={(e) => e.stopPropagation()}\n      />\n    )\n\n    // 드래그 가능 여부 (sticky 컬럼은 드래그 불가)\n    const isDraggable = columnReorderable && !column.sticky && !column.sortable\n\n    if (isDraggable) {\n      return (\n        <SortableHeaderCell\n          key={String(column.accessorKey)}\n          id={String(column.accessorKey)}\n          style={style}\n          className={cn(getAlignClass(column.align), stickyData.className, resizable && \"relative overflow-visible\")}\n        >\n          {column.header}\n          {resizeHandle}\n        </SortableHeaderCell>\n      )\n    }\n\n    if (column.sortable) {\n      return (\n        <TableSortableHead\n          key={String(column.accessorKey)}\n          sortDirection={getSortDirection(column.accessorKey)}\n          onSort={() => handleSort(column.accessorKey)}\n          style={style}\n          className={cn(getAlignClass(column.align), stickyData.className, resizable && \"relative overflow-visible\")}\n        >\n          {column.header}\n          {resizeHandle}\n        </TableSortableHead>\n      )\n    }\n\n    return (\n      <TableHead\n        key={String(column.accessorKey)}\n        style={style}\n        className={cn(getAlignClass(column.align), stickyData.className, resizable && \"relative overflow-visible\")}\n      >\n        {column.header}\n        {resizeHandle}\n      </TableHead>\n    )\n  }\n\n  const columnsToRender = columnReorderable ? orderedColumns : columns\n  const columnIds = columnsToRender.filter(col => !col.sticky).map(col => String(col.accessorKey))\n\n  const tableContent = (\n    <Table className={className} maxHeight={maxHeight}>\n      <TableHeader>\n        <TableRow>\n          {selectable && (\n            <TableHead\n              className=\"!p-0 bg-[#eaedf1] dark:bg-slate-800\"\n              style={hasLeftStickyColumns ? {\n                position: \"sticky\",\n                left: 0,\n                zIndex: 20,\n                width: `${CHECKBOX_WIDTH}px`,\n                minWidth: `${CHECKBOX_WIDTH}px`,\n                maxWidth: `${CHECKBOX_WIDTH}px`,\n              } : {\n                width: `${CHECKBOX_WIDTH}px`,\n                minWidth: `${CHECKBOX_WIDTH}px`,\n                maxWidth: `${CHECKBOX_WIDTH}px`,\n              }}\n            >\n              <div className=\"flex items-center justify-center h-9\">\n                <Checkbox\n                  checked={isAllSelected}\n                  indeterminate={isIndeterminate}\n                  onCheckedChange={handleSelectAll}\n                  aria-label=\"전체 선택\"\n                />\n              </div>\n            </TableHead>\n          )}\n\n          {expandable && (\n            <TableHead\n              className=\"bg-[#eaedf1] dark:bg-slate-800\"\n              style={hasLeftStickyColumns ? {\n                position: \"sticky\",\n                left: selectable ? CHECKBOX_WIDTH : 0,\n                zIndex: 20,\n                width: `${EXPAND_WIDTH}px`,\n                minWidth: `${EXPAND_WIDTH}px`,\n                maxWidth: `${EXPAND_WIDTH}px`,\n              } : {\n                width: `${EXPAND_WIDTH}px`,\n                minWidth: `${EXPAND_WIDTH}px`,\n                maxWidth: `${EXPAND_WIDTH}px`,\n              }}\n              aria-label=\"확장\"\n            >\n              <span className=\"sr-only\">확장</span>\n            </TableHead>\n          )}\n\n          {columnReorderable ? (\n            <SortableContext items={columnIds} strategy={horizontalListSortingStrategy}>\n              {columnsToRender.map(renderColumnHeader)}\n            </SortableContext>\n          ) : (\n            columnsToRender.map(renderColumnHeader)\n          )}\n        </TableRow>\n      </TableHeader>\n\n      <TableBody>\n        {data.length === 0 ? (\n          <TableRow>\n            <TableCell\n              colSpan={totalColumns}\n              className=\"h-24 text-center text-slate-500\"\n            >\n              {emptyMessage}\n            </TableCell>\n          </TableRow>\n        ) : (\n          data.map((row) => {\n            const isSelected = selectedIds.includes(row.id)\n            const canExpand = isRowExpandable(row)\n            const isExpanded = isRowExpanded(row.id)\n\n            return (\n              <React.Fragment key={row.id}>\n                <TableRow\n                  data-state={isSelected ? \"selected\" : undefined}\n                  className={cn(\n                    onRowClick && \"cursor-pointer\",\n                    rowClassName?.(row)\n                  )}\n                  onClick={() => onRowClick?.(row)}\n                >\n                  {selectable && (\n                    <TableCell\n                      onClick={(e) => e.stopPropagation()}\n                      className={cn(\n                        \"!p-0\",\n                        hasLeftStickyColumns && (isSelected ? \"transition-colors bg-blue-50 dark:bg-blue-950/30\" : \"transition-colors bg-slate-50 dark:bg-slate-800 group-hover:bg-slate-100 dark:group-hover:bg-slate-700\")\n                      )}\n                      style={hasLeftStickyColumns ? {\n                        position: \"sticky\",\n                        left: 0,\n                        zIndex: 10,\n                        width: `${CHECKBOX_WIDTH}px`,\n                        minWidth: `${CHECKBOX_WIDTH}px`,\n                        maxWidth: `${CHECKBOX_WIDTH}px`,\n                      } : {\n                        width: `${CHECKBOX_WIDTH}px`,\n                        minWidth: `${CHECKBOX_WIDTH}px`,\n                        maxWidth: `${CHECKBOX_WIDTH}px`,\n                      }}\n                    >\n                      <div className=\"flex items-center justify-center h-9\">\n                        <Checkbox\n                          checked={isSelected}\n                          onCheckedChange={() => handleSelectRow(row.id)}\n                          aria-label={`행 ${row.id} 선택`}\n                        />\n                      </div>\n                    </TableCell>\n                  )}\n\n                  {expandable && (\n                    <TableCell\n                      className={cn(\n                        \"p-0\",\n                        hasLeftStickyColumns && (isSelected ? \"transition-colors bg-blue-50 dark:bg-blue-950/30\" : \"transition-colors bg-slate-50 dark:bg-slate-800 group-hover:bg-slate-100 dark:group-hover:bg-slate-700\")\n                      )}\n                      style={hasLeftStickyColumns ? {\n                        position: \"sticky\",\n                        left: selectable ? CHECKBOX_WIDTH : 0,\n                        zIndex: 10,\n                        width: `${EXPAND_WIDTH}px`,\n                        minWidth: `${EXPAND_WIDTH}px`,\n                        maxWidth: `${EXPAND_WIDTH}px`,\n                      } : {\n                        width: `${EXPAND_WIDTH}px`,\n                        minWidth: `${EXPAND_WIDTH}px`,\n                        maxWidth: `${EXPAND_WIDTH}px`,\n                      }}\n                      onClick={(e) => e.stopPropagation()}\n                    >\n                      {canExpand && (\n                        <button\n                          type=\"button\"\n                          onClick={() => toggleRowExpanded(row.id)}\n                          className=\"flex h-9 w-10 items-center justify-center text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors\"\n                          aria-label={isExpanded ? \"행 접기\" : \"행 펼치기\"}\n                          aria-expanded={isExpanded}\n                        >\n                          {isExpanded ? (\n                            <DownIcon size={24} />\n                          ) : (\n                            <RightIcon size={24} />\n                          )}\n                        </button>\n                      )}\n                    </TableCell>\n                  )}\n\n                {columnsToRender.map((column) => {\n                  const value = row[column.accessorKey]\n                  const cellIsEditing = isEditing(row.id, column.accessorKey)\n                  const stickyData = getStickyStyles(column, false, isSelected)\n\n                  // 바디 셀 너비 계산 (헤더와 동일한 로직)\n                  const toPx = (v: string | number) => typeof v === \"number\" ? `${v}px` : v\n                  const bodyCellStyle: React.CSSProperties = {}\n                  if (!column.sticky) {\n                    const resizedWidth = resizable ? getColumnWidth(column) : undefined\n                    if (resizedWidth !== undefined) {\n                      bodyCellStyle.width = `${resizedWidth}px`\n                      bodyCellStyle.minWidth = `${resizedWidth}px`\n                    } else {\n                      if (column.width) bodyCellStyle.width = toPx(column.width)\n                      if (column.minWidth) bodyCellStyle.minWidth = toPx(column.minWidth)\n                    }\n                  }\n                  const cellStyle = { ...bodyCellStyle, ...stickyData.style }\n\n                  if (cellIsEditing && column.editable) {\n                    const EditComponent = column.editComponent || DefaultEditComponent\n\n                    return (\n                      <TableCell\n                        ref={editingCellRef}\n                        key={String(column.accessorKey)}\n                        className={cn(getAlignClass(column.align), \"p-1\", stickyData.className)}\n                        style={cellStyle}\n                        onClick={(e) => e.stopPropagation()}\n                      >\n                        <EditComponent\n                          value={editValue as T[keyof T]}\n                          onChange={(newValue) => {\n                            setEditValue(newValue)\n                            // stale closure 방지\n                            editValueRef.current = newValue\n                            if (editingCell?.error) {\n                              setEditingCell({ ...editingCell, error: undefined })\n                            }\n                          }}\n                          onComplete={() => completeEditing(column, row)}\n                          onCancel={cancelEditing}\n                          row={row}\n                          error={editingCell?.error}\n                        />\n                      </TableCell>\n                    )\n                  }\n\n                  const content = column.cell\n                    ? column.cell(value, row)\n                    : String(value ?? \"\")\n\n                  if (column.editable && onCellChange) {\n                    return (\n                      <TableCell\n                        key={String(column.accessorKey)}\n                        className={cn(\n                          getAlignClass(column.align),\n                          \"cursor-text hover:bg-blue-100 dark:hover:bg-blue-800\",\n                          stickyData.className\n                        )}\n                        style={cellStyle}\n                        onClick={(e) => {\n                          e.stopPropagation()\n                          // 이전 셀의 blur 처리가 먼저 완료되어야 함\n                          setTimeout(() => {\n                            startEditing(row.id, column.accessorKey, value)\n                          }, 0)\n                        }}\n                      >\n                        {content}\n                      </TableCell>\n                    )\n                  }\n\n                  return (\n                    <TableCell\n                      key={String(column.accessorKey)}\n                      className={cn(getAlignClass(column.align), stickyData.className)}\n                      style={cellStyle}\n                    >\n                      {content}\n                    </TableCell>\n                  )\n                })}\n                </TableRow>\n\n                {expandable && isExpanded && (\n                  <TableRow className=\"bg-white dark:bg-slate-800/50 hover:bg-white dark:hover:bg-slate-800/50\">\n                    <TableCell\n                      colSpan={totalColumns}\n                      className=\"p-4\"\n                    >\n                      {expandable.expandedRowRender(row)}\n                    </TableCell>\n                  </TableRow>\n                )}\n              </React.Fragment>\n            )\n          })\n        )}\n      </TableBody>\n    </Table>\n  )\n\n  if (columnReorderable) {\n    return (\n      <DndContext\n        sensors={sensors}\n        collisionDetection={closestCenter}\n        onDragEnd={handleDragEnd}\n      >\n        {tableContent}\n      </DndContext>\n    )\n  }\n\n  return tableContent\n}\n\nexport { DataTable }\n"],"names":["DefaultEditComponent","value","onChange","onComplete","onCancel","error","inputRef","React","_a","_b","handleKeyDown","e","jsxs","jsx","Input","SortableHeaderCell","id","children","className","style","disabled","attributes","listeners","setNodeRef","transform","transition","isDragging","useSortable","dragStyle","CSS","cn","DragHandleIcon","DataTable","columns","data","selectable","selectedIds","onSelectionChange","sortState","onSortChange","onRowClick","onCellChange","expandable","emptyMessage","rowClassName","maxHeight","resizable","columnWidths","onColumnResize","columnReorderable","columnOrder","onColumnReorder","editingCell","setEditingCell","editValue","setEditValue","editValueRef","editingCellRef","internalExpandedIds","setInternalExpandedIds","internalColumnWidths","setInternalColumnWidths","resizingColumn","setResizingColumn","resizeStartX","resizeStartWidth","internalColumnOrder","setInternalColumnOrder","col","currentColumnOrder","orderedColumns","key","sensors","useSensors","useSensor","PointerSensor","KeyboardSensor","sortableKeyboardCoordinates","handleDragEnd","event","active","over","oldIndex","newIndex","newOrder","arrayMove","expandedRowIds","setExpandedRowIds","isAllSelected","isIndeterminate","handleSelectAll","row","handleSelectRow","i","handleSort","column","getSortDirection","getAlignClass","align","startEditing","rowId","columnKey","currentValue","completeEditing","result","cancelEditing","handleClickOutside","target","isEditing","isRowExpandable","isRowExpanded","toggleRowExpanded","totalColumns","CHECKBOX_WIDTH","EXPAND_WIDTH","getStickyStyles","getColWidth","w","leftColumns","rightColumns","baseLeftOffset","leftPositions","currentLeft","rightPositions","currentRight","lastLeftSticky","firstRightSticky","isHeader","isSelected","isLastLeft","isFirstRight","widthPx","baseStyles","leftPos","rightPos","hasLeftStickyColumns","getColumnWidth","handleResizeStart","currentWidth","handleResizeMove","delta","newWidth","prev","handleResizeEnd","renderColumnHeader","stickyData","toPx","v","baseStyle","resizedWidth","resizeHandle","TableSortableHead","TableHead","columnsToRender","columnIds","tableContent","Table","TableHeader","TableRow","Checkbox","SortableContext","horizontalListSortingStrategy","TableBody","TableCell","canExpand","isExpanded","DownIcon","RightIcon","cellIsEditing","bodyCellStyle","cellStyle","EditComponent","newValue","content","DndContext","closestCenter"],"mappings":"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"}