{"version":3,"file":"date-picker.mjs","sources":["../../../src/components/ui/date-picker.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport { format, parse, isValid } from \"date-fns\";\n\nimport { cn } from \"@/lib/utils\";\nimport { InputField, type InputSize } from \"@/components/ui/input\";\nimport { Calendar } from \"@/components/ui/calendar\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { CalendarIcon } from \"@/icons\";\n\nexport interface DatePickerProps {\n  /** 선택된 날짜 */\n  value?: Date;\n  /** 날짜 변경 핸들러 */\n  onChange?: (date: Date | undefined) => void;\n  /** 라벨 텍스트 */\n  label?: string;\n  /** placeholder 텍스트 */\n  placeholder?: string;\n  /** 날짜 포맷 (기본: yyyy-MM-dd) */\n  dateFormat?: string;\n  /** 에러 상태 */\n  error?: boolean;\n  /** 에러 메시지 */\n  errorMessage?: string;\n  /** 너비 크기 */\n  size?: InputSize;\n  /** 비활성화 */\n  disabled?: boolean;\n  /** 추가 className */\n  className?: string;\n  /** 라벨이 없어도 라벨 공간 유지 */\n  reserveLabelSpace?: boolean;\n  /** 필수 입력 표시 (라벨 앞에 점 표시) */\n  required?: boolean;\n}\n\nconst DatePicker = ({\n  value,\n  onChange,\n  label,\n  placeholder = \"yyyy-mm-dd\",\n  dateFormat = \"yyyy-MM-dd\",\n  error,\n  errorMessage,\n  size = \"md\",\n  disabled,\n  className,\n  reserveLabelSpace,\n  required,\n}: DatePickerProps) => {\n  const [open, setOpen] = React.useState(false);\n  const [month, setMonth] = React.useState<Date>(value || new Date());\n  const [inputValue, setInputValue] = React.useState(\n    value ? format(value, dateFormat) : \"\"\n  );\n\n  // value prop이 변경되면 inputValue 동기화\n  React.useEffect(() => {\n    setInputValue(value ? format(value, dateFormat) : \"\");\n  }, [value, dateFormat]);\n\n  // 직접 입력 처리\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newValue = e.target.value;\n    setInputValue(newValue);\n\n    // 입력값이 유효한 날짜인지 확인\n    const parsed = parse(newValue, dateFormat, new Date());\n    if (isValid(parsed) && newValue.length === dateFormat.length) {\n      onChange?.(parsed);\n    }\n  };\n\n  // 입력 완료 시 (blur) 유효성 검사\n  const handleInputBlur = () => {\n    if (!inputValue) {\n      onChange?.(undefined);\n      return;\n    }\n\n    const parsed = parse(inputValue, dateFormat, new Date());\n    if (isValid(parsed)) {\n      setInputValue(format(parsed, dateFormat));\n      onChange?.(parsed);\n    } else {\n      // 유효하지 않은 날짜면 이전 값으로 복원\n      setInputValue(value ? format(value, dateFormat) : \"\");\n    }\n  };\n\n  // 캘린더에서 날짜 선택\n  const handleCalendarSelect = (date: Date | undefined) => {\n    if (date) {\n      setInputValue(format(date, dateFormat));\n      onChange?.(date);\n    }\n    setOpen(false);\n  };\n\n  // 팝오버 열림/닫힘 처리\n  const handleOpenChange = (isOpen: boolean) => {\n    setOpen(isOpen);\n    if (isOpen) {\n      // 선택된 날짜가 있으면 해당 월로 캘린더 이동\n      setMonth(value || new Date());\n    }\n  };\n\n  return (\n    <Popover open={open} onOpenChange={handleOpenChange}>\n      <PopoverTrigger asChild disabled={disabled}>\n        <div role=\"combobox\" aria-haspopup=\"dialog\" className={cn(\"inline-block\", className)}>\n          <InputField\n            label={label}\n            value={inputValue}\n            onChange={handleInputChange}\n            onBlur={handleInputBlur}\n            placeholder={placeholder}\n            error={error}\n            errorMessage={errorMessage}\n            size={size}\n            disabled={disabled}\n            autoComplete=\"off\"\n            rightIcon={<CalendarIcon size={24} />}\n            onRightIconClick={() => !disabled && setOpen(true)}\n            reserveLabelSpace={reserveLabelSpace}\n            required={required}\n          />\n        </div>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-auto border-0 bg-transparent p-0 shadow-none\" align=\"start\">\n        <Calendar\n          mode=\"single\"\n          selected={value}\n          onSelect={handleCalendarSelect}\n          month={month}\n          onMonthChange={setMonth}\n          initialFocus\n        />\n      </PopoverContent>\n    </Popover>\n  );\n};\n\nexport { DatePicker };\n"],"names":["DatePicker","value","onChange","label","placeholder","dateFormat","error","errorMessage","size","disabled","className","reserveLabelSpace","required","open","setOpen","React","month","setMonth","inputValue","setInputValue","format","handleInputChange","e","newValue","parsed","parse","isValid","handleInputBlur","handleCalendarSelect","date","jsxs","Popover","isOpen","jsx","PopoverTrigger","cn","InputField","CalendarIcon","PopoverContent","Calendar"],"mappings":"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"}