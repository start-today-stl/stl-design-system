"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const u=require("react/jsx-runtime"),N=require("react"),o=require("date-fns"),_=require("../../lib/utils.cjs"),z=require("./input.cjs"),B=require("./calendar.cjs"),I=require("./popover.cjs"),E=require("../../icons/CalenderIcon.cjs");function v(s){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(s){for(const l in s)if(l!=="default"){const m=Object.getOwnPropertyDescriptor(s,l);Object.defineProperty(e,l,m.get?m:{enumerable:!0,get:()=>s[l]})}}return e.default=s,Object.freeze(e)}const f=v(N),A=({value:s,onChange:e,label:l,placeholder:m="yyyy-mm-dd - yyyy-mm-dd",dateFormat:i="yyyy-MM-dd",error:P,errorMessage:S,size:q="lg",disabled:w,className:V})=>{const[b,y]=f.useState(!1),c=f.useRef(0),[D,j]=f.useState(s);f.useEffect(()=>{b||j(s)},[s,b]);const[k,O]=f.useState(new Date),d=t=>{if(!t)return"";const r=t.from?o.format(t.from,i):"",n=t.to?o.format(t.to,i):"";return r&&n?`${r} - ${n}`:r?`${r} - `:""},[R,p]=f.useState(d(s));f.useEffect(()=>{p(d(s))},[s,i]);const M=t=>{const r=t.target.value;p(r);const n=r.split(" - ");if(n.length===2){const a=o.parse(n[0].trim(),i,new Date),x=o.parse(n[1].trim(),i,new Date);o.isValid(a)&&o.isValid(x)&&(e==null||e({from:a,to:x}))}},T=()=>{if(!R){e==null||e(void 0);return}const t=R.split(" - ");if(t.length===2){const r=o.parse(t[0].trim(),i,new Date),n=o.parse(t[1].trim(),i,new Date);if(o.isValid(r)&&o.isValid(n)){p(`${o.format(r,i)} - ${o.format(n,i)}`),e==null||e({from:r,to:n});return}}p(d(s))},$=t=>{if(c.current+=1,c.current===1){const r={from:t,to:void 0};j(r),p(d(r)),e==null||e(r)}else{const r=(D==null?void 0:D.from)||t,n=t,a=r.getTime()<=n.getTime()?{from:r,to:n}:{from:n,to:r};j(a),p(d(a)),e==null||e(a),c.current=0,y(!1)}},g=t=>{t?(y(!0),c.current=0,j(s),s!=null&&s.from?O(s.from):O(new Date)):c.current===0&&y(!1)};return u.jsxs(I.Popover,{open:b,onOpenChange:g,children:[u.jsx(I.PopoverTrigger,{asChild:!0,disabled:w,children:u.jsx("div",{role:"combobox","aria-haspopup":"dialog",className:_.cn("inline-block",V),children:u.jsx(z.InputField,{label:l,value:R,onChange:M,onBlur:T,placeholder:m,error:P,errorMessage:S,size:q,disabled:w,rightIcon:u.jsx(E.CalenderIcon,{size:24}),onRightIconClick:()=>!w&&y(!0)})})}),u.jsx(I.PopoverContent,{className:"w-auto border-0 bg-transparent p-0 shadow-none",align:"start",onPointerDownOutside:t=>{c.current>0&&t.preventDefault()},onInteractOutside:t=>{c.current>0&&t.preventDefault()},children:u.jsx(B.Calendar,{mode:"range",selected:D,onSelect:()=>{},onDayClick:$,month:k,onMonthChange:O,initialFocus:!0})})]})};exports.DateRangePicker=A;
//# sourceMappingURL=date-range-picker.cjs.map
