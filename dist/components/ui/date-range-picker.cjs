"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const u=require("react/jsx-runtime"),_=require("react"),o=require("date-fns"),z=require("../../lib/utils.cjs"),B=require("./input.cjs"),E=require("./calendar.cjs"),I=require("./popover.cjs"),v=require("../../icons/CalendarIcon.cjs");function A(s){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(s){for(const l in s)if(l!=="default"){const d=Object.getOwnPropertyDescriptor(s,l);Object.defineProperty(e,l,d.get?d:{enumerable:!0,get:()=>s[l]})}}return e.default=s,Object.freeze(e)}const f=A(_),G=({value:s,onChange:e,label:l,placeholder:d="yyyy-mm-dd - yyyy-mm-dd",dateFormat:i="yyyy-MM-dd",error:P,errorMessage:S,size:q="lg",disabled:w,className:V,reserveLabelSpace:k})=>{const[b,y]=f.useState(!1),c=f.useRef(0),[D,j]=f.useState(s);f.useEffect(()=>{b||j(s)},[s,b]);const[M,O]=f.useState(new Date),m=t=>{if(!t)return"";const r=t.from?o.format(t.from,i):"",n=t.to?o.format(t.to,i):"";return r&&n?`${r} - ${n}`:r?`${r} - `:""},[R,a]=f.useState(m(s));f.useEffect(()=>{a(m(s))},[s,i]);const T=t=>{const r=t.target.value;a(r);const n=r.split(" - ");if(n.length===2){const p=o.parse(n[0].trim(),i,new Date),x=o.parse(n[1].trim(),i,new Date);o.isValid(p)&&o.isValid(x)&&(e==null||e({from:p,to:x}))}},$=()=>{if(!R){e==null||e(void 0);return}const t=R.split(" - ");if(t.length===2){const r=o.parse(t[0].trim(),i,new Date),n=o.parse(t[1].trim(),i,new Date);if(o.isValid(r)&&o.isValid(n)){a(`${o.format(r,i)} - ${o.format(n,i)}`),e==null||e({from:r,to:n});return}}a(m(s))},g=t=>{if(c.current+=1,c.current===1){const r={from:t,to:void 0};j(r),a(m(r)),e==null||e(r)}else{const r=(D==null?void 0:D.from)||t,n=t,p=r.getTime()<=n.getTime()?{from:r,to:n}:{from:n,to:r};j(p),a(m(p)),e==null||e(p),c.current=0,y(!1)}},N=t=>{t?(y(!0),c.current=0,j(s),s!=null&&s.from?O(s.from):O(new Date)):c.current===0&&y(!1)};return u.jsxs(I.Popover,{open:b,onOpenChange:N,children:[u.jsx(I.PopoverTrigger,{asChild:!0,disabled:w,children:u.jsx("div",{role:"combobox","aria-haspopup":"dialog",className:z.cn("inline-block",V),children:u.jsx(B.InputField,{label:l,value:R,onChange:T,onBlur:$,placeholder:d,error:P,errorMessage:S,size:q,disabled:w,autoComplete:"off",rightIcon:u.jsx(v.CalendarIcon,{size:24}),onRightIconClick:()=>!w&&y(!0),reserveLabelSpace:k})})}),u.jsx(I.PopoverContent,{className:"w-auto border-0 bg-transparent p-0 shadow-none",align:"start",onPointerDownOutside:t=>{c.current>0&&t.preventDefault()},onInteractOutside:t=>{c.current>0&&t.preventDefault()},children:u.jsx(E.Calendar,{mode:"range",selected:D,onSelect:()=>{},onDayClick:g,month:M,onMonthChange:O,initialFocus:!0})})]})};exports.DateRangePicker=G;
//# sourceMappingURL=date-range-picker.cjs.map
