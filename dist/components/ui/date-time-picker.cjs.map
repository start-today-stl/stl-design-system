{"version":3,"file":"date-time-picker.cjs","sources":["../../../src/components/ui/date-time-picker.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport { format, parse, isValid, setHours, setMinutes, setSeconds } from \"date-fns\";\nimport { cn } from \"@/lib/utils\";\nimport { InputField, type InputSize } from \"@/components/ui/input\";\nimport { Calendar } from \"@/components/ui/calendar\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { CalenderIcon, DirectionIcon } from \"@/icons\";\n\n/** 시간 스피너 컴포넌트 */\ninterface TimeSpinnerProps {\n  value: number;\n  onChange: (value: number) => void;\n  max: number;\n  disabled?: boolean;\n}\n\nconst TimeSpinner = ({ value, onChange, max, disabled }: TimeSpinnerProps) => {\n  const increment = () => {\n    onChange(value >= max ? 0 : value + 1);\n  };\n\n  const decrement = () => {\n    onChange(value <= 0 ? max : value - 1);\n  };\n\n  return (\n    <div className=\"flex flex-col items-center gap-1\">\n      <button\n        type=\"button\"\n        onClick={increment}\n        disabled={disabled}\n        className=\"flex size-[10px] cursor-pointer items-center justify-center text-gray-200 hover:text-gray-400 disabled:cursor-not-allowed disabled:opacity-50\"\n      >\n        <DirectionIcon size={10} className=\"rotate-180\" />\n      </button>\n      <div className=\"flex h-[23px] w-[34px] items-center justify-center rounded-[2px] p-[5px]\">\n        <span className=\"text-xs font-normal tabular-nums text-gray-500 tracking-[-0.18px] dark:text-gray-300\">\n          {value.toString().padStart(2, \"0\")}\n        </span>\n      </div>\n      <button\n        type=\"button\"\n        onClick={decrement}\n        disabled={disabled}\n        className=\"flex size-[10px] cursor-pointer items-center justify-center text-gray-200 hover:text-gray-400 disabled:cursor-not-allowed disabled:opacity-50\"\n      >\n        <DirectionIcon size={10} />\n      </button>\n    </div>\n  );\n};\n\nexport interface DateTimePickerProps {\n  /** 선택된 날짜/시간 */\n  value?: Date;\n  /** 날짜/시간 변경 핸들러 */\n  onChange?: (date: Date | undefined) => void;\n  /** 라벨 텍스트 */\n  label?: string;\n  /** placeholder 텍스트 */\n  placeholder?: string;\n  /** 날짜/시간 포맷 (기본: yyyy-MM-dd HH:mm:ss) */\n  dateFormat?: string;\n  /** 에러 상태 */\n  error?: boolean;\n  /** 에러 메시지 */\n  errorMessage?: string;\n  /** 너비 크기 */\n  size?: InputSize;\n  /** 비활성화 */\n  disabled?: boolean;\n  /** 추가 className */\n  className?: string;\n}\n\nconst DateTimePicker = ({\n  value,\n  onChange,\n  label,\n  placeholder = \"yyyy-mm-dd 00:00:00\",\n  dateFormat = \"yyyy-MM-dd HH:mm:ss\",\n  error,\n  errorMessage,\n  size = \"md\",\n  disabled,\n  className,\n}: DateTimePickerProps) => {\n  const [open, setOpen] = React.useState(false);\n  const [month, setMonth] = React.useState<Date>(value || new Date());\n  const [inputValue, setInputValue] = React.useState(\n    value ? format(value, dateFormat) : \"\"\n  );\n\n  // 내부 시간 상태 (캘린더에서 날짜만 선택해도 시간 유지)\n  const [hours, setHoursState] = React.useState(value?.getHours() ?? 0);\n  const [minutes, setMinutesState] = React.useState(value?.getMinutes() ?? 0);\n  const [seconds, setSecondsState] = React.useState(value?.getSeconds() ?? 0);\n\n  // value prop이 변경되면 동기화\n  React.useEffect(() => {\n    setInputValue(value ? format(value, dateFormat) : \"\");\n    if (value) {\n      setHoursState(value.getHours());\n      setMinutesState(value.getMinutes());\n      setSecondsState(value.getSeconds());\n    }\n  }, [value, dateFormat]);\n\n  // 직접 입력 처리\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newValue = e.target.value;\n    setInputValue(newValue);\n\n    const parsed = parse(newValue, dateFormat, new Date());\n    if (isValid(parsed) && newValue.length === dateFormat.length) {\n      setHoursState(parsed.getHours());\n      setMinutesState(parsed.getMinutes());\n      setSecondsState(parsed.getSeconds());\n      onChange?.(parsed);\n    }\n  };\n\n  // 입력 완료 시 유효성 검사\n  const handleInputBlur = () => {\n    if (!inputValue) {\n      onChange?.(undefined);\n      return;\n    }\n\n    const parsed = parse(inputValue, dateFormat, new Date());\n    if (isValid(parsed)) {\n      setInputValue(format(parsed, dateFormat));\n      setHoursState(parsed.getHours());\n      setMinutesState(parsed.getMinutes());\n      setSecondsState(parsed.getSeconds());\n      onChange?.(parsed);\n    } else {\n      setInputValue(value ? format(value, dateFormat) : \"\");\n    }\n  };\n\n  // 캘린더에서 날짜 선택 (시간은 유지)\n  const handleCalendarSelect = (date: Date | undefined) => {\n    if (date) {\n      let newDate = setHours(date, hours);\n      newDate = setMinutes(newDate, minutes);\n      newDate = setSeconds(newDate, seconds);\n      setInputValue(format(newDate, dateFormat));\n      onChange?.(newDate);\n    }\n  };\n\n  // 시간 변경\n  const handleHoursChange = (newHours: number) => {\n    setHoursState(newHours);\n    if (value) {\n      const newDate = setHours(value, newHours);\n      setInputValue(format(newDate, dateFormat));\n      onChange?.(newDate);\n    }\n  };\n\n  const handleMinutesChange = (newMinutes: number) => {\n    setMinutesState(newMinutes);\n    if (value) {\n      const newDate = setMinutes(value, newMinutes);\n      setInputValue(format(newDate, dateFormat));\n      onChange?.(newDate);\n    }\n  };\n\n  const handleSecondsChange = (newSeconds: number) => {\n    setSecondsState(newSeconds);\n    if (value) {\n      const newDate = setSeconds(value, newSeconds);\n      setInputValue(format(newDate, dateFormat));\n      onChange?.(newDate);\n    }\n  };\n\n  // 팝오버 열림/닫힘 처리\n  const handleOpenChange = (isOpen: boolean) => {\n    setOpen(isOpen);\n    if (isOpen) {\n      // 선택된 날짜가 있으면 해당 월로 캘린더 이동\n      setMonth(value || new Date());\n    }\n  };\n\n  return (\n    <Popover open={open} onOpenChange={handleOpenChange}>\n      <PopoverTrigger asChild disabled={disabled}>\n        <div role=\"combobox\" aria-haspopup=\"dialog\" className={cn(\"inline-block\", className)}>\n          <InputField\n            label={label}\n            value={inputValue}\n            onChange={handleInputChange}\n            onBlur={handleInputBlur}\n            placeholder={placeholder}\n            error={error}\n            errorMessage={errorMessage}\n            size={size}\n            disabled={disabled}\n            autoComplete=\"off\"\n            rightIcon={<CalenderIcon size={24} />}\n            onRightIconClick={() => !disabled && setOpen(true)}\n          />\n        </div>\n      </PopoverTrigger>\n      <PopoverContent\n        className=\"w-[260px] overflow-hidden rounded-[5px] border border-gray-100 bg-white/95 p-0 shadow-[10px_10px_10px_0px_rgba(0,0,0,0.05)] backdrop-blur-[12px] dark:border-dark-100 dark:bg-dark-500/95\"\n        align=\"start\"\n      >\n        <Calendar\n          mode=\"single\"\n          selected={value}\n          onSelect={handleCalendarSelect}\n          month={month}\n          onMonthChange={setMonth}\n          initialFocus\n          className=\"w-full border-0 bg-transparent shadow-none\"\n        />\n        {/* 시간 선택 UI */}\n        <div className=\"flex items-center justify-center px-3 pb-3 pt-1\">\n          <div className=\"flex items-center\">\n            <TimeSpinner\n              value={hours}\n              onChange={handleHoursChange}\n              max={23}\n              disabled={disabled}\n            />\n            <span className=\"flex h-[23px] w-[9px] items-center justify-center text-xs text-gray-500\">:</span>\n            <TimeSpinner\n              value={minutes}\n              onChange={handleMinutesChange}\n              max={59}\n              disabled={disabled}\n            />\n            <span className=\"flex h-[23px] w-[9px] items-center justify-center text-xs text-gray-500\">:</span>\n            <TimeSpinner\n              value={seconds}\n              onChange={handleSecondsChange}\n              max={59}\n              disabled={disabled}\n            />\n          </div>\n        </div>\n      </PopoverContent>\n    </Popover>\n  );\n};\n\nexport { DateTimePicker, TimeSpinner };\n"],"names":["TimeSpinner","value","onChange","max","disabled","increment","decrement","jsxs","jsx","DirectionIcon","DateTimePicker","label","placeholder","dateFormat","error","errorMessage","size","className","open","setOpen","React","month","setMonth","inputValue","setInputValue","format","hours","setHoursState","minutes","setMinutesState","seconds","setSecondsState","handleInputChange","e","newValue","parsed","parse","isValid","handleInputBlur","handleCalendarSelect","date","newDate","setHours","setMinutes","setSeconds","handleHoursChange","newHours","handleMinutesChange","newMinutes","handleSecondsChange","newSeconds","handleOpenChange","isOpen","Popover","PopoverTrigger","cn","InputField","CalenderIcon","PopoverContent","Calendar"],"mappings":"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"}