{"version":3,"file":"date-time-picker.mjs","sources":["../../../src/components/ui/date-time-picker.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport { format, parse, isValid, setHours, setMinutes, setSeconds } from \"date-fns\";\nimport { cn } from \"@/lib/utils\";\nimport { InputField, type InputSize } from \"@/components/ui/input\";\nimport { Calendar } from \"@/components/ui/calendar\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { CalendarIcon, UpIcon, DownIcon } from \"@/icons\";\n\n/** 시간 스피너 컴포넌트 */\ninterface TimeSpinnerProps {\n  value: number;\n  onChange: (value: number) => void;\n  max: number;\n  disabled?: boolean;\n}\n\nconst TimeSpinner = ({ value, onChange, max, disabled }: TimeSpinnerProps) => {\n  const increment = () => {\n    onChange(value >= max ? 0 : value + 1);\n  };\n\n  const decrement = () => {\n    onChange(value <= 0 ? max : value - 1);\n  };\n\n  return (\n    <div className=\"flex flex-col items-center gap-0.5\">\n      <button\n        type=\"button\"\n        onClick={increment}\n        disabled={disabled}\n        className=\"flex size-5 cursor-pointer items-center justify-center text-slate-400 hover:text-slate-600 disabled:cursor-not-allowed disabled:opacity-50 dark:text-slate-400 dark:hover:text-slate-200\"\n      >\n        <UpIcon size={20} />\n      </button>\n      <div className=\"flex h-[23px] w-[34px] items-center justify-center rounded-[2px] p-[5px]\">\n        <span className=\"text-xs font-normal tabular-nums text-slate-500 tracking-[-0.18px] dark:text-slate-300\">\n          {value.toString().padStart(2, \"0\")}\n        </span>\n      </div>\n      <button\n        type=\"button\"\n        onClick={decrement}\n        disabled={disabled}\n        className=\"flex size-5 cursor-pointer items-center justify-center text-slate-400 hover:text-slate-600 disabled:cursor-not-allowed disabled:opacity-50 dark:text-slate-400 dark:hover:text-slate-200\"\n      >\n        <DownIcon size={20} />\n      </button>\n    </div>\n  );\n};\n\nexport interface DateTimePickerProps {\n  /** 선택된 날짜/시간 */\n  value?: Date;\n  /** 날짜/시간 변경 핸들러 */\n  onChange?: (date: Date | undefined) => void;\n  /** 라벨 텍스트 */\n  label?: string;\n  /** placeholder 텍스트 */\n  placeholder?: string;\n  /** 날짜/시간 포맷 (기본: yyyy-MM-dd HH:mm:ss) */\n  dateFormat?: string;\n  /** 에러 상태 */\n  error?: boolean;\n  /** 에러 메시지 */\n  errorMessage?: string;\n  /** 너비 크기 */\n  size?: InputSize;\n  /** 비활성화 */\n  disabled?: boolean;\n  /** 추가 className */\n  className?: string;\n  /** 라벨이 없어도 라벨 공간 유지 */\n  reserveLabelSpace?: boolean;\n  /** 필수 입력 표시 (라벨 앞에 점 표시) */\n  required?: boolean;\n}\n\nconst DateTimePicker = ({\n  value,\n  onChange,\n  label,\n  placeholder = \"yyyy-mm-dd 00:00:00\",\n  dateFormat = \"yyyy-MM-dd HH:mm:ss\",\n  error,\n  errorMessage,\n  size = \"md\",\n  disabled,\n  className,\n  reserveLabelSpace,\n  required,\n}: DateTimePickerProps) => {\n  const [open, setOpen] = React.useState(false);\n  const [month, setMonth] = React.useState<Date>(value || new Date());\n  const [inputValue, setInputValue] = React.useState(\n    value ? format(value, dateFormat) : \"\"\n  );\n\n  // 내부 시간 상태 (캘린더에서 날짜만 선택해도 시간 유지)\n  const [hours, setHoursState] = React.useState(value?.getHours() ?? 0);\n  const [minutes, setMinutesState] = React.useState(value?.getMinutes() ?? 0);\n  const [seconds, setSecondsState] = React.useState(value?.getSeconds() ?? 0);\n\n  // value prop이 변경되면 동기화\n  React.useEffect(() => {\n    setInputValue(value ? format(value, dateFormat) : \"\");\n    if (value) {\n      setHoursState(value.getHours());\n      setMinutesState(value.getMinutes());\n      setSecondsState(value.getSeconds());\n    }\n  }, [value, dateFormat]);\n\n  // 직접 입력 처리\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newValue = e.target.value;\n    setInputValue(newValue);\n\n    const parsed = parse(newValue, dateFormat, new Date());\n    if (isValid(parsed) && newValue.length === dateFormat.length) {\n      setHoursState(parsed.getHours());\n      setMinutesState(parsed.getMinutes());\n      setSecondsState(parsed.getSeconds());\n      onChange?.(parsed);\n    }\n  };\n\n  // 입력 완료 시 유효성 검사\n  const handleInputBlur = () => {\n    if (!inputValue) {\n      onChange?.(undefined);\n      return;\n    }\n\n    const parsed = parse(inputValue, dateFormat, new Date());\n    if (isValid(parsed)) {\n      setInputValue(format(parsed, dateFormat));\n      setHoursState(parsed.getHours());\n      setMinutesState(parsed.getMinutes());\n      setSecondsState(parsed.getSeconds());\n      onChange?.(parsed);\n    } else {\n      setInputValue(value ? format(value, dateFormat) : \"\");\n    }\n  };\n\n  // 캘린더에서 날짜 선택 (시간은 유지)\n  const handleCalendarSelect = (date: Date | undefined) => {\n    if (date) {\n      let newDate = setHours(date, hours);\n      newDate = setMinutes(newDate, minutes);\n      newDate = setSeconds(newDate, seconds);\n      setInputValue(format(newDate, dateFormat));\n      onChange?.(newDate);\n    }\n  };\n\n  // 시간 변경\n  const handleHoursChange = (newHours: number) => {\n    setHoursState(newHours);\n    if (value) {\n      const newDate = setHours(value, newHours);\n      setInputValue(format(newDate, dateFormat));\n      onChange?.(newDate);\n    }\n  };\n\n  const handleMinutesChange = (newMinutes: number) => {\n    setMinutesState(newMinutes);\n    if (value) {\n      const newDate = setMinutes(value, newMinutes);\n      setInputValue(format(newDate, dateFormat));\n      onChange?.(newDate);\n    }\n  };\n\n  const handleSecondsChange = (newSeconds: number) => {\n    setSecondsState(newSeconds);\n    if (value) {\n      const newDate = setSeconds(value, newSeconds);\n      setInputValue(format(newDate, dateFormat));\n      onChange?.(newDate);\n    }\n  };\n\n  // 팝오버 열림/닫힘 처리\n  const handleOpenChange = (isOpen: boolean) => {\n    setOpen(isOpen);\n    if (isOpen) {\n      // 선택된 날짜가 있으면 해당 월로 캘린더 이동\n      setMonth(value || new Date());\n    }\n  };\n\n  return (\n    <Popover open={open} onOpenChange={handleOpenChange}>\n      <PopoverTrigger asChild disabled={disabled}>\n        <div role=\"combobox\" aria-haspopup=\"dialog\" className={cn(\"inline-block\", className)}>\n          <InputField\n            label={label}\n            value={inputValue}\n            onChange={handleInputChange}\n            onBlur={handleInputBlur}\n            placeholder={placeholder}\n            error={error}\n            errorMessage={errorMessage}\n            size={size}\n            disabled={disabled}\n            autoComplete=\"off\"\n            rightIcon={<CalendarIcon size={24} />}\n            onRightIconClick={() => !disabled && setOpen(true)}\n            reserveLabelSpace={reserveLabelSpace}\n            required={required}\n          />\n        </div>\n      </PopoverTrigger>\n      <PopoverContent\n        className=\"w-auto border-0 bg-transparent p-0 shadow-none\"\n        align=\"start\"\n      >\n        <div className=\"w-[260px] overflow-hidden rounded-[5px] border border-slate-100 bg-white/95 shadow-[10px_10px_10px_0px_rgba(0,0,0,0.05)] backdrop-blur-[12px] dark:border-slate-600 dark:bg-slate-800/95\">\n          <Calendar\n            mode=\"single\"\n            selected={value}\n            onSelect={handleCalendarSelect}\n            month={month}\n            onMonthChange={setMonth}\n            initialFocus\n            unstyled\n            className=\"w-full p-3\"\n          />\n          {/* 시간 선택 UI */}\n          <div className=\"flex items-center justify-center px-3 pb-3 pt-1\">\n            <div className=\"flex items-center\">\n              <TimeSpinner\n                value={hours}\n                onChange={handleHoursChange}\n                max={23}\n                disabled={disabled}\n              />\n              <span className=\"flex h-[23px] w-[9px] items-center justify-center text-xs text-slate-500 dark:text-slate-300\">:</span>\n              <TimeSpinner\n                value={minutes}\n                onChange={handleMinutesChange}\n                max={59}\n                disabled={disabled}\n              />\n              <span className=\"flex h-[23px] w-[9px] items-center justify-center text-xs text-slate-500 dark:text-slate-300\">:</span>\n              <TimeSpinner\n                value={seconds}\n                onChange={handleSecondsChange}\n                max={59}\n                disabled={disabled}\n              />\n            </div>\n          </div>\n        </div>\n      </PopoverContent>\n    </Popover>\n  );\n};\n\nexport { DateTimePicker, TimeSpinner };\n"],"names":["TimeSpinner","value","onChange","max","disabled","increment","decrement","jsxs","jsx","UpIcon","DownIcon","DateTimePicker","label","placeholder","dateFormat","error","errorMessage","size","className","reserveLabelSpace","required","open","setOpen","React","month","setMonth","inputValue","setInputValue","format","hours","setHoursState","minutes","setMinutesState","seconds","setSecondsState","handleInputChange","e","newValue","parsed","parse","isValid","handleInputBlur","handleCalendarSelect","date","newDate","setHours","setMinutes","setSeconds","handleHoursChange","newHours","handleMinutesChange","newMinutes","handleSecondsChange","newSeconds","Popover","isOpen","PopoverTrigger","cn","InputField","CalendarIcon","PopoverContent","Calendar"],"mappings":"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"}