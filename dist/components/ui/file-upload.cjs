"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("react/jsx-runtime"),w=require("react"),g=require("../../lib/utils.cjs"),v=require("./input.cjs"),F=require("./button.cjs"),S=require("../../icons/UploadIcon.cjs"),I=require("../../icons/XIcon.cjs");function U(s){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(s){for(const r in s)if(r!=="default"){const l=Object.getOwnPropertyDescriptor(s,r);Object.defineProperty(e,r,l.get?l:{enumerable:!0,get:()=>s[r]})}}return e.default=s,Object.freeze(e)}const p=U(w),N=s=>{if(s===0)return"0 B";const e=1024,r=["B","KB","MB","GB"],l=Math.floor(Math.log(s)/Math.log(e));return`${parseFloat((s/Math.pow(e,l)).toFixed(1))}${r[l]}`},A=s=>s.split(",").map(e=>e.trim().split("/")[1]||e).join(", "),y=p.forwardRef(({label:s,files:e,onChange:r,maxFiles:l=1,maxSize:u=10*1024*1024,accept:o="image/*",helperText:x,error:h,errorMessage:f,size:k="full",disabled:c,className:b},M)=>{const m=p.useRef(null),q=()=>{var t;c||(t=m.current)==null||t.click()},z=t=>{const a=Array.from(t.target.files||[]);if(a.length===0)return;const d=a.filter(i=>i.size<=u);if(d.length>0)if(l===1)r([d[0]]);else{const i=l-e.length,$=d.slice(0,i);r([...e,...$])}t.target.value=""},B=t=>{const a=e.filter((d,i)=>i!==t);r(a)},j=p.useMemo(()=>{if(x)return x;const t=[];return t.push(`*파일 크기 ${N(u)} 이하`),o&&o!=="*"&&t.push(`*업로드 가능한 확장자 : ${A(o)}`),t.join(`
`)},[x,u,o]),O=l===1||e.length<l,R=l===1&&e.length>0?e[0].name:"";return n.jsxs("div",{ref:M,className:g.cn("flex flex-col gap-2",v.inputSizeStyles[k],b),children:[s&&n.jsx("label",{className:"text-xs text-slate-600 dark:text-slate-50",children:s}),n.jsxs("div",{className:g.cn("flex","[&>*:first-child]:rounded-r-none","[&>*:last-child]:rounded-l-none","[&>*:not(:first-child):not(:last-child)]:rounded-none","[&>*:not(:last-child)]:border-r-0"),children:[n.jsx(v.Input,{value:R,placeholder:"",readOnly:!0,disabled:c,error:h,className:"flex-1"}),n.jsxs(F.Button,{variant:"primary",size:"default",onClick:q,disabled:c||!O,children:[n.jsx(S.UploadIcon,{size:20}),"파일 선택"]})]}),n.jsx("input",{ref:m,type:"file",accept:o,multiple:l>1,onChange:z,className:"hidden",disabled:c}),h&&f&&n.jsx("span",{className:"text-xs text-destructive dark:text-red-400",children:f}),j&&n.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 whitespace-pre-line leading-5",children:j}),l>1&&e.length>0&&n.jsx("div",{className:"flex flex-col gap-1",children:e.map((t,a)=>n.jsxs("div",{className:"flex items-center justify-between py-1",children:[n.jsxs("span",{className:"text-xs text-slate-700 dark:text-slate-300",children:[a+1,". ",t.name]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["[",N(t.size),"]"]}),n.jsx("button",{type:"button",onClick:()=>B(a),disabled:c,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 disabled:opacity-50","aria-label":`${t.name} 삭제`,children:n.jsx(I.XIcon,{size:18})})]})]},`${t.name}-${a}`))})]})});y.displayName="FileUpload";exports.FileUpload=y;
//# sourceMappingURL=file-upload.cjs.map
