"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const t=require("react/jsx-runtime"),F=require("react"),j=require("../../lib/utils.cjs"),v=require("./input.cjs"),S=require("./button.cjs"),I=require("../../icons/UploadIcon.cjs"),U=require("../../icons/XIcon.cjs");function A(n){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(n){for(const a in n)if(a!=="default"){const l=Object.getOwnPropertyDescriptor(n,a);Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>n[a]})}}return e.default=n,Object.freeze(e)}const p=A(F),N=n=>{if(n===0)return"0 B";const e=1024,a=["B","KB","MB","GB"],l=Math.floor(Math.log(n)/Math.log(e));return`${parseFloat((n/Math.pow(e,l)).toFixed(1))}${a[l]}`},_=n=>n.split(",").map(e=>e.trim().split("/")[1]||e).join(", "),y=p.forwardRef(({label:n,files:e,onChange:a,maxFiles:l=1,maxSize:u=10*1024*1024,accept:i="image/*",helperText:x,error:h,errorMessage:f,size:k="full",disabled:o,required:b,className:z},M)=>{const m=p.useRef(null),q=()=>{var s;o||(s=m.current)==null||s.click()},B=s=>{const r=Array.from(s.target.files||[]);if(r.length===0)return;const d=r.filter(c=>c.size<=u);if(d.length>0)if(l===1)a([d[0]]);else{const c=l-e.length,w=d.slice(0,c);a([...e,...w])}s.target.value=""},O=s=>{const r=e.filter((d,c)=>c!==s);a(r)},g=p.useMemo(()=>{if(x)return x;const s=[];return s.push(`*파일 크기 ${N(u)} 이하`),i&&i!=="*"&&s.push(`*업로드 가능한 확장자 : ${_(i)}`),s.join(`
`)},[x,u,i]),R=l===1||e.length<l,$=l===1&&e.length>0?e[0].name:"";return t.jsxs("div",{ref:M,className:j.cn("flex flex-col gap-2",v.inputSizeStyles[k],z),children:[n&&t.jsxs("label",{className:"flex items-center gap-1 text-xs text-slate-600 dark:text-slate-50",children:[b&&t.jsx("span",{className:"size-2 rounded-full bg-stone-400","aria-hidden":"true"}),n]}),t.jsxs("div",{className:j.cn("flex","[&>*:first-child]:rounded-r-none","[&>*:last-child]:rounded-l-none","[&>*:not(:first-child):not(:last-child)]:rounded-none","[&>*:not(:last-child)]:border-r-0"),children:[t.jsx(v.Input,{value:$,placeholder:"",readOnly:!0,disabled:o,error:h,className:"flex-1","aria-label":n||"선택된 파일"}),t.jsxs(S.Button,{variant:"primary",size:"default",onClick:q,disabled:o||!R,children:[t.jsx(I.UploadIcon,{size:20}),"파일 선택"]})]}),t.jsx("input",{ref:m,type:"file",accept:i,multiple:l>1,onChange:B,className:"hidden",disabled:o,"aria-label":n||"파일 선택"}),h&&f&&t.jsx("span",{className:"text-xs text-destructive dark:text-red-400",children:f}),g&&t.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 whitespace-pre-line leading-5",children:g}),l>1&&e.length>0&&t.jsx("div",{className:"flex flex-col gap-1",children:e.map((s,r)=>t.jsxs("div",{className:"flex items-center justify-between py-1",children:[t.jsxs("span",{className:"text-xs text-slate-700 dark:text-slate-300",children:[r+1,". ",s.name]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["[",N(s.size),"]"]}),t.jsx("button",{type:"button",onClick:()=>O(r),disabled:o,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 disabled:opacity-50","aria-label":`${s.name} 삭제`,children:t.jsx(U.XIcon,{size:18})})]})]},`${s.name}-${r}`))})]})});y.displayName="FileUpload";exports.FileUpload=y;
//# sourceMappingURL=file-upload.cjs.map
