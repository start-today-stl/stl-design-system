{"version":3,"file":"time-picker.cjs","sources":["../../../src/components/ui/time-picker.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { InputField, type InputSize } from \"@/components/ui/input\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { TimeSpinner } from \"@/components/ui/date-time-picker\";\nimport { BellIcon } from \"@/icons\";\n\nexport interface TimePickerProps {\n  /** 선택된 시간 (HH:mm:ss 형식 문자열 또는 Date) */\n  value?: string | Date;\n  /** 시간 변경 핸들러 */\n  onChange?: (time: string) => void;\n  /** 라벨 텍스트 */\n  label?: string;\n  /** placeholder 텍스트 */\n  placeholder?: string;\n  /** 에러 상태 */\n  error?: boolean;\n  /** 에러 메시지 */\n  errorMessage?: string;\n  /** 너비 크기 */\n  size?: InputSize;\n  /** 비활성화 */\n  disabled?: boolean;\n  /** 추가 className */\n  className?: string;\n  /** 라벨이 없어도 라벨 공간 유지 */\n  reserveLabelSpace?: boolean;\n  /** 초 단위 표시 여부 */\n  showSeconds?: boolean;\n}\n\nconst TimePicker = ({\n  value,\n  onChange,\n  label,\n  placeholder = \"00:00:00\",\n  error,\n  errorMessage,\n  size = \"sm\",\n  disabled,\n  className,\n  reserveLabelSpace,\n  showSeconds = true,\n}: TimePickerProps) => {\n  const [open, setOpen] = React.useState(false);\n\n  // value를 파싱하여 시/분/초 추출\n  const parseTime = (val: string | Date | undefined): { hours: number; minutes: number; seconds: number } => {\n    if (!val) return { hours: 0, minutes: 0, seconds: 0 };\n\n    if (val instanceof Date) {\n      return {\n        hours: val.getHours(),\n        minutes: val.getMinutes(),\n        seconds: val.getSeconds(),\n      };\n    }\n\n    const parts = val.split(\":\");\n    return {\n      hours: parseInt(parts[0] || \"0\", 10) || 0,\n      minutes: parseInt(parts[1] || \"0\", 10) || 0,\n      seconds: parseInt(parts[2] || \"0\", 10) || 0,\n    };\n  };\n\n  const { hours: initialHours, minutes: initialMinutes, seconds: initialSeconds } = parseTime(value);\n\n  const [hours, setHours] = React.useState(initialHours);\n  const [minutes, setMinutes] = React.useState(initialMinutes);\n  const [seconds, setSeconds] = React.useState(initialSeconds);\n\n  // value prop 변경 시 동기화\n  React.useEffect(() => {\n    const { hours: h, minutes: m, seconds: s } = parseTime(value);\n    setHours(h);\n    setMinutes(m);\n    setSeconds(s);\n  }, [value]);\n\n  // 시간 문자열 생성\n  const formatTime = (h: number, m: number, s: number): string => {\n    const hh = h.toString().padStart(2, \"0\");\n    const mm = m.toString().padStart(2, \"0\");\n    const ss = s.toString().padStart(2, \"0\");\n    return showSeconds ? `${hh}:${mm}:${ss}` : `${hh}:${mm}`;\n  };\n\n  const [inputValue, setInputValue] = React.useState(\n    value ? formatTime(initialHours, initialMinutes, initialSeconds) : \"\"\n  );\n\n  React.useEffect(() => {\n    if (value) {\n      const { hours: h, minutes: m, seconds: s } = parseTime(value);\n      setInputValue(formatTime(h, m, s));\n    } else {\n      setInputValue(\"\");\n    }\n  }, [value, showSeconds]);\n\n  // 직접 입력 처리\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newValue = e.target.value;\n    setInputValue(newValue);\n\n    // HH:mm:ss 또는 HH:mm 형식 파싱\n    const parts = newValue.split(\":\");\n    if (parts.length >= 2) {\n      const h = parseInt(parts[0], 10);\n      const m = parseInt(parts[1], 10);\n      const s = parts[2] ? parseInt(parts[2], 10) : 0;\n\n      if (!isNaN(h) && !isNaN(m) && h >= 0 && h <= 23 && m >= 0 && m <= 59 && s >= 0 && s <= 59) {\n        setHours(h);\n        setMinutes(m);\n        setSeconds(s);\n        onChange?.(formatTime(h, m, s));\n      }\n    }\n  };\n\n  // 입력 완료 시 유효성 검사\n  const handleInputBlur = () => {\n    if (!inputValue) {\n      onChange?.(\"\");\n      return;\n    }\n\n    const parts = inputValue.split(\":\");\n    if (parts.length >= 2) {\n      const h = parseInt(parts[0], 10);\n      const m = parseInt(parts[1], 10);\n      const s = parts[2] ? parseInt(parts[2], 10) : 0;\n\n      if (!isNaN(h) && !isNaN(m) && h >= 0 && h <= 23 && m >= 0 && m <= 59 && s >= 0 && s <= 59) {\n        const formatted = formatTime(h, m, s);\n        setInputValue(formatted);\n        onChange?.(formatted);\n        return;\n      }\n    }\n\n    // 유효하지 않으면 이전 값으로 복원\n    setInputValue(value ? formatTime(hours, minutes, seconds) : \"\");\n  };\n\n  // 시간 변경 핸들러\n  const handleHoursChange = (newHours: number) => {\n    setHours(newHours);\n    const formatted = formatTime(newHours, minutes, seconds);\n    setInputValue(formatted);\n    onChange?.(formatted);\n  };\n\n  const handleMinutesChange = (newMinutes: number) => {\n    setMinutes(newMinutes);\n    const formatted = formatTime(hours, newMinutes, seconds);\n    setInputValue(formatted);\n    onChange?.(formatted);\n  };\n\n  const handleSecondsChange = (newSeconds: number) => {\n    setSeconds(newSeconds);\n    const formatted = formatTime(hours, minutes, newSeconds);\n    setInputValue(formatted);\n    onChange?.(formatted);\n  };\n\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger asChild disabled={disabled}>\n        <div role=\"combobox\" aria-haspopup=\"dialog\" className={cn(\"inline-block\", className)}>\n          <InputField\n            label={label}\n            value={inputValue}\n            onChange={handleInputChange}\n            onBlur={handleInputBlur}\n            placeholder={showSeconds ? placeholder : \"00:00\"}\n            error={error}\n            errorMessage={errorMessage}\n            size={size}\n            disabled={disabled}\n            autoComplete=\"off\"\n            rightIcon={<BellIcon size={24} />}\n            onRightIconClick={() => !disabled && setOpen(true)}\n            reserveLabelSpace={reserveLabelSpace}\n          />\n        </div>\n      </PopoverTrigger>\n      <PopoverContent\n        className=\"w-auto border-0 bg-transparent p-0 shadow-none\"\n        align=\"start\"\n      >\n        <div className=\"overflow-hidden rounded-[5px] border border-slate-100 bg-white/95 p-3 shadow-[10px_10px_10px_0px_rgba(0,0,0,0.05)] backdrop-blur-[12px] dark:border-slate-600 dark:bg-slate-800/95\">\n          <div className=\"flex items-center justify-center\">\n            <TimeSpinner\n              value={hours}\n              onChange={handleHoursChange}\n              max={23}\n              disabled={disabled}\n            />\n            <span className=\"flex h-[23px] w-[9px] items-center justify-center text-xs text-slate-500 dark:text-slate-300\">:</span>\n            <TimeSpinner\n              value={minutes}\n              onChange={handleMinutesChange}\n              max={59}\n              disabled={disabled}\n            />\n            {showSeconds && (\n              <>\n                <span className=\"flex h-[23px] w-[9px] items-center justify-center text-xs text-slate-500 dark:text-slate-300\">:</span>\n                <TimeSpinner\n                  value={seconds}\n                  onChange={handleSecondsChange}\n                  max={59}\n                  disabled={disabled}\n                />\n              </>\n            )}\n          </div>\n        </div>\n      </PopoverContent>\n    </Popover>\n  );\n};\n\nexport { TimePicker };\n"],"names":["TimePicker","value","onChange","label","placeholder","error","errorMessage","size","disabled","className","reserveLabelSpace","showSeconds","open","setOpen","React","parseTime","val","parts","initialHours","initialMinutes","initialSeconds","hours","setHours","minutes","setMinutes","seconds","setSeconds","h","m","s","formatTime","hh","mm","ss","inputValue","setInputValue","handleInputChange","e","newValue","handleInputBlur","formatted","handleHoursChange","newHours","handleMinutesChange","newMinutes","handleSecondsChange","newSeconds","jsxs","Popover","jsx","PopoverTrigger","cn","InputField","BellIcon","PopoverContent","TimeSpinner","Fragment"],"mappings":"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"}