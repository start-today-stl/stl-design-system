{"version":3,"file":"time-picker.mjs","sources":["../../../src/components/ui/time-picker.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { InputField, type InputSize } from \"@/components/ui/input\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { TimeSpinner } from \"@/components/ui/date-time-picker\";\nimport { BellIcon } from \"@/icons\";\n\nexport interface TimePickerProps {\n  /** 선택된 시간 (HH:mm:ss 형식 문자열 또는 Date) */\n  value?: string | Date;\n  /** 시간 변경 핸들러 */\n  onChange?: (time: string) => void;\n  /** 라벨 텍스트 */\n  label?: string;\n  /** placeholder 텍스트 */\n  placeholder?: string;\n  /** 에러 상태 */\n  error?: boolean;\n  /** 에러 메시지 */\n  errorMessage?: string;\n  /** 너비 크기 */\n  size?: InputSize;\n  /** 비활성화 */\n  disabled?: boolean;\n  /** 추가 className */\n  className?: string;\n  /** 라벨이 없어도 라벨 공간 유지 */\n  reserveLabelSpace?: boolean;\n  /** 초 단위 표시 여부 */\n  showSeconds?: boolean;\n}\n\nconst TimePicker = ({\n  value,\n  onChange,\n  label,\n  placeholder = \"00:00:00\",\n  error,\n  errorMessage,\n  size = \"sm\",\n  disabled,\n  className,\n  reserveLabelSpace,\n  showSeconds = true,\n}: TimePickerProps) => {\n  const [open, setOpen] = React.useState(false);\n\n  // value를 파싱하여 시/분/초 추출\n  const parseTime = (val: string | Date | undefined): { hours: number; minutes: number; seconds: number } => {\n    if (!val) return { hours: 0, minutes: 0, seconds: 0 };\n\n    if (val instanceof Date) {\n      return {\n        hours: val.getHours(),\n        minutes: val.getMinutes(),\n        seconds: val.getSeconds(),\n      };\n    }\n\n    const parts = val.split(\":\");\n    return {\n      hours: parseInt(parts[0] || \"0\", 10) || 0,\n      minutes: parseInt(parts[1] || \"0\", 10) || 0,\n      seconds: parseInt(parts[2] || \"0\", 10) || 0,\n    };\n  };\n\n  const { hours: initialHours, minutes: initialMinutes, seconds: initialSeconds } = parseTime(value);\n\n  const [hours, setHours] = React.useState(initialHours);\n  const [minutes, setMinutes] = React.useState(initialMinutes);\n  const [seconds, setSeconds] = React.useState(initialSeconds);\n\n  // value prop 변경 시 동기화\n  React.useEffect(() => {\n    const { hours: h, minutes: m, seconds: s } = parseTime(value);\n    setHours(h);\n    setMinutes(m);\n    setSeconds(s);\n  }, [value]);\n\n  // 시간 문자열 생성\n  const formatTime = (h: number, m: number, s: number): string => {\n    const hh = h.toString().padStart(2, \"0\");\n    const mm = m.toString().padStart(2, \"0\");\n    const ss = s.toString().padStart(2, \"0\");\n    return showSeconds ? `${hh}:${mm}:${ss}` : `${hh}:${mm}`;\n  };\n\n  const [inputValue, setInputValue] = React.useState(\n    value ? formatTime(initialHours, initialMinutes, initialSeconds) : \"\"\n  );\n\n  React.useEffect(() => {\n    if (value) {\n      const { hours: h, minutes: m, seconds: s } = parseTime(value);\n      setInputValue(formatTime(h, m, s));\n    } else {\n      setInputValue(\"\");\n    }\n  }, [value, showSeconds]);\n\n  // 직접 입력 처리\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newValue = e.target.value;\n    setInputValue(newValue);\n\n    // HH:mm:ss 또는 HH:mm 형식 파싱\n    const parts = newValue.split(\":\");\n    if (parts.length >= 2) {\n      const h = parseInt(parts[0], 10);\n      const m = parseInt(parts[1], 10);\n      const s = parts[2] ? parseInt(parts[2], 10) : 0;\n\n      if (!isNaN(h) && !isNaN(m) && h >= 0 && h <= 23 && m >= 0 && m <= 59 && s >= 0 && s <= 59) {\n        setHours(h);\n        setMinutes(m);\n        setSeconds(s);\n        onChange?.(formatTime(h, m, s));\n      }\n    }\n  };\n\n  // 입력 완료 시 유효성 검사\n  const handleInputBlur = () => {\n    if (!inputValue) {\n      onChange?.(\"\");\n      return;\n    }\n\n    const parts = inputValue.split(\":\");\n    if (parts.length >= 2) {\n      const h = parseInt(parts[0], 10);\n      const m = parseInt(parts[1], 10);\n      const s = parts[2] ? parseInt(parts[2], 10) : 0;\n\n      if (!isNaN(h) && !isNaN(m) && h >= 0 && h <= 23 && m >= 0 && m <= 59 && s >= 0 && s <= 59) {\n        const formatted = formatTime(h, m, s);\n        setInputValue(formatted);\n        onChange?.(formatted);\n        return;\n      }\n    }\n\n    // 유효하지 않으면 이전 값으로 복원\n    setInputValue(value ? formatTime(hours, minutes, seconds) : \"\");\n  };\n\n  // 시간 변경 핸들러\n  const handleHoursChange = (newHours: number) => {\n    setHours(newHours);\n    const formatted = formatTime(newHours, minutes, seconds);\n    setInputValue(formatted);\n    onChange?.(formatted);\n  };\n\n  const handleMinutesChange = (newMinutes: number) => {\n    setMinutes(newMinutes);\n    const formatted = formatTime(hours, newMinutes, seconds);\n    setInputValue(formatted);\n    onChange?.(formatted);\n  };\n\n  const handleSecondsChange = (newSeconds: number) => {\n    setSeconds(newSeconds);\n    const formatted = formatTime(hours, minutes, newSeconds);\n    setInputValue(formatted);\n    onChange?.(formatted);\n  };\n\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger asChild disabled={disabled}>\n        <div role=\"combobox\" aria-haspopup=\"dialog\" className={cn(\"inline-block\", className)}>\n          <InputField\n            label={label}\n            value={inputValue}\n            onChange={handleInputChange}\n            onBlur={handleInputBlur}\n            placeholder={showSeconds ? placeholder : \"00:00\"}\n            error={error}\n            errorMessage={errorMessage}\n            size={size}\n            disabled={disabled}\n            autoComplete=\"off\"\n            rightIcon={<BellIcon size={24} />}\n            onRightIconClick={() => !disabled && setOpen(true)}\n            reserveLabelSpace={reserveLabelSpace}\n          />\n        </div>\n      </PopoverTrigger>\n      <PopoverContent\n        className=\"w-auto border-0 bg-transparent p-0 shadow-none\"\n        align=\"start\"\n      >\n        <div className=\"overflow-hidden rounded-[5px] border border-slate-100 bg-white/95 p-3 shadow-[10px_10px_10px_0px_rgba(0,0,0,0.05)] backdrop-blur-[12px] dark:border-slate-600 dark:bg-slate-800/95\">\n          <div className=\"flex items-center justify-center\">\n            <TimeSpinner\n              value={hours}\n              onChange={handleHoursChange}\n              max={23}\n              disabled={disabled}\n            />\n            <span className=\"flex h-[23px] w-[9px] items-center justify-center text-xs text-slate-500 dark:text-slate-300\">:</span>\n            <TimeSpinner\n              value={minutes}\n              onChange={handleMinutesChange}\n              max={59}\n              disabled={disabled}\n            />\n            {showSeconds && (\n              <>\n                <span className=\"flex h-[23px] w-[9px] items-center justify-center text-xs text-slate-500 dark:text-slate-300\">:</span>\n                <TimeSpinner\n                  value={seconds}\n                  onChange={handleSecondsChange}\n                  max={59}\n                  disabled={disabled}\n                />\n              </>\n            )}\n          </div>\n        </div>\n      </PopoverContent>\n    </Popover>\n  );\n};\n\nexport { TimePicker };\n"],"names":["TimePicker","value","onChange","label","placeholder","error","errorMessage","size","disabled","className","reserveLabelSpace","showSeconds","open","setOpen","React","parseTime","val","parts","initialHours","initialMinutes","initialSeconds","hours","setHours","minutes","setMinutes","seconds","setSeconds","h","m","s","formatTime","hh","mm","ss","inputValue","setInputValue","handleInputChange","e","newValue","handleInputBlur","formatted","handleHoursChange","newHours","handleMinutesChange","newMinutes","handleSecondsChange","newSeconds","jsxs","Popover","jsx","PopoverTrigger","cn","InputField","BellIcon","PopoverContent","TimeSpinner","Fragment"],"mappings":";;;;;;;AAkCA,MAAMA,KAAa,CAAC;AAAA,EAClB,OAAAC;AAAA,EACA,UAAAC;AAAA,EACA,OAAAC;AAAA,EACA,aAAAC,IAAc;AAAA,EACd,OAAAC;AAAA,EACA,cAAAC;AAAA,EACA,MAAAC,IAAO;AAAA,EACP,UAAAC;AAAA,EACA,WAAAC;AAAA,EACA,mBAAAC;AAAA,EACA,aAAAC,IAAc;AAChB,MAAuB;AACrB,QAAM,CAACC,GAAMC,CAAO,IAAIC,EAAM,SAAS,EAAK,GAGtCC,IAAY,CAACC,MAAwF;AACzG,QAAI,CAACA,EAAK,QAAO,EAAE,OAAO,GAAG,SAAS,GAAG,SAAS,EAAA;AAElD,QAAIA,aAAe;AACjB,aAAO;AAAA,QACL,OAAOA,EAAI,SAAA;AAAA,QACX,SAASA,EAAI,WAAA;AAAA,QACb,SAASA,EAAI,WAAA;AAAA,MAAW;AAI5B,UAAMC,IAAQD,EAAI,MAAM,GAAG;AAC3B,WAAO;AAAA,MACL,OAAO,SAASC,EAAM,CAAC,KAAK,KAAK,EAAE,KAAK;AAAA,MACxC,SAAS,SAASA,EAAM,CAAC,KAAK,KAAK,EAAE,KAAK;AAAA,MAC1C,SAAS,SAASA,EAAM,CAAC,KAAK,KAAK,EAAE,KAAK;AAAA,IAAA;AAAA,EAE9C,GAEM,EAAE,OAAOC,GAAc,SAASC,GAAgB,SAASC,EAAA,IAAmBL,EAAUd,CAAK,GAE3F,CAACoB,GAAOC,CAAQ,IAAIR,EAAM,SAASI,CAAY,GAC/C,CAACK,GAASC,CAAU,IAAIV,EAAM,SAASK,CAAc,GACrD,CAACM,GAASC,CAAU,IAAIZ,EAAM,SAASM,CAAc;AAG3D,EAAAN,EAAM,UAAU,MAAM;AACpB,UAAM,EAAE,OAAOa,GAAG,SAASC,GAAG,SAASC,EAAA,IAAMd,EAAUd,CAAK;AAC5D,IAAAqB,EAASK,CAAC,GACVH,EAAWI,CAAC,GACZF,EAAWG,CAAC;AAAA,EACd,GAAG,CAAC5B,CAAK,CAAC;AAGV,QAAM6B,IAAa,CAACH,GAAWC,GAAWC,MAAsB;AAC9D,UAAME,IAAKJ,EAAE,SAAA,EAAW,SAAS,GAAG,GAAG,GACjCK,IAAKJ,EAAE,SAAA,EAAW,SAAS,GAAG,GAAG,GACjCK,IAAKJ,EAAE,SAAA,EAAW,SAAS,GAAG,GAAG;AACvC,WAAOlB,IAAc,GAAGoB,CAAE,IAAIC,CAAE,IAAIC,CAAE,KAAK,GAAGF,CAAE,IAAIC,CAAE;AAAA,EACxD,GAEM,CAACE,GAAYC,CAAa,IAAIrB,EAAM;AAAA,IACxCb,IAAQ6B,EAAWZ,GAAcC,GAAgBC,CAAc,IAAI;AAAA,EAAA;AAGrE,EAAAN,EAAM,UAAU,MAAM;AACpB,QAAIb,GAAO;AACT,YAAM,EAAE,OAAO0B,GAAG,SAASC,GAAG,SAASC,EAAA,IAAMd,EAAUd,CAAK;AAC5D,MAAAkC,EAAcL,EAAWH,GAAGC,GAAGC,CAAC,CAAC;AAAA,IACnC;AACE,MAAAM,EAAc,EAAE;AAAA,EAEpB,GAAG,CAAClC,GAAOU,CAAW,CAAC;AAGvB,QAAMyB,IAAoB,CAACC,MAA2C;AACpE,UAAMC,IAAWD,EAAE,OAAO;AAC1B,IAAAF,EAAcG,CAAQ;AAGtB,UAAMrB,IAAQqB,EAAS,MAAM,GAAG;AAChC,QAAIrB,EAAM,UAAU,GAAG;AACrB,YAAMU,IAAI,SAASV,EAAM,CAAC,GAAG,EAAE,GACzBW,IAAI,SAASX,EAAM,CAAC,GAAG,EAAE,GACzBY,IAAIZ,EAAM,CAAC,IAAI,SAASA,EAAM,CAAC,GAAG,EAAE,IAAI;AAE9C,MAAI,CAAC,MAAMU,CAAC,KAAK,CAAC,MAAMC,CAAC,KAAKD,KAAK,KAAKA,KAAK,MAAMC,KAAK,KAAKA,KAAK,MAAMC,KAAK,KAAKA,KAAK,OACrFP,EAASK,CAAC,GACVH,EAAWI,CAAC,GACZF,EAAWG,CAAC,GACZ3B,KAAA,QAAAA,EAAW4B,EAAWH,GAAGC,GAAGC,CAAC;AAAA,IAEjC;AAAA,EACF,GAGMU,IAAkB,MAAM;AAC5B,QAAI,CAACL,GAAY;AACf,MAAAhC,KAAA,QAAAA,EAAW;AACX;AAAA,IACF;AAEA,UAAMe,IAAQiB,EAAW,MAAM,GAAG;AAClC,QAAIjB,EAAM,UAAU,GAAG;AACrB,YAAMU,IAAI,SAASV,EAAM,CAAC,GAAG,EAAE,GACzBW,IAAI,SAASX,EAAM,CAAC,GAAG,EAAE,GACzBY,IAAIZ,EAAM,CAAC,IAAI,SAASA,EAAM,CAAC,GAAG,EAAE,IAAI;AAE9C,UAAI,CAAC,MAAMU,CAAC,KAAK,CAAC,MAAMC,CAAC,KAAKD,KAAK,KAAKA,KAAK,MAAMC,KAAK,KAAKA,KAAK,MAAMC,KAAK,KAAKA,KAAK,IAAI;AACzF,cAAMW,IAAYV,EAAWH,GAAGC,GAAGC,CAAC;AACpC,QAAAM,EAAcK,CAAS,GACvBtC,KAAA,QAAAA,EAAWsC;AACX;AAAA,MACF;AAAA,IACF;AAGA,IAAAL,EAAclC,IAAQ6B,EAAWT,GAAOE,GAASE,CAAO,IAAI,EAAE;AAAA,EAChE,GAGMgB,IAAoB,CAACC,MAAqB;AAC9C,IAAApB,EAASoB,CAAQ;AACjB,UAAMF,IAAYV,EAAWY,GAAUnB,GAASE,CAAO;AACvD,IAAAU,EAAcK,CAAS,GACvBtC,KAAA,QAAAA,EAAWsC;AAAA,EACb,GAEMG,IAAsB,CAACC,MAAuB;AAClD,IAAApB,EAAWoB,CAAU;AACrB,UAAMJ,IAAYV,EAAWT,GAAOuB,GAAYnB,CAAO;AACvD,IAAAU,EAAcK,CAAS,GACvBtC,KAAA,QAAAA,EAAWsC;AAAA,EACb,GAEMK,IAAsB,CAACC,MAAuB;AAClD,IAAApB,EAAWoB,CAAU;AACrB,UAAMN,IAAYV,EAAWT,GAAOE,GAASuB,CAAU;AACvD,IAAAX,EAAcK,CAAS,GACvBtC,KAAA,QAAAA,EAAWsC;AAAA,EACb;AAEA,SACE,gBAAAO,EAACC,GAAA,EAAQ,MAAApC,GAAY,cAAcC,GACjC,UAAA;AAAA,IAAA,gBAAAoC,EAACC,GAAA,EAAe,SAAO,IAAC,UAAA1C,GACtB,4BAAC,OAAA,EAAI,MAAK,YAAW,iBAAc,UAAS,WAAW2C,EAAG,gBAAgB1C,CAAS,GACjF,UAAA,gBAAAwC;AAAA,MAACG;AAAA,MAAA;AAAA,QACC,OAAAjD;AAAA,QACA,OAAO+B;AAAA,QACP,UAAUE;AAAA,QACV,QAAQG;AAAA,QACR,aAAa5B,IAAcP,IAAc;AAAA,QACzC,OAAAC;AAAA,QACA,cAAAC;AAAA,QACA,MAAAC;AAAA,QACA,UAAAC;AAAA,QACA,cAAa;AAAA,QACb,WAAW,gBAAAyC,EAACI,GAAA,EAAS,MAAM,GAAA,CAAI;AAAA,QAC/B,kBAAkB,MAAM,CAAC7C,KAAYK,EAAQ,EAAI;AAAA,QACjD,mBAAAH;AAAA,MAAA;AAAA,IAAA,GAEJ,EAAA,CACF;AAAA,IACA,gBAAAuC;AAAA,MAACK;AAAA,MAAA;AAAA,QACC,WAAU;AAAA,QACV,OAAM;AAAA,QAEN,4BAAC,OAAA,EAAI,WAAU,sLACb,UAAA,gBAAAP,EAAC,OAAA,EAAI,WAAU,oCACb,UAAA;AAAA,UAAA,gBAAAE;AAAA,YAACM;AAAA,YAAA;AAAA,cACC,OAAOlC;AAAA,cACP,UAAUoB;AAAA,cACV,KAAK;AAAA,cACL,UAAAjC;AAAA,YAAA;AAAA,UAAA;AAAA,UAEF,gBAAAyC,EAAC,QAAA,EAAK,WAAU,gGAA+F,UAAA,KAAC;AAAA,UAChH,gBAAAA;AAAA,YAACM;AAAA,YAAA;AAAA,cACC,OAAOhC;AAAA,cACP,UAAUoB;AAAA,cACV,KAAK;AAAA,cACL,UAAAnC;AAAA,YAAA;AAAA,UAAA;AAAA,UAEDG,KACC,gBAAAoC,EAAAS,GAAA,EACE,UAAA;AAAA,YAAA,gBAAAP,EAAC,QAAA,EAAK,WAAU,gGAA+F,UAAA,KAAC;AAAA,YAChH,gBAAAA;AAAA,cAACM;AAAA,cAAA;AAAA,gBACC,OAAO9B;AAAA,gBACP,UAAUoB;AAAA,gBACV,KAAK;AAAA,gBACL,UAAArC;AAAA,cAAA;AAAA,YAAA;AAAA,UACF,EAAA,CACF;AAAA,QAAA,EAAA,CAEJ,EAAA,CACF;AAAA,MAAA;AAAA,IAAA;AAAA,EACF,GACF;AAEJ;"}