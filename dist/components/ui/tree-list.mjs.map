{"version":3,"file":"tree-list.mjs","sources":["../../../src/components/ui/tree-list.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { useState } from \"react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { RightIcon } from \"@/icons\"\n\n// ============================================================================\n// TreeList\n// ============================================================================\n\nexport interface TreeListProps extends React.HTMLAttributes<HTMLDivElement> {}\n\nconst TreeList = React.forwardRef<HTMLDivElement, TreeListProps>(\n  ({ className, children, ...props }, ref) => {\n    return (\n      <div\n        ref={ref}\n        role=\"tree\"\n        className={cn(\"flex flex-col\", className)}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n)\nTreeList.displayName = \"TreeList\"\n\n// ============================================================================\n// TreeItem\n// ============================================================================\n\nexport interface TreeItemProps extends React.HTMLAttributes<HTMLDivElement> {\n  /** 아이템 아이콘 */\n  icon?: React.ReactNode\n  /** 아이템 라벨 */\n  label: string\n  /** 선택 상태 */\n  selected?: boolean\n  /** 펼침 상태 (controlled) */\n  expanded?: boolean\n  /** 기본 펼침 상태 (uncontrolled) */\n  defaultExpanded?: boolean\n  /** 선택 핸들러 */\n  onSelect?: () => void\n  /** 펼침 상태 변경 핸들러 */\n  onExpandedChange?: (expanded: boolean) => void\n  /** 호버/선택 시 표시될 액션 버튼 */\n  actions?: React.ReactNode\n  /** 들여쓰기 깊이 (내부용) */\n  depth?: number\n}\n\nconst TreeItem = React.forwardRef<HTMLDivElement, TreeItemProps>(\n  (\n    {\n      className,\n      icon,\n      label,\n      selected = false,\n      expanded: controlledExpanded,\n      defaultExpanded = false,\n      onSelect,\n      onExpandedChange,\n      actions,\n      depth = 0,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [internalExpanded, setInternalExpanded] = useState(defaultExpanded)\n    const hasChildren = React.Children.count(children) > 0\n\n    // controlled vs uncontrolled\n    const isControlled = controlledExpanded !== undefined\n    const expanded = isControlled ? controlledExpanded : internalExpanded\n\n    const handleToggle = (e: React.MouseEvent) => {\n      e.stopPropagation()\n      const newValue = !expanded\n      if (!isControlled) {\n        setInternalExpanded(newValue)\n      }\n      onExpandedChange?.(newValue)\n    }\n\n    const handleSelect = () => {\n      onSelect?.()\n    }\n\n    // children에 depth 전달\n    const childrenWithDepth = React.Children.map(children, (child) => {\n      if (React.isValidElement<TreeItemProps>(child)) {\n        return React.cloneElement(child, { depth: depth + 1 })\n      }\n      return child\n    })\n\n    return (\n      <div ref={ref} role=\"treeitem\" aria-expanded={hasChildren ? expanded : undefined} {...props}>\n        {/* 아이템 행 */}\n        <div\n          className={cn(\n            \"group flex items-center gap-2 px-3 py-2 cursor-pointer rounded-lg\",\n            \"transition-colors\",\n            selected\n              ? \"bg-accent text-primary\"\n              : \"hover:bg-muted\",\n            className\n          )}\n          style={{ paddingLeft: `${12 + depth * 20}px` }}\n          onClick={handleSelect}\n        >\n          {/* 펼치기/접기 버튼 */}\n          {hasChildren ? (\n            <button\n              type=\"button\"\n              className={cn(\n                \"flex-shrink-0 p-0.5 rounded hover:bg-muted\",\n                \"transition-transform\",\n                expanded && \"rotate-90\"\n              )}\n              onClick={handleToggle}\n              aria-label={expanded ? \"접기\" : \"펼치기\"}\n            >\n              <RightIcon size={16} className=\"text-muted-foreground\" />\n            </button>\n          ) : (\n            <span className=\"w-5 flex-shrink-0\" /> // placeholder for alignment\n          )}\n\n          {/* 아이콘 */}\n          {icon && (\n            <span className=\"flex-shrink-0 text-muted-foreground\">{icon}</span>\n          )}\n\n          {/* 라벨 */}\n          <span className=\"flex-1 truncate text-sm font-medium\">{label}</span>\n\n          {/* 액션 버튼 */}\n          {actions && (\n            <div\n              className={cn(\n                \"flex items-center gap-1 flex-shrink-0\",\n                \"opacity-0 group-hover:opacity-100\",\n                selected && \"opacity-100\"\n              )}\n              onClick={(e) => e.stopPropagation()}\n            >\n              {actions}\n            </div>\n          )}\n        </div>\n\n        {/* 하위 아이템 */}\n        {hasChildren && expanded && (\n          <div role=\"group\">{childrenWithDepth}</div>\n        )}\n      </div>\n    )\n  }\n)\nTreeItem.displayName = \"TreeItem\"\n\nexport { TreeList, TreeItem }\n"],"names":["TreeList","React","className","children","props","ref","jsx","cn","TreeItem","icon","label","selected","controlledExpanded","defaultExpanded","onSelect","onExpandedChange","actions","depth","internalExpanded","setInternalExpanded","useState","hasChildren","isControlled","expanded","handleToggle","e","newValue","handleSelect","childrenWithDepth","child","jsxs","RightIcon"],"mappings":"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"}