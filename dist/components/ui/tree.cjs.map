{"version":3,"file":"tree.cjs","sources":["../../../src/components/ui/tree.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { useState } from \"react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { RightIcon } from \"@/icons\"\n\n// ============================================================================\n// Tree\n// ============================================================================\n\nexport interface TreeProps extends React.HTMLAttributes<HTMLDivElement> {}\n\nconst Tree = React.forwardRef<HTMLDivElement, TreeProps>(\n  ({ className, children, ...props }, ref) => {\n    return (\n      <div\n        ref={ref}\n        role=\"tree\"\n        className={cn(\"flex flex-col\", className)}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n)\nTree.displayName = \"Tree\"\n\n// ============================================================================\n// TreeItem\n// ============================================================================\n\nexport interface TreeItemProps extends React.HTMLAttributes<HTMLDivElement> {\n  /** 아이템 아이콘 */\n  icon?: React.ReactNode\n  /** 아이템 라벨 */\n  label: string\n  /** 선택 상태 */\n  selected?: boolean\n  /** 펼침 상태 (controlled) */\n  expanded?: boolean\n  /** 기본 펼침 상태 (uncontrolled) */\n  defaultExpanded?: boolean\n  /** 선택 핸들러 */\n  onSelect?: () => void\n  /** 펼침 상태 변경 핸들러 */\n  onExpandedChange?: (expanded: boolean) => void\n  /** 호버/선택 시 표시될 액션 버튼 */\n  actions?: React.ReactNode\n  /** 들여쓰기 깊이 (내부용) */\n  depth?: number\n}\n\nconst TreeItem = React.forwardRef<HTMLDivElement, TreeItemProps>(\n  (\n    {\n      className,\n      icon,\n      label,\n      selected = false,\n      expanded: controlledExpanded,\n      defaultExpanded = false,\n      onSelect,\n      onExpandedChange,\n      actions,\n      depth = 0,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [internalExpanded, setInternalExpanded] = useState(defaultExpanded)\n    const hasChildren = React.Children.count(children) > 0\n\n    // controlled vs uncontrolled\n    const isControlled = controlledExpanded !== undefined\n    const expanded = isControlled ? controlledExpanded : internalExpanded\n\n    const handleToggle = (e: React.MouseEvent) => {\n      e.stopPropagation()\n      const newValue = !expanded\n      if (!isControlled) {\n        setInternalExpanded(newValue)\n      }\n      onExpandedChange?.(newValue)\n    }\n\n    const handleSelect = () => {\n      onSelect?.()\n    }\n\n    // children에 depth 전달\n    const childrenWithDepth = React.Children.map(children, (child) => {\n      if (React.isValidElement<TreeItemProps>(child)) {\n        return React.cloneElement(child, { depth: depth + 1 })\n      }\n      return child\n    })\n\n    return (\n      <div ref={ref} role=\"treeitem\" aria-expanded={hasChildren ? expanded : undefined} {...props}>\n        {/* 아이템 행 */}\n        <div\n          className={cn(\n            \"group flex items-center gap-2 px-3 py-2 cursor-pointer rounded-lg\",\n            \"transition-colors\",\n            selected\n              ? \"bg-accent text-primary\"\n              : \"hover:bg-muted\",\n            className\n          )}\n          style={{ paddingLeft: `${12 + depth * 20}px` }}\n          onClick={handleSelect}\n        >\n          {/* 펼치기/접기 버튼 */}\n          {hasChildren ? (\n            <button\n              type=\"button\"\n              className={cn(\n                \"flex-shrink-0 p-0.5 rounded hover:bg-muted\",\n                \"transition-transform\",\n                expanded && \"rotate-90\"\n              )}\n              onClick={handleToggle}\n              aria-label={expanded ? \"접기\" : \"펼치기\"}\n            >\n              <RightIcon size={16} className=\"text-muted-foreground\" />\n            </button>\n          ) : (\n            <span className=\"w-5 flex-shrink-0\" /> // placeholder for alignment\n          )}\n\n          {/* 아이콘 */}\n          {icon && (\n            <span className=\"flex-shrink-0 text-muted-foreground\">{icon}</span>\n          )}\n\n          {/* 라벨 */}\n          <span className=\"flex-1 truncate text-sm font-medium\">{label}</span>\n\n          {/* 액션 버튼 */}\n          {actions && (\n            <div\n              className={cn(\n                \"flex items-center gap-1 flex-shrink-0\",\n                \"opacity-0 group-hover:opacity-100\",\n                selected && \"opacity-100\"\n              )}\n              onClick={(e) => e.stopPropagation()}\n            >\n              {actions}\n            </div>\n          )}\n        </div>\n\n        {/* 하위 아이템 */}\n        {hasChildren && expanded && (\n          <div role=\"group\">{childrenWithDepth}</div>\n        )}\n      </div>\n    )\n  }\n)\nTreeItem.displayName = \"TreeItem\"\n\nexport { Tree, TreeItem }\n"],"names":["Tree","React","className","children","props","ref","jsx","cn","TreeItem","icon","label","selected","controlledExpanded","defaultExpanded","onSelect","onExpandedChange","actions","depth","internalExpanded","setInternalExpanded","useState","hasChildren","isControlled","expanded","handleToggle","e","newValue","handleSelect","childrenWithDepth","child","jsxs","RightIcon"],"mappings":"0eAYMA,EAAOC,EAAM,WACjB,CAAC,CAAE,UAAAC,EAAW,SAAAC,EAAU,GAAGC,CAAA,EAASC,IAEhCC,EAAAA,IAAC,MAAA,CACC,IAAAD,EACA,KAAK,OACL,UAAWE,EAAAA,GAAG,gBAAiBL,CAAS,EACvC,GAAGE,EAEH,SAAAD,CAAA,CAAA,CAIT,EACAH,EAAK,YAAc,OA2BnB,MAAMQ,EAAWP,EAAM,WACrB,CACE,CACE,UAAAC,EACA,KAAAO,EACA,MAAAC,EACA,SAAAC,EAAW,GACX,SAAUC,EACV,gBAAAC,EAAkB,GAClB,SAAAC,EACA,iBAAAC,EACA,QAAAC,EACA,MAAAC,EAAQ,EACR,SAAAd,EACA,GAAGC,CAAA,EAELC,IACG,CACH,KAAM,CAACa,EAAkBC,CAAmB,EAAIC,EAAAA,SAASP,CAAe,EAClEQ,EAAcpB,EAAM,SAAS,MAAME,CAAQ,EAAI,EAG/CmB,EAAeV,IAAuB,OACtCW,EAAWD,EAAeV,EAAqBM,EAE/CM,EAAgBC,GAAwB,CAC5CA,EAAE,gBAAA,EACF,MAAMC,EAAW,CAACH,EACbD,GACHH,EAAoBO,CAAQ,EAE9BX,GAAA,MAAAA,EAAmBW,EACrB,EAEMC,EAAe,IAAM,CACzBb,GAAA,MAAAA,GACF,EAGMc,EAAoB3B,EAAM,SAAS,IAAIE,EAAW0B,GAClD5B,EAAM,eAA8B4B,CAAK,EACpC5B,EAAM,aAAa4B,EAAO,CAAE,MAAOZ,EAAQ,EAAG,EAEhDY,CACR,EAED,OACEC,EAAAA,KAAC,MAAA,CAAI,IAAAzB,EAAU,KAAK,WAAW,gBAAegB,EAAcE,EAAW,OAAY,GAAGnB,EAEpF,SAAA,CAAA0B,EAAAA,KAAC,MAAA,CACC,UAAWvB,EAAAA,GACT,oEACA,oBACAI,EACI,yBACA,iBACJT,CAAA,EAEF,MAAO,CAAE,YAAa,GAAG,GAAKe,EAAQ,EAAE,IAAA,EACxC,QAASU,EAGR,SAAA,CAAAN,EACCf,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,UAAWC,EAAAA,GACT,6CACA,uBACAgB,GAAY,WAAA,EAEd,QAASC,EACT,aAAYD,EAAW,KAAO,MAE9B,SAAAjB,EAAAA,IAACyB,YAAA,CAAU,KAAM,GAAI,UAAU,uBAAA,CAAwB,CAAA,CAAA,EAGzDzB,EAAAA,IAAC,OAAA,CAAK,UAAU,mBAAA,CAAoB,EAIrCG,GACCH,EAAAA,IAAC,OAAA,CAAK,UAAU,sCAAuC,SAAAG,EAAK,EAI9DH,EAAAA,IAAC,OAAA,CAAK,UAAU,sCAAuC,SAAAI,EAAM,EAG5DM,GACCV,EAAAA,IAAC,MAAA,CACC,UAAWC,EAAAA,GACT,wCACA,oCACAI,GAAY,aAAA,EAEd,QAAUc,GAAMA,EAAE,gBAAA,EAEjB,SAAAT,CAAA,CAAA,CACH,CAAA,CAAA,EAKHK,GAAeE,GACdjB,EAAAA,IAAC,MAAA,CAAI,KAAK,QAAS,SAAAsB,CAAA,CAAkB,CAAA,EAEzC,CAEJ,CACF,EACApB,EAAS,YAAc"}