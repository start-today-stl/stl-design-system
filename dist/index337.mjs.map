{"version":3,"file":"index337.mjs","sources":["../node_modules/react-remove-scroll/dist/es2015/SideEffect.js"],"sourcesContent":["import { __spreadArray } from \"tslib\";\nimport * as React from 'react';\nimport { RemoveScrollBar } from 'react-remove-scroll-bar';\nimport { styleSingleton } from 'react-style-singleton';\nimport { nonPassive } from './aggresiveCapture';\nimport { handleScroll, locationCouldBeScrolled } from './handleScroll';\nexport var getTouchXY = function (event) {\n    return 'changedTouches' in event ? [event.changedTouches[0].clientX, event.changedTouches[0].clientY] : [0, 0];\n};\nexport var getDeltaXY = function (event) { return [event.deltaX, event.deltaY]; };\nvar extractRef = function (ref) {\n    return ref && 'current' in ref ? ref.current : ref;\n};\nvar deltaCompare = function (x, y) { return x[0] === y[0] && x[1] === y[1]; };\nvar generateStyle = function (id) { return \"\\n  .block-interactivity-\".concat(id, \" {pointer-events: none;}\\n  .allow-interactivity-\").concat(id, \" {pointer-events: all;}\\n\"); };\nvar idCounter = 0;\nvar lockStack = [];\nexport function RemoveScrollSideCar(props) {\n    var shouldPreventQueue = React.useRef([]);\n    var touchStartRef = React.useRef([0, 0]);\n    var activeAxis = React.useRef();\n    var id = React.useState(idCounter++)[0];\n    var Style = React.useState(styleSingleton)[0];\n    var lastProps = React.useRef(props);\n    React.useEffect(function () {\n        lastProps.current = props;\n    }, [props]);\n    React.useEffect(function () {\n        if (props.inert) {\n            document.body.classList.add(\"block-interactivity-\".concat(id));\n            var allow_1 = __spreadArray([props.lockRef.current], (props.shards || []).map(extractRef), true).filter(Boolean);\n            allow_1.forEach(function (el) { return el.classList.add(\"allow-interactivity-\".concat(id)); });\n            return function () {\n                document.body.classList.remove(\"block-interactivity-\".concat(id));\n                allow_1.forEach(function (el) { return el.classList.remove(\"allow-interactivity-\".concat(id)); });\n            };\n        }\n        return;\n    }, [props.inert, props.lockRef.current, props.shards]);\n    var shouldCancelEvent = React.useCallback(function (event, parent) {\n        if (('touches' in event && event.touches.length === 2) || (event.type === 'wheel' && event.ctrlKey)) {\n            return !lastProps.current.allowPinchZoom;\n        }\n        var touch = getTouchXY(event);\n        var touchStart = touchStartRef.current;\n        var deltaX = 'deltaX' in event ? event.deltaX : touchStart[0] - touch[0];\n        var deltaY = 'deltaY' in event ? event.deltaY : touchStart[1] - touch[1];\n        var currentAxis;\n        var target = event.target;\n        var moveDirection = Math.abs(deltaX) > Math.abs(deltaY) ? 'h' : 'v';\n        // allow horizontal touch move on Range inputs. They will not cause any scroll\n        if ('touches' in event && moveDirection === 'h' && target.type === 'range') {\n            return false;\n        }\n        // allow drag selection (iOS); check if selection's anchorNode is the same as target or contains target\n        var selection = window.getSelection();\n        var anchorNode = selection && selection.anchorNode;\n        var isTouchingSelection = anchorNode ? anchorNode === target || anchorNode.contains(target) : false;\n        if (isTouchingSelection) {\n            return false;\n        }\n        var canBeScrolledInMainDirection = locationCouldBeScrolled(moveDirection, target);\n        if (!canBeScrolledInMainDirection) {\n            return true;\n        }\n        if (canBeScrolledInMainDirection) {\n            currentAxis = moveDirection;\n        }\n        else {\n            currentAxis = moveDirection === 'v' ? 'h' : 'v';\n            canBeScrolledInMainDirection = locationCouldBeScrolled(moveDirection, target);\n            // other axis might be not scrollable\n        }\n        if (!canBeScrolledInMainDirection) {\n            return false;\n        }\n        if (!activeAxis.current && 'changedTouches' in event && (deltaX || deltaY)) {\n            activeAxis.current = currentAxis;\n        }\n        if (!currentAxis) {\n            return true;\n        }\n        var cancelingAxis = activeAxis.current || currentAxis;\n        return handleScroll(cancelingAxis, parent, event, cancelingAxis === 'h' ? deltaX : deltaY, true);\n    }, []);\n    var shouldPrevent = React.useCallback(function (_event) {\n        var event = _event;\n        if (!lockStack.length || lockStack[lockStack.length - 1] !== Style) {\n            // not the last active\n            return;\n        }\n        var delta = 'deltaY' in event ? getDeltaXY(event) : getTouchXY(event);\n        var sourceEvent = shouldPreventQueue.current.filter(function (e) { return e.name === event.type && (e.target === event.target || event.target === e.shadowParent) && deltaCompare(e.delta, delta); })[0];\n        // self event, and should be canceled\n        if (sourceEvent && sourceEvent.should) {\n            if (event.cancelable) {\n                event.preventDefault();\n            }\n            return;\n        }\n        // outside or shard event\n        if (!sourceEvent) {\n            var shardNodes = (lastProps.current.shards || [])\n                .map(extractRef)\n                .filter(Boolean)\n                .filter(function (node) { return node.contains(event.target); });\n            var shouldStop = shardNodes.length > 0 ? shouldCancelEvent(event, shardNodes[0]) : !lastProps.current.noIsolation;\n            if (shouldStop) {\n                if (event.cancelable) {\n                    event.preventDefault();\n                }\n            }\n        }\n    }, []);\n    var shouldCancel = React.useCallback(function (name, delta, target, should) {\n        var event = { name: name, delta: delta, target: target, should: should, shadowParent: getOutermostShadowParent(target) };\n        shouldPreventQueue.current.push(event);\n        setTimeout(function () {\n            shouldPreventQueue.current = shouldPreventQueue.current.filter(function (e) { return e !== event; });\n        }, 1);\n    }, []);\n    var scrollTouchStart = React.useCallback(function (event) {\n        touchStartRef.current = getTouchXY(event);\n        activeAxis.current = undefined;\n    }, []);\n    var scrollWheel = React.useCallback(function (event) {\n        shouldCancel(event.type, getDeltaXY(event), event.target, shouldCancelEvent(event, props.lockRef.current));\n    }, []);\n    var scrollTouchMove = React.useCallback(function (event) {\n        shouldCancel(event.type, getTouchXY(event), event.target, shouldCancelEvent(event, props.lockRef.current));\n    }, []);\n    React.useEffect(function () {\n        lockStack.push(Style);\n        props.setCallbacks({\n            onScrollCapture: scrollWheel,\n            onWheelCapture: scrollWheel,\n            onTouchMoveCapture: scrollTouchMove,\n        });\n        document.addEventListener('wheel', shouldPrevent, nonPassive);\n        document.addEventListener('touchmove', shouldPrevent, nonPassive);\n        document.addEventListener('touchstart', scrollTouchStart, nonPassive);\n        return function () {\n            lockStack = lockStack.filter(function (inst) { return inst !== Style; });\n            document.removeEventListener('wheel', shouldPrevent, nonPassive);\n            document.removeEventListener('touchmove', shouldPrevent, nonPassive);\n            document.removeEventListener('touchstart', scrollTouchStart, nonPassive);\n        };\n    }, []);\n    var removeScrollBar = props.removeScrollBar, inert = props.inert;\n    return (React.createElement(React.Fragment, null,\n        inert ? React.createElement(Style, { styles: generateStyle(id) }) : null,\n        removeScrollBar ? React.createElement(RemoveScrollBar, { noRelative: props.noRelative, gapMode: props.gapMode }) : null));\n}\nfunction getOutermostShadowParent(node) {\n    var shadowParent = null;\n    while (node !== null) {\n        if (node instanceof ShadowRoot) {\n            shadowParent = node.host;\n            node = node.host;\n        }\n        node = node.parentNode;\n    }\n    return shadowParent;\n}\n"],"names":["getTouchXY","event","getDeltaXY","extractRef","ref","deltaCompare","x","y","generateStyle","id","idCounter","lockStack","RemoveScrollSideCar","props","shouldPreventQueue","React","touchStartRef","activeAxis","Style","styleSingleton","lastProps","allow_1","__spreadArray","el","shouldCancelEvent","parent","touch","touchStart","deltaX","deltaY","currentAxis","target","moveDirection","selection","anchorNode","isTouchingSelection","canBeScrolledInMainDirection","locationCouldBeScrolled","cancelingAxis","handleScroll","shouldPrevent","_event","delta","sourceEvent","e","shardNodes","node","shouldStop","shouldCancel","name","should","getOutermostShadowParent","scrollTouchStart","scrollWheel","scrollTouchMove","nonPassive","inst","removeScrollBar","inert","RemoveScrollBar","shadowParent"],"mappings":"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","x_google_ignoreList":[0]}