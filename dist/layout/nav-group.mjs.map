{"version":3,"file":"nav-group.mjs","sources":["../../src/layout/nav-group.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { NavItem } from \"./nav-item\"\n\nexport interface NavGroupProps extends React.HTMLAttributes<HTMLDivElement> {\n  /** 메뉴 아이콘 */\n  icon?: React.ReactNode\n  /** 메뉴 라벨 */\n  label: string\n  /** 활성 상태 */\n  active?: boolean\n  /** 기본 펼침 상태 */\n  defaultExpanded?: boolean\n  /** 펼침 상태 (제어 컴포넌트) */\n  expanded?: boolean\n  /** 펼침 상태 변경 핸들러 */\n  onExpandedChange?: (expanded: boolean) => void\n  /** 축소 모드 (아이콘만 표시) */\n  collapsed?: boolean\n  /** 뎁스 레벨 */\n  depth?: 1 | 2 | 3\n  /** @internal 플라이아웃 내부 여부 (collapsed 모드에서 중첩 NavGroup 처리용) */\n  _inFlyout?: boolean\n}\n\nconst NavGroup = React.forwardRef<HTMLDivElement, NavGroupProps>(\n  (\n    {\n      className,\n      icon,\n      label,\n      active,\n      defaultExpanded = false,\n      expanded: expandedProp,\n      onExpandedChange,\n      collapsed,\n      depth = 1,\n      _inFlyout = false,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [expandedState, setExpandedState] = React.useState(defaultExpanded)\n    const isExpanded = expandedProp !== undefined ? expandedProp : expandedState\n\n    const handleToggle = () => {\n      const newExpanded = !isExpanded\n      setExpandedState(newExpanded)\n      onExpandedChange?.(newExpanded)\n    }\n\n    // 플라이아웃 내부의 중첩 NavGroup: 일반 펼침/접힘 (새 flyout 생성 안함)\n    if (_inFlyout) {\n      return (\n        <div ref={ref} className={cn(\"flex flex-col gap-0.5\", className)} {...props}>\n          {/* 2-depth 메뉴 아이템 (화살표 + 클릭 펼침) */}\n          <NavItem\n            icon={icon}\n            label={label}\n            active={active}\n            depth={depth}\n            hasChildren\n            expanded={isExpanded}\n            onClick={handleToggle}\n          />\n          {/* 하위 메뉴 */}\n          {isExpanded && (\n            <div className=\"flex flex-col gap-0.5\">\n              {React.Children.map(children, (child) => {\n                if (React.isValidElement(child)) {\n                  return React.cloneElement(child as React.ReactElement<{ collapsed?: boolean; depth?: number; _inFlyout?: boolean }>, {\n                    collapsed: false,\n                    depth: (depth || 1) + 1 as 1 | 2 | 3,\n                    _inFlyout: true,\n                  })\n                }\n                return child\n              })}\n            </div>\n          )}\n        </div>\n      )\n    }\n\n    // 축소 모드에서는 아이콘만 표시 + 호버 시 플라이아웃\n    if (collapsed) {\n      return (\n        <div className=\"relative group\">\n          <NavItem\n            icon={icon}\n            label={label}\n            active={active}\n            collapsed\n            hasChildren\n          />\n          {/* 호버 시 플라이아웃 메뉴 */}\n          <div className={cn(\n            \"absolute left-full top-0 ml-2 min-w-[200px] py-2 px-3 rounded-md\",\n            \"bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-700\",\n            \"shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible\",\n            \"transition-all duration-200 z-50\"\n          )}>\n            {/* 그룹 라벨 */}\n            <div className=\"text-sm font-medium text-gray-600 dark:text-gray-300 mb-2 pb-2 border-b border-gray-100 dark:border-gray-700\">\n              {label}\n            </div>\n            {/* 하위 메뉴 */}\n            <div className=\"flex flex-col gap-0.5\">\n              {React.Children.map(children, (child) => {\n                if (React.isValidElement(child)) {\n                  // 하위 메뉴는 collapsed 해제하고 depth 조정, 플라이아웃 내부 표시\n                  return React.cloneElement(child as React.ReactElement<{ collapsed?: boolean; depth?: number; _inFlyout?: boolean }>, {\n                    collapsed: false,\n                    depth: 2,\n                    _inFlyout: true,\n                  })\n                }\n                return child\n              })}\n            </div>\n          </div>\n        </div>\n      )\n    }\n\n    return (\n      <div ref={ref} className={cn(\"flex flex-col gap-0.5\", className)} {...props}>\n        {/* 부모 메뉴 아이템 */}\n        <NavItem\n          icon={icon}\n          label={label}\n          active={active}\n          depth={depth}\n          hasChildren\n          expanded={isExpanded}\n          onClick={handleToggle}\n        />\n\n        {/* 서브메뉴 */}\n        {isExpanded && (\n          <div className=\"flex flex-col gap-0.5\">\n            {children}\n          </div>\n        )}\n      </div>\n    )\n  }\n)\nNavGroup.displayName = \"NavGroup\"\n\nexport { NavGroup }\n"],"names":["NavGroup","React","className","icon","label","active","defaultExpanded","expandedProp","onExpandedChange","collapsed","depth","_inFlyout","children","props","ref","expandedState","setExpandedState","isExpanded","handleToggle","newExpanded","jsxs","cn","jsx","NavItem","child"],"mappings":";;;;AA4BA,MAAMA,IAAWC,EAAM;AAAA,EACrB,CACE;AAAA,IACE,WAAAC;AAAA,IACA,MAAAC;AAAA,IACA,OAAAC;AAAA,IACA,QAAAC;AAAA,IACA,iBAAAC,IAAkB;AAAA,IAClB,UAAUC;AAAA,IACV,kBAAAC;AAAA,IACA,WAAAC;AAAA,IACA,OAAAC,IAAQ;AAAA,IACR,WAAAC,IAAY;AAAA,IACZ,UAAAC;AAAA,IACA,GAAGC;AAAA,EAAA,GAELC,MACG;AACH,UAAM,CAACC,GAAeC,CAAgB,IAAIf,EAAM,SAASK,CAAe,GAClEW,IAAaV,MAAiB,SAAYA,IAAeQ,GAEzDG,IAAe,MAAM;AACzB,YAAMC,IAAc,CAACF;AACrB,MAAAD,EAAiBG,CAAW,GAC5BX,KAAA,QAAAA,EAAmBW;AAAA,IACrB;AAGA,WAAIR,IAEA,gBAAAS,EAAC,SAAI,KAAAN,GAAU,WAAWO,EAAG,yBAAyBnB,CAAS,GAAI,GAAGW,GAEpE,UAAA;AAAA,MAAA,gBAAAS;AAAA,QAACC;AAAA,QAAA;AAAA,UACC,MAAApB;AAAA,UACA,OAAAC;AAAA,UACA,QAAAC;AAAA,UACA,OAAAK;AAAA,UACA,aAAW;AAAA,UACX,UAAUO;AAAA,UACV,SAASC;AAAA,QAAA;AAAA,MAAA;AAAA,MAGVD,KACC,gBAAAK,EAAC,OAAA,EAAI,WAAU,yBACZ,YAAM,SAAS,IAAIV,GAAU,CAACY,MACzBvB,EAAM,eAAeuB,CAAK,IACrBvB,EAAM,aAAauB,GAA2F;AAAA,QACnH,WAAW;AAAA,QACX,QAAQd,KAAS,KAAK;AAAA,QACtB,WAAW;AAAA,MAAA,CACZ,IAEIc,CACR,EAAA,CACH;AAAA,IAAA,GAEJ,IAKAf,IAEA,gBAAAW,EAAC,OAAA,EAAI,WAAU,kBACb,UAAA;AAAA,MAAA,gBAAAE;AAAA,QAACC;AAAA,QAAA;AAAA,UACC,MAAApB;AAAA,UACA,OAAAC;AAAA,UACA,QAAAC;AAAA,UACA,WAAS;AAAA,UACT,aAAW;AAAA,QAAA;AAAA,MAAA;AAAA,MAGb,gBAAAe,EAAC,SAAI,WAAWC;AAAA,QACd;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MAAA,GAGA,UAAA;AAAA,QAAA,gBAAAC,EAAC,OAAA,EAAI,WAAU,gHACZ,UAAAlB,GACH;AAAA,QAEA,gBAAAkB,EAAC,SAAI,WAAU,yBACZ,YAAM,SAAS,IAAIV,GAAU,CAACY,MACzBvB,EAAM,eAAeuB,CAAK,IAErBvB,EAAM,aAAauB,GAA2F;AAAA,UACnH,WAAW;AAAA,UACX,OAAO;AAAA,UACP,WAAW;AAAA,QAAA,CACZ,IAEIA,CACR,EAAA,CACH;AAAA,MAAA,EAAA,CACF;AAAA,IAAA,GACF,IAKF,gBAAAJ,EAAC,SAAI,KAAAN,GAAU,WAAWO,EAAG,yBAAyBnB,CAAS,GAAI,GAAGW,GAEpE,UAAA;AAAA,MAAA,gBAAAS;AAAA,QAACC;AAAA,QAAA;AAAA,UACC,MAAApB;AAAA,UACA,OAAAC;AAAA,UACA,QAAAC;AAAA,UACA,OAAAK;AAAA,UACA,aAAW;AAAA,UACX,UAAUO;AAAA,UACV,SAASC;AAAA,QAAA;AAAA,MAAA;AAAA,MAIVD,KACC,gBAAAK,EAAC,OAAA,EAAI,WAAU,yBACZ,UAAAV,EAAA,CACH;AAAA,IAAA,GAEJ;AAAA,EAEJ;AACF;AACAZ,EAAS,cAAc;"}