{"version":3,"file":"nav-renderer.mjs","sources":["../../src/layout/nav-renderer.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { NavGroup } from \"./nav-group\"\nimport { NavItem } from \"./nav-item\"\nimport { STLArrowIcon } from \"@/icons\"\nimport {\n  type NavigationConfig,\n  type NavItemConfig,\n  type NavGroupConfig,\n  type TopLevelNavItem,\n  type TopLevelNavGroup,\n  isNavGroup,\n} from \"./types\"\n\nexport interface NavRendererProps {\n  /** 네비게이션 설정 데이터 */\n  items: NavigationConfig\n  /** 아이콘 크기 */\n  iconSize?: number\n  /** indicator 아이콘 크기 */\n  indicatorSize?: number\n  /** 축소 모드 (아이콘만 표시) */\n  collapsed?: boolean\n  /** 현재 경로 (active 상태 자동 결정) */\n  currentPath?: string\n  /** 아이템 클릭 핸들러 (href가 있는 아이템 클릭 시 호출) */\n  onItemClick?: (href: string, item: NavItemConfig | TopLevelNavItem) => void\n}\n\ntype DepthLevel = 1 | 2 | 3\n\n/** depth 값을 유효한 범위로 변환 */\nfunction toDepthLevel(depth: number): DepthLevel | undefined {\n  if (depth <= 1) return undefined\n  if (depth >= 3) return 3\n  return depth as DepthLevel\n}\n\n/** 네비게이션 설정 데이터를 컴포넌트로 렌더링 */\nexport function NavRenderer({\n  items,\n  iconSize = 24,\n  indicatorSize = 24,\n  collapsed,\n  currentPath,\n  onItemClick,\n}: NavRendererProps) {\n  /** 현재 경로가 그룹의 하위 경로인지 확인 */\n  const isGroupActive = (group: NavGroupConfig | TopLevelNavGroup): boolean => {\n    if (!currentPath) return false\n    const checkChildren = (children: (NavItemConfig | NavGroupConfig)[]): boolean => {\n      return children.some((child) => {\n        if (isNavGroup(child)) {\n          return checkChildren(child.children)\n        }\n        return child.href === currentPath\n      })\n    }\n    return checkChildren(group.children)\n  }\n\n  const renderItem = (\n    item: NavItemConfig | NavGroupConfig | TopLevelNavItem | TopLevelNavGroup,\n    depth: number = 1\n  ): React.ReactNode => {\n    if (isNavGroup(item)) {\n      const IconComponent = \"icon\" in item ? item.icon : undefined\n      const shouldExpand = item.defaultExpanded || isGroupActive(item)\n\n      return (\n        <NavGroup\n          key={item.id}\n          icon={IconComponent ? <IconComponent size={iconSize} /> : undefined}\n          label={item.label}\n          depth={toDepthLevel(depth)}\n          defaultExpanded={shouldExpand}\n          collapsed={collapsed}\n        >\n          {item.children.map((child) => renderItem(child, depth + 1))}\n        </NavGroup>\n      )\n    }\n\n    // NavItem\n    const navItem = item as TopLevelNavItem | NavItemConfig\n    const IconComponent = \"icon\" in navItem ? navItem.icon : undefined\n    // currentPath가 있으면 href와 비교, 없으면 설정된 active 사용\n    const isActive = currentPath ? navItem.href === currentPath : navItem.active\n\n    const handleClick = () => {\n      if (onItemClick && navItem.href) {\n        onItemClick(navItem.href, navItem)\n      }\n    }\n\n    return (\n      <NavItem\n        key={navItem.id}\n        icon={IconComponent ? <IconComponent size={iconSize} /> : undefined}\n        label={navItem.label}\n        active={isActive}\n        depth={toDepthLevel(depth)}\n        collapsed={collapsed}\n        indicator={\n          navItem.hasIndicator ? (\n            <STLArrowIcon size={indicatorSize} />\n          ) : undefined\n        }\n        onClick={onItemClick && navItem.href ? handleClick : undefined}\n      />\n    )\n  }\n\n  return <>{items.map((item) => renderItem(item))}</>\n}\n"],"names":["toDepthLevel","depth","NavRenderer","items","iconSize","indicatorSize","collapsed","currentPath","onItemClick","isGroupActive","group","checkChildren","children","child","isNavGroup","renderItem","item","IconComponent","shouldExpand","jsx","NavGroup","navItem","isActive","handleClick","NavItem","STLArrowIcon","Fragment"],"mappings":";;;;;AA+BA,SAASA,EAAaC,GAAuC;AAC3D,MAAI,EAAAA,KAAS;AACb,WAAIA,KAAS,IAAU,IAChBA;AACT;AAGO,SAASC,EAAY;AAAA,EAC1B,OAAAC;AAAA,EACA,UAAAC,IAAW;AAAA,EACX,eAAAC,IAAgB;AAAA,EAChB,WAAAC;AAAA,EACA,aAAAC;AAAA,EACA,aAAAC;AACF,GAAqB;AAEnB,QAAMC,IAAgB,CAACC,MAAsD;AAC3E,QAAI,CAACH,EAAa,QAAO;AACzB,UAAMI,IAAgB,CAACC,MACdA,EAAS,KAAK,CAACC,MAChBC,EAAWD,CAAK,IACXF,EAAcE,EAAM,QAAQ,IAE9BA,EAAM,SAASN,CACvB;AAEH,WAAOI,EAAcD,EAAM,QAAQ;AAAA,EACrC,GAEMK,IAAa,CACjBC,GACAf,IAAgB,MACI;AACpB,QAAIa,EAAWE,CAAI,GAAG;AACpB,YAAMC,IAAgB,UAAUD,IAAOA,EAAK,OAAO,QAC7CE,IAAeF,EAAK,mBAAmBP,EAAcO,CAAI;AAE/D,aACE,gBAAAG;AAAA,QAACC;AAAA,QAAA;AAAA,UAEC,MAAMH,IAAgB,gBAAAE,EAACF,GAAA,EAAc,MAAMb,GAAU,IAAK;AAAA,UAC1D,OAAOY,EAAK;AAAA,UACZ,OAAOhB,EAAaC,CAAK;AAAA,UACzB,iBAAiBiB;AAAA,UACjB,WAAAZ;AAAA,UAEC,UAAAU,EAAK,SAAS,IAAI,CAACH,MAAUE,EAAWF,GAAOZ,IAAQ,CAAC,CAAC;AAAA,QAAA;AAAA,QAPrDe,EAAK;AAAA,MAAA;AAAA,IAUhB;AAGA,UAAMK,IAAUL,GACVC,IAAgB,UAAUI,IAAUA,EAAQ,OAAO,QAEnDC,IAAWf,IAAcc,EAAQ,SAASd,IAAcc,EAAQ,QAEhEE,IAAc,MAAM;AACxB,MAAIf,KAAea,EAAQ,QACzBb,EAAYa,EAAQ,MAAMA,CAAO;AAAA,IAErC;AAEA,WACE,gBAAAF;AAAA,MAACK;AAAA,MAAA;AAAA,QAEC,MAAMP,IAAgB,gBAAAE,EAACF,GAAA,EAAc,MAAMb,GAAU,IAAK;AAAA,QAC1D,OAAOiB,EAAQ;AAAA,QACf,QAAQC;AAAA,QACR,OAAOtB,EAAaC,CAAK;AAAA,QACzB,WAAAK;AAAA,QACA,WACEe,EAAQ,iCACLI,GAAA,EAAa,MAAMpB,GAAe,IACjC;AAAA,QAEN,SAASG,KAAea,EAAQ,OAAOE,IAAc;AAAA,MAAA;AAAA,MAXhDF,EAAQ;AAAA,IAAA;AAAA,EAcnB;AAEA,SAAO,gBAAAF,EAAAO,GAAA,EAAG,YAAM,IAAI,CAACV,MAASD,EAAWC,CAAI,CAAC,EAAA,CAAE;AAClD;"}