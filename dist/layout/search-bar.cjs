"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("react/jsx-runtime"),L=require("react"),T=require("react-dom"),x=require("../lib/utils.cjs"),V=require("../icons/SearchIcon.cjs"),M=require("../icons/STLArrowIcon.cjs");function S(i){const a=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(i){for(const r in i)if(r!=="default"){const d=Object.getOwnPropertyDescriptor(i,r);Object.defineProperty(a,r,d.get?d:{enumerable:!0,get:()=>i[r]})}}return a.default=i,Object.freeze(a)}const s=S(L),N=s.forwardRef(({placeholder:i="검색어를 입력하세요",value:a,onChange:r,onSearch:d,recentSearches:f=[],onRecentSearchClick:b,className:O,disabled:w},R)=>{const[o,c]=s.useState(!1),[E,h]=s.useState(""),[p,l]=s.useState(-1),[m,_]=s.useState({top:0,left:0,width:0}),k=s.useRef(null),g=s.useRef(null),y=s.useRef(null),v=a!==void 0?a:E,q=e=>{const t=e.target.value;a===void 0&&h(t),r==null||r(t),l(-1)},P=e=>{const t=f.length;e.key==="ArrowDown"&&(e.preventDefault(),!o&&t>0?(c(!0),l(0)):o&&t>0&&l(u=>(u+1)%t)),e.key==="ArrowUp"&&(e.preventDefault(),o&&t>0&&l(u=>(u-1+t)%t)),e.key==="Enter"&&(o&&p>=0&&f[p]?j(f[p]):(d==null||d(v),c(!1))),e.key==="Escape"&&(c(!1),l(-1))},j=e=>{a===void 0&&h(e.text),r==null||r(e.text),b==null||b(e),c(!1),l(-1)};s.useEffect(()=>{if(o&&g.current){const e=g.current.getBoundingClientRect();_({top:e.bottom+13,left:e.left,width:e.width})}},[o]),s.useEffect(()=>{const e=t=>{var D,I;const u=t.target,A=(D=k.current)==null?void 0:D.contains(u),B=(I=y.current)==null?void 0:I.contains(u);!A&&!B&&(c(!1),l(-1))};return o&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[o]);const z=o&&f.length>0;return n.jsxs(n.Fragment,{children:[n.jsx("div",{ref:k,className:"relative",children:n.jsxs("div",{ref:g,className:x.cn("relative flex h-9 items-center gap-2 rounded-[20px] border","bg-white dark:bg-slate-800","border-slate-100 dark:border-slate-600","px-3 cursor-text","focus-within:border-slate-500 dark:focus-within:border-slate-100","transition-colors",w&&"opacity-50 cursor-not-allowed",O),children:[n.jsx(V.SearchIcon,{size:20,className:"text-slate-500 dark:text-slate-50 shrink-0"}),n.jsx("input",{ref:R,type:"text",value:v,onChange:q,onKeyDown:P,onFocus:()=>!w&&c(!0),placeholder:i,disabled:w,className:x.cn("flex-1 bg-transparent text-xs outline-none","text-slate-900 dark:text-slate-50","placeholder:text-slate-300 dark:placeholder:text-slate-50","disabled:cursor-not-allowed")}),n.jsx(M.STLArrowIcon,{size:24,className:"text-blue-500 dark:text-slate-50 shrink-0"})]})}),z&&T.createPortal(n.jsx("div",{ref:y,style:{position:"fixed",top:m.top,left:m.left,width:m.width},className:x.cn("z-50","overflow-hidden rounded-[5px] border","border-slate-100 dark:border-slate-600","bg-white/90 dark:bg-slate-800/90 backdrop-blur-[12px]","shadow-[10px_10px_10px_0px_rgba(0,0,0,0.05)]","p-[5px]","animate-in fade-in-0 zoom-in-95 slide-in-from-top-2"),children:f.map((e,t)=>n.jsx("button",{type:"button",onClick:()=>j(e),onMouseEnter:()=>l(t),className:x.cn("flex h-[29px] w-full cursor-pointer select-none items-center rounded-[2px] px-[5px] py-[5px]","text-xs text-slate-500 dark:text-slate-300 text-left","hover:bg-slate-100 dark:hover:bg-slate-700","focus:bg-slate-100 dark:focus:bg-slate-700 outline-none","transition-colors",p===t&&"bg-slate-100 dark:bg-slate-700"),children:e.text},e.id))}),document.body)]})});N.displayName="SearchBar";exports.SearchBar=N;
//# sourceMappingURL=search-bar.cjs.map
