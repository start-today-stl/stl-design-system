{"version":3,"file":"search-bar.mjs","sources":["../../src/layout/search-bar.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { SearchIcon, STLArrowIcon } from \"@/icons\"\n\nexport interface SearchHistoryItem {\n  id: string\n  text: string\n}\n\nexport interface SearchBarProps {\n  /** 플레이스홀더 텍스트 */\n  placeholder?: string\n  /** 검색어 */\n  value?: string\n  /** 검색어 변경 핸들러 */\n  onChange?: (value: string) => void\n  /** 검색 실행 핸들러 (Enter 키) */\n  onSearch?: (value: string) => void\n  /** 최근 검색어 목록 */\n  recentSearches?: SearchHistoryItem[]\n  /** 최근 검색어 클릭 핸들러 */\n  onRecentSearchClick?: (item: SearchHistoryItem) => void\n  /** 추가 className */\n  className?: string\n  /** 비활성화 */\n  disabled?: boolean\n}\n\nconst SearchBar = React.forwardRef<HTMLInputElement, SearchBarProps>(\n  (\n    {\n      placeholder = \"검색어를 입력하세요\",\n      value,\n      onChange,\n      onSearch,\n      recentSearches = [],\n      onRecentSearchClick,\n      className,\n      disabled,\n    },\n    ref\n  ) => {\n    const [open, setOpen] = React.useState(false)\n    const [internalValue, setInternalValue] = React.useState(\"\")\n    const containerRef = React.useRef<HTMLDivElement>(null)\n\n    const searchValue = value !== undefined ? value : internalValue\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n      const newValue = e.target.value\n      if (value === undefined) {\n        setInternalValue(newValue)\n      }\n      onChange?.(newValue)\n    }\n\n    const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n      if (e.key === \"Enter\") {\n        onSearch?.(searchValue)\n        setOpen(false)\n      }\n      if (e.key === \"Escape\") {\n        setOpen(false)\n      }\n    }\n\n    const handleRecentClick = (item: SearchHistoryItem) => {\n      if (value === undefined) {\n        setInternalValue(item.text)\n      }\n      onChange?.(item.text)\n      onRecentSearchClick?.(item)\n      setOpen(false)\n    }\n\n    // 외부 클릭 감지\n    React.useEffect(() => {\n      const handleClickOutside = (e: MouseEvent) => {\n        if (containerRef.current && !containerRef.current.contains(e.target as Node)) {\n          setOpen(false)\n        }\n      }\n\n      if (open) {\n        document.addEventListener(\"mousedown\", handleClickOutside)\n      }\n\n      return () => {\n        document.removeEventListener(\"mousedown\", handleClickOutside)\n      }\n    }, [open])\n\n    const showDropdown = open && recentSearches.length > 0\n\n    return (\n      <div ref={containerRef} className=\"relative\">\n        <div\n          className={cn(\n            \"relative flex h-9 items-center gap-2 rounded-[20px] border\",\n            \"bg-white dark:bg-dark-400\",\n            \"border-gray-100 dark:border-dark-200\",\n            \"px-3 cursor-text\",\n            \"focus-within:border-gray-500 dark:focus-within:border-gray-100\",\n            \"transition-colors\",\n            disabled && \"opacity-50 cursor-not-allowed\",\n            className\n          )}\n        >\n          <SearchIcon size={20} className=\"text-gray-500 dark:text-gray-50 shrink-0\" />\n          <input\n            ref={ref}\n            type=\"text\"\n            value={searchValue}\n            onChange={handleChange}\n            onKeyDown={handleKeyDown}\n            onFocus={() => !disabled && setOpen(true)}\n            placeholder={placeholder}\n            disabled={disabled}\n            className={cn(\n              \"flex-1 bg-transparent text-xs outline-none\",\n              \"text-gray-900 dark:text-gray-50\",\n              \"placeholder:text-gray-300 dark:placeholder:text-gray-50\",\n              \"disabled:cursor-not-allowed\"\n            )}\n          />\n          <STLArrowIcon size={24} className=\"text-primary dark:text-gray-50 shrink-0\" />\n        </div>\n\n        {showDropdown && (\n          <div\n            className={cn(\n              \"absolute left-0 right-0 top-full mt-[13px] z-50\",\n              \"overflow-hidden rounded-[5px] border\",\n              \"border-gray-100 dark:border-dark-200\",\n              \"bg-white/50 dark:bg-dark-400/50 backdrop-blur-[12px]\",\n              \"shadow-[10px_10px_10px_0px_rgba(0,0,0,0.05)]\",\n              \"p-[5px]\",\n              \"animate-in fade-in-0 zoom-in-95 slide-in-from-top-2\"\n            )}\n          >\n            {recentSearches.map((item) => (\n              <button\n                key={item.id}\n                type=\"button\"\n                onClick={() => handleRecentClick(item)}\n                className={cn(\n                  \"flex h-[29px] w-full cursor-pointer select-none items-center rounded-[2px] px-[5px] py-[5px]\",\n                  \"text-xs text-gray-500 dark:text-gray-300 text-left\",\n                  \"hover:bg-gray-100 dark:hover:bg-dark-300\",\n                  \"focus:bg-gray-100 dark:focus:bg-dark-300 outline-none\",\n                  \"transition-colors\"\n                )}\n              >\n                {item.text}\n              </button>\n            ))}\n          </div>\n        )}\n      </div>\n    )\n  }\n)\nSearchBar.displayName = \"SearchBar\"\n\nexport { SearchBar }\n"],"names":["SearchBar","React","placeholder","value","onChange","onSearch","recentSearches","onRecentSearchClick","className","disabled","ref","open","setOpen","internalValue","setInternalValue","containerRef","searchValue","handleChange","e","newValue","handleKeyDown","handleRecentClick","item","handleClickOutside","showDropdown","jsxs","cn","jsx","SearchIcon","STLArrowIcon"],"mappings":"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"}